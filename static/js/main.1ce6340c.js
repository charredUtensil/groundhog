/*! For license information please see main.1ce6340c.js.LICENSE.txt */
(()=>{var e={6264:(e,t,n)=>{"use strict";var r=n(2604);e.exports=r},2604:e=>{"use strict";var t={complex128:function(e,t){return e.get(t)},complex64:function(e,t){return e.get(t)},default:function(e,t){return e.get(t)}};e.exports=function(e){var n=t[e];return"function"===typeof n?n:t.default}},6572:(e,t,n)=>{"use strict";var r=n(1923);e.exports=r},1923:e=>{"use strict";var t={complex128:function(e,t,n){e.set(n,t)},complex64:function(e,t,n){e.set(n,t)},default:function(e,t,n){e.set(n,t)}};e.exports=function(e){var n=t[e];return"function"===typeof n?n:t.default}},2508:(e,t,n)=>{"use strict";var r=n(5603);e.exports=r},5603:(e,t,n)=>{"use strict";var r=n(6908),a=n(6148),o=n(1056),i=n(6264),s=n(6572),l=n(435);e.exports=function(e){var t=l(e);return r(e)?{data:e,dtype:t,accessorProtocol:!0,accessors:[i(t),s(t)]}:{data:e,dtype:t,accessorProtocol:!1,accessors:[a(t),o(t)]}}},6908:(e,t,n)=>{"use strict";var r=n(9459);e.exports=r},9459:e=>{"use strict";var t="function";e.exports=function(e){return typeof e.get===t&&typeof e.set===t}},2771:(e,t,n)=>{"use strict";var r=n(9582);e.exports=r},9582:e=>{"use strict";e.exports=function(e){return"object"===typeof e&&null!==e&&"Complex128Array"===e.constructor.name&&16===e.BYTES_PER_ELEMENT}},4792:(e,t,n)=>{"use strict";var r=n(4479);e.exports=r},4479:e=>{"use strict";e.exports=function(e){return"object"===typeof e&&null!==e&&"Complex64Array"===e.constructor.name&&8===e.BYTES_PER_ELEMENT}},6148:(e,t,n)=>{"use strict";var r=n(3147);e.exports=r},3147:e=>{"use strict";var t={float64:function(e,t){return e[t]},float32:function(e,t){return e[t]},int32:function(e,t){return e[t]},int16:function(e,t){return e[t]},int8:function(e,t){return e[t]},uint32:function(e,t){return e[t]},uint16:function(e,t){return e[t]},uint8:function(e,t){return e[t]},uint8c:function(e,t){return e[t]},generic:function(e,t){return e[t]},default:function(e,t){return e[t]}};e.exports=function(e){var n=t[e];return"function"===typeof n?n:t.default}},1056:(e,t,n)=>{"use strict";var r=n(9527);e.exports=r},9527:e=>{"use strict";var t={float64:function(e,t,n){e[t]=n},float32:function(e,t,n){e[t]=n},int32:function(e,t,n){e[t]=n},int16:function(e,t,n){e[t]=n},int8:function(e,t,n){e[t]=n},uint32:function(e,t,n){e[t]=n},uint16:function(e,t,n){e[t]=n},uint8:function(e,t,n){e[t]=n},uint8c:function(e,t,n){e[t]=n},generic:function(e,t,n){e[t]=n},default:function(e,t,n){e[t]=n}};e.exports=function(e){var n=t[e];return"function"===typeof n?n:t.default}},3500:(e,t,n)=>{"use strict";var r=n(1697),a=n(1886),o=n(7400);e.exports=function(e,t){var n,i,s,l;for(n=t.length,l=0,s=0;s<n;s++){if(i=t[s],!r(i))return null;e[l]=a(i),e[l+1]=o(i),l+=2}return e}},4936:(e,t,n)=>{"use strict";var r=n(9014),a=n(1697),o=n(6132),i=n(1886),s=n(7400);e.exports=function(e){var t,n,l;for(t=[];!(n=e.next()).done;)if(l=n.value,r(l)&&l.length>=2)t.push(l[0],l[1]);else{if(!a(l))return new TypeError(o("invalid argument. An iterator must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",l));t.push(i(l),s(l))}return t}},8846:(e,t,n)=>{"use strict";var r=n(9014),a=n(1697),o=n(6132),i=n(1886),s=n(7400);e.exports=function(e,t,n){var l,c,u,d;for(l=[],d=-1;!(c=e.next()).done;)if(d+=1,u=t.call(n,c.value,d),r(u)&&u.length>=2)l.push(u[0],u[1]);else{if(!a(u))return new TypeError(o("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",u));l.push(i(u),s(u))}return l}},200:(e,t,n)=>{"use strict";var r=n(5071);e.exports=r},5071:(e,t,n)=>{"use strict";var r=n(5180).isPrimitive,a=n(9014),o=n(1317),i=n(6312),s=n(4750),l=n(258),c=n(3408),u=n(3629),d=n(1697),f=n(6246),h=n(872),p=n(4792),m=n(2771),g=n(7128),v=n(2510),y=n(404),b=n(9274),w=n(4023),x=n(2254),S=n(1886),_=n(7400),E=n(7730),R=n(5506),O=n(3193),k=n(6148),C=n(6264),A=n(6132),L=n(4936),T=n(8846),M=n(3500),I=2*w.BYTES_PER_ELEMENT,P=g();function j(e){return e instanceof D||"object"===typeof e&&null!==e&&("Complex64Array"===e.constructor.name||"Complex128Array"===e.constructor.name)&&"number"===typeof e._length&&"object"===typeof e._buffer}function F(e){return e===D||"Complex64Array"===e.name}function N(e,t){return new x(e[t*=2],e[t+1])}function D(){var e,t,n,a;if(t=arguments.length,!(this instanceof D))return 0===t?new D:1===t?new D(arguments[0]):2===t?new D(arguments[0],arguments[1]):new D(arguments[0],arguments[1],arguments[2]);if(0===t)n=new w(0);else if(1===t)if(r(arguments[0]))n=new w(2*arguments[0]);else if(o(arguments[0]))if((a=(n=arguments[0]).length)&&l(n)&&d(n[0])){if(null===(n=M(new w(2*a),n))){if(!f(a))throw new RangeError(A("invalid argument. Array-like object arguments must have a length which is a multiple of two. Length: `%u`.",a));n=new w(arguments[0])}}else{if(p(n))n=R(n,0);else if(m(n))n=O(n,0);else if(!f(a))throw new RangeError(A("invalid argument. Array-like object and typed array arguments must have a length which is a multiple of two. Length: `%u`.",a));n=new w(n)}else if(i(arguments[0])){if(!h((n=arguments[0]).byteLength/I))throw new RangeError(A("invalid argument. ArrayBuffer byte length must be a multiple of %u. Byte length: `%u`.",I,n.byteLength));n=new w(n)}else{if(!s(arguments[0]))throw new TypeError(A("invalid argument. Must provide a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",arguments[0]));if(n=arguments[0],!1===P)throw new TypeError(A("invalid argument. Environment lacks Symbol.iterator support. Must provide a length, ArrayBuffer, typed array, or array-like object. Value: `%s`.",n));if(!u(n[v]))throw new TypeError(A("invalid argument. Must provide a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",n));if(n=n[v](),!u(n.next))throw new TypeError(A("invalid argument. Must provide a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",n));if((n=L(n))instanceof Error)throw n;n=new w(n)}else{if(!i(n=arguments[0]))throw new TypeError(A("invalid argument. First argument must be an ArrayBuffer. Value: `%s`.",n));if(!r(e=arguments[1]))throw new TypeError(A("invalid argument. Byte offset must be a nonnegative integer. Value: `%s`.",e));if(!h(e/I))throw new RangeError(A("invalid argument. Byte offset must be a multiple of %u. Value: `%u`.",I,e));if(2===t){if(a=n.byteLength-e,!h(a/I))throw new RangeError(A("invalid arguments. ArrayBuffer view byte length must be a multiple of %u. View byte length: `%u`.",I,a));n=new w(n,e)}else{if(!r(a=arguments[2]))throw new TypeError(A("invalid argument. Length must be a nonnegative integer. Value: `%s`.",a));if(a*I>n.byteLength-e)throw new RangeError(A("invalid arguments. ArrayBuffer has insufficient capacity. Either decrease the array length or provide a bigger buffer. Minimum capacity: `%u`.",a*I));n=new w(n,e,2*a)}}return y(this,"_buffer",n),y(this,"_length",n.length/2),this}y(D,"BYTES_PER_ELEMENT",I),y(D,"name","Complex128Array"),y(D,"from",(function(e){var t,n,r,i,l,c,h,p,m,g,y,b;if(!u(this))throw new TypeError("invalid invocation. `this` context must be a constructor.");if(!F(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if((n=arguments.length)>1){if(!u(r=arguments[1]))throw new TypeError(A("invalid argument. Second argument must be a function. Value: `%s`.",r));n>2&&(t=arguments[2])}if(j(e)){if(p=e.length,r){for(l=(i=new this(p))._buffer,b=0,y=0;y<p;y++){if(g=r.call(t,e.get(y),y),d(g))l[b]=S(g),l[b+1]=_(g);else{if(!(a(g)&&g.length>=2))throw new TypeError(A("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",g));l[b]=g[0],l[b+1]=g[1]}b+=2}return i}return new this(e)}if(o(e)){if(r){for(p=e.length,h=e.get&&e.set?C("default"):k("default"),y=0;y<p;y++)if(!d(h(e,y))){m=!0;break}if(m){if(!f(p))throw new RangeError(A("invalid argument. First argument must have a length which is a multiple of two. Length: `%u`.",p));for(l=(i=new this(p/2))._buffer,y=0;y<p;y++)l[y]=r.call(t,h(e,y),y);return i}for(l=(i=new this(p))._buffer,b=0,y=0;y<p;y++){if(g=r.call(t,h(e,y),y),d(g))l[b]=S(g),l[b+1]=_(g);else{if(!(a(g)&&g.length>=2))throw new TypeError(A("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",g));l[b]=g[0],l[b+1]=g[1]}b+=2}return i}return new this(e)}if(s(e)&&P&&u(e[v])){if(l=e[v](),!u(l.next))throw new TypeError(A("invalid argument. First argument must be an array-like object or an iterable. Value: `%s`.",e));if((c=r?T(l,r,t):L(l))instanceof Error)throw c;for(l=(i=new this(p=c.length/2))._buffer,y=0;y<p;y++)l[y]=c[y];return i}throw new TypeError(A("invalid argument. First argument must be an array-like object or an iterable. Value: `%s`.",e))})),y(D,"of",(function(){var e,t;if(!u(this))throw new TypeError("invalid invocation. `this` context must be a constructor.");if(!F(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return new this(e)})),y(D.prototype,"at",(function(e){if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!h(e))throw new TypeError(A("invalid argument. Must provide an integer. Value: `%s`.",e));if(e<0&&(e+=this._length),!(e<0||e>=this._length))return N(this._buffer,e)})),b(D.prototype,"buffer",(function(){return this._buffer.buffer})),b(D.prototype,"byteLength",(function(){return this._buffer.byteLength})),b(D.prototype,"byteOffset",(function(){return this._buffer.byteOffset})),y(D.prototype,"BYTES_PER_ELEMENT",D.BYTES_PER_ELEMENT),y(D.prototype,"copyWithin",(function(e,t){if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");return 2===arguments.length?this._buffer.copyWithin(2*e,2*t):this._buffer.copyWithin(2*e,2*t,2*arguments[2]),this})),y(D.prototype,"entries",(function(){var e,t,n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");return t=this,e=this._buffer,r=this._length,o=-1,i=-2,y(n={},"next",(function(){var t;if(o+=1,a||o>=r)return{done:!0};return t=new x(e[i+=2],e[i+1]),{value:[o,t],done:!1}})),y(n,"return",(function(e){if(a=!0,arguments.length)return{value:e,done:!0};return{done:!0}})),v&&y(n,v,(function(){return t.entries()})),n})),y(D.prototype,"every",(function(e,t){var n,r;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(!e.call(t,N(n,r),r,this))return!1;return!0})),y(D.prototype,"fill",(function(e,t,n){var r,a,o,i,s,l;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(A("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(r=this._buffer,a=this._length,arguments.length>1){if(!h(t))throw new TypeError(A("invalid argument. Second argument must be an integer. Value: `%s`.",t));if(t<0&&(t+=a)<0&&(t=0),arguments.length>2){if(!h(n))throw new TypeError(A("invalid argument. Third argument must be an integer. Value: `%s`.",n));n<0&&(n+=a)<0&&(n=0),n>a&&(n=a)}else n=a}else t=0,n=a;for(i=S(e),s=_(e),l=t;l<n;l++)r[o=2*l]=i,r[o+1]=s;return this})),y(D.prototype,"filter",(function(e,t){var n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=[],a=0;a<this._length;a++)o=N(n,a),e.call(t,o,a,this)&&r.push(o);return new this.constructor(r)})),y(D.prototype,"find",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(a=N(n,r),e.call(t,a,r,this))return a})),y(D.prototype,"findIndex",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(a=N(n,r),e.call(t,a,r,this))return r;return-1})),y(D.prototype,"findLast",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=this._length-1;r>=0;r--)if(a=N(n,r),e.call(t,a,r,this))return a})),y(D.prototype,"findLastIndex",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=this._length-1;r>=0;r--)if(a=N(n,r),e.call(t,a,r,this))return r;return-1})),y(D.prototype,"forEach",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)a=N(n,r),e.call(t,a,r,this)})),y(D.prototype,"get",(function(e){if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!r(e))throw new TypeError(A("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));if(!(e>=this._length))return N(this._buffer,e)})),b(D.prototype,"length",(function(){return this._length})),y(D.prototype,"includes",(function(e,t){var n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(A("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(arguments.length>1){if(!h(t))throw new TypeError(A("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0&&(t+=this._length)<0&&(t=0)}else t=0;for(a=S(e),o=_(e),n=this._buffer,i=t;i<this._length;i++)if(a===n[r=2*i]&&o===n[r+1])return!0;return!1})),y(D.prototype,"indexOf",(function(e,t){var n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(A("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(arguments.length>1){if(!h(t))throw new TypeError(A("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0&&(t+=this._length)<0&&(t=0)}else t=0;for(a=S(e),o=_(e),n=this._buffer,i=t;i<this._length;i++)if(a===n[r=2*i]&&o===n[r+1])return i;return-1})),y(D.prototype,"join",(function(e){var t,n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(0===arguments.length)r=",";else{if(!c(e))throw new TypeError(A("invalid argument. First argument must be a string. Value: `%s`.",e));r=e}for(t=[],n=this._buffer,a=0;a<this._length;a++)t.push(N(n,a).toString());return t.join(r)})),y(D.prototype,"lastIndexOf",(function(e,t){var n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(A("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(arguments.length>1){if(!h(t))throw new TypeError(A("invalid argument. Second argument must be an integer. Value: `%s`.",t));t>=this._length?t=this._length-1:t<0&&(t+=this._length)}else t=this._length-1;for(a=S(e),o=_(e),n=this._buffer,i=t;i>=0;i--)if(a===n[r=2*i]&&o===n[r+1])return i;return-1})),y(D.prototype,"map",(function(e,t){var n,r,o,i,s;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(r=this._buffer,n=(o=new this.constructor(this._length))._buffer,i=0;i<this._length;i++)if(s=e.call(t,N(r,i),i,this),d(s))n[2*i]=S(s),n[2*i+1]=_(s);else{if(!a(s)||2!==s.length)throw new TypeError(A("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",s));n[2*i]=s[0],n[2*i+1]=s[1]}return o})),y(D.prototype,"reduce",(function(e,t){var n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));if(n=this._buffer,a=this._length,arguments.length>1)r=t,o=0;else{if(0===a)throw new Error("invalid operation. If not provided an initial value, an array must contain at least one element.");r=N(n,0),o=1}for(;o<a;o++)r=e(r,N(n,o),o,this);return r})),y(D.prototype,"reverse",(function(){var e,t,n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(n=this._length,e=this._buffer,r=E(n/2),a=0;a<r;a++)o=n-a-1,t=e[2*a],e[2*a]=e[2*o],e[2*o]=t,t=e[2*a+1],e[2*a+1]=e[2*o+1],e[2*o+1]=t;return this})),y(D.prototype,"set",(function(e){var t,n,a,i,s,l,c,u,h;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(a=this._buffer,arguments.length>1){if(!r(n=arguments[1]))throw new TypeError(A("invalid argument. Index argument must be a nonnegative integer. Value: `%s`.",n))}else n=0;if(d(e)){if(n>=this._length)throw new RangeError(A("invalid argument. Index argument is out-of-bounds. Value: `%u`.",n));return a[n*=2]=S(e),void(a[n+1]=_(e))}if(j(e)){if(n+(l=e._length)>this._length)throw new RangeError("invalid arguments. Target array lacks sufficient storage to accommodate source values.");if(t=e._buffer,h=a.byteOffset+n*I,t.buffer===a.buffer&&t.byteOffset<h&&t.byteOffset+t.byteLength>h){for(i=new w(t.length),u=0;u<t.length;u++)i[u]=t[u];t=i}for(n*=2,h=0,u=0;u<l;u++)a[n]=t[h],a[n+1]=t[h+1],n+=2,h+=2}else{if(!o(e))throw new TypeError(A("invalid argument. First argument must be either a complex number, an array-like object, or a complex number array. Value: `%s`.",e));for(l=e.length,u=0;u<l;u++)if(!d(e[u])){s=!0;break}if(s){if(!f(l))throw new RangeError(A("invalid argument. Array-like object arguments must have a length which is a multiple of two. Length: `%u`.",l));if(n+l/2>this._length)throw new RangeError("invalid arguments. Target array lacks sufficient storage to accommodate source values.");if(t=e,h=a.byteOffset+n*I,t.buffer===a.buffer&&t.byteOffset<h&&t.byteOffset+t.byteLength>h){for(i=new w(l),u=0;u<l;u++)i[u]=t[u];t=i}for(n*=2,l/=2,h=0,u=0;u<l;u++)a[n]=t[h],a[n+1]=t[h+1],n+=2,h+=2;return}if(n+l>this._length)throw new RangeError("invalid arguments. Target array lacks sufficient storage to accommodate source values.");for(n*=2,u=0;u<l;u++)c=e[u],a[n]=S(c),a[n+1]=_(c),n+=2}})),y(D.prototype,"slice",(function(e,t){var n,r,a,o,i,s,l;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(i=this._buffer,s=this._length,0===arguments.length)e=0,t=s;else{if(!h(e))throw new TypeError(A("invalid argument. First argument must be an integer. Value: `%s`.",e));if(e<0&&(e+=s)<0&&(e=0),1===arguments.length)t=s;else{if(!h(t))throw new TypeError(A("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0?(t+=s)<0&&(t=0):t>s&&(t=s)}}for(n=e<t?t-e:0,r=(a=new this.constructor(n))._buffer,l=0;l<n;l++)o=2*(l+e),r[2*l]=i[o],r[2*l+1]=i[o+1];return a})),y(D.prototype,"some",(function(e,t){var n,r;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(A("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(e.call(t,N(n,r),r,this))return!0;return!1})),y(D.prototype,"subarray",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(r=this._buffer,a=this._length,0===arguments.length)e=0,t=a;else{if(!h(e))throw new TypeError(A("invalid argument. First argument must be an integer. Value: `%s`.",e));if(e<0&&(e+=a)<0&&(e=0),1===arguments.length)t=a;else{if(!h(t))throw new TypeError(A("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0?(t+=a)<0&&(t=0):t>a&&(t=a)}}return e>=a?(a=0,n=r.byteLength):e>=t?(a=0,n=r.byteOffset+e*I):(a=t-e,n=r.byteOffset+e*I),new this.constructor(r.buffer,n,a<0?0:a)})),y(D.prototype,"toReversed",(function(){var e,t,n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(n=this._length,t=new this.constructor(n),r=this._buffer,e=t._buffer,a=0;a<n;a++)o=n-a-1,e[2*a]=r[2*o],e[2*a+1]=r[2*o+1];return t})),y(D.prototype,"toString",(function(){var e,t,n;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(e=[],t=this._buffer,n=0;n<this._length;n++)e.push(N(t,n).toString());return e.join(",")})),y(D.prototype,"with",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!h(e))throw new TypeError(A("invalid argument. First argument must be an integer. Value: `%s`.",e));if(a=this._length,e<0&&(e+=a),e<0||e>=a)throw new RangeError(A("invalid argument. Index argument is out-of-bounds. Value: `%s`.",e));if(!d(t))throw new TypeError(A("invalid argument. Second argument must be a complex number. Value: `%s`.",t));return(n=(r=new this.constructor(this._buffer))._buffer)[2*e]=S(t),n[2*e+1]=_(t),r})),e.exports=D},4647:(e,t,n)=>{"use strict";var r=n(1697),a=n(8212),o=n(3494);e.exports=function(e,t){var n,i,s,l;for(n=t.length,l=0,s=0;s<n;s++){if(i=t[s],!r(i))return null;e[l]=a(i),e[l+1]=o(i),l+=2}return e}},522:(e,t,n)=>{"use strict";var r=n(9014),a=n(1697),o=n(8212),i=n(3494),s=n(6132);e.exports=function(e){var t,n,l;for(t=[];!(n=e.next()).done;)if(l=n.value,r(l)&&l.length>=2)t.push(l[0],l[1]);else{if(!a(l))return new TypeError(s("invalid argument. An iterator must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",l));t.push(o(l),i(l))}return t}},2555:(e,t,n)=>{"use strict";var r=n(9014),a=n(1697),o=n(8212),i=n(3494),s=n(6132);e.exports=function(e,t,n){var l,c,u,d;for(l=[],d=-1;!(c=e.next()).done;)if(d+=1,u=t.call(n,c.value,d),r(u)&&u.length>=2)l.push(u[0],u[1]);else{if(!a(u))return new TypeError(s("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",u));l.push(o(u),i(u))}return l}},9705:(e,t,n)=>{"use strict";var r=n(3800);e.exports=r},3800:(e,t,n)=>{"use strict";var r=n(5180).isPrimitive,a=n(9014),o=n(1317),i=n(6312),s=n(4750),l=n(258),c=n(3408).isPrimitive,u=n(3629),d=n(1697),f=n(6246),h=n(872),p=n(4792),m=n(2771),g=n(7128),v=n(2510),y=n(404),b=n(9274),w=n(3872),x=n(9341),S=n(6132),_=n(8212),E=n(3494),R=n(7730),O=n(5506),k=n(3193),C=n(6148),A=n(6264),L=n(522),T=n(2555),M=n(4647),I=2*w.BYTES_PER_ELEMENT,P=g();function j(e){return e instanceof D||"object"===typeof e&&null!==e&&("Complex64Array"===e.constructor.name||"Complex128Array"===e.constructor.name)&&"number"===typeof e._length&&"object"===typeof e._buffer}function F(e){return e===D||"Complex128Array"===e.name}function N(e,t){return new x(e[t*=2],e[t+1])}function D(){var e,t,n,a;if(t=arguments.length,!(this instanceof D))return 0===t?new D:1===t?new D(arguments[0]):2===t?new D(arguments[0],arguments[1]):new D(arguments[0],arguments[1],arguments[2]);if(0===t)n=new w(0);else if(1===t)if(r(arguments[0]))n=new w(2*arguments[0]);else if(o(arguments[0]))if((a=(n=arguments[0]).length)&&l(n)&&d(n[0])){if(null===(n=M(new w(2*a),n))){if(!f(a))throw new RangeError(S("invalid argument. Array-like object arguments must have a length which is a multiple of two. Length: `%u`.",a));n=new w(arguments[0])}}else{if(p(n))n=O(n,0);else if(m(n))n=k(n,0);else if(!f(a))throw new RangeError(S("invalid argument. Array-like object and typed array arguments must have a length which is a multiple of two. Length: `%u`.",a));n=new w(n)}else if(i(arguments[0])){if(!h((n=arguments[0]).byteLength/I))throw new RangeError(S("invalid argument. ArrayBuffer byte length must be a multiple of %u. Byte length: `%u`.",I,n.byteLength));n=new w(n)}else{if(!s(arguments[0]))throw new TypeError(S("invalid argument. Must provide a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",arguments[0]));if(n=arguments[0],!1===P)throw new TypeError(S("invalid argument. Environment lacks Symbol.iterator support. Must provide a length, ArrayBuffer, typed array, or array-like object. Value: `%s`.",n));if(!u(n[v]))throw new TypeError(S("invalid argument. Must provide a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",n));if(n=n[v](),!u(n.next))throw new TypeError(S("invalid argument. Must provide a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",n));if((n=L(n))instanceof Error)throw n;n=new w(n)}else{if(!i(n=arguments[0]))throw new TypeError(S("invalid argument. First argument must be an ArrayBuffer. Value: `%s`.",n));if(!r(e=arguments[1]))throw new TypeError(S("invalid argument. Byte offset must be a nonnegative integer. Value: `%s`.",e));if(!h(e/I))throw new RangeError(S("invalid argument. Byte offset must be a multiple of %u. Value: `%u`.",I,e));if(2===t){if(a=n.byteLength-e,!h(a/I))throw new RangeError(S("invalid arguments. ArrayBuffer view byte length must be a multiple of %u. View byte length: `%u`.",I,a));n=new w(n,e)}else{if(!r(a=arguments[2]))throw new TypeError(S("invalid argument. Length must be a nonnegative integer. Value: `%s`.",a));if(a*I>n.byteLength-e)throw new RangeError(S("invalid arguments. ArrayBuffer has insufficient capacity. Either decrease the array length or provide a bigger buffer. Minimum capacity: `%u`.",a*I));n=new w(n,e,2*a)}}return y(this,"_buffer",n),y(this,"_length",n.length/2),this}y(D,"BYTES_PER_ELEMENT",I),y(D,"name","Complex64Array"),y(D,"from",(function(e){var t,n,r,i,l,c,h,p,m,g,y,b;if(!u(this))throw new TypeError("invalid invocation. `this` context must be a constructor.");if(!F(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if((n=arguments.length)>1){if(!u(r=arguments[1]))throw new TypeError(S("invalid argument. Second argument must be a function. Value: `%s`.",r));n>2&&(t=arguments[2])}if(j(e)){if(p=e.length,r){for(l=(i=new this(p))._buffer,b=0,y=0;y<p;y++){if(g=r.call(t,e.get(y),y),d(g))l[b]=_(g),l[b+1]=E(g);else{if(!(a(g)&&g.length>=2))throw new TypeError(S("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",g));l[b]=g[0],l[b+1]=g[1]}b+=2}return i}return new this(e)}if(o(e)){if(r){for(p=e.length,h=e.get&&e.set?A("default"):C("default"),y=0;y<p;y++)if(!d(h(e,y))){m=!0;break}if(m){if(!f(p))throw new RangeError(S("invalid argument. First argument must have a length which is a multiple of %u. Length: `%u`.",2,p));for(l=(i=new this(p/2))._buffer,y=0;y<p;y++)l[y]=r.call(t,h(e,y),y);return i}for(l=(i=new this(p))._buffer,b=0,y=0;y<p;y++){if(g=r.call(t,h(e,y),y),d(g))l[b]=_(g),l[b+1]=E(g);else{if(!(a(g)&&g.length>=2))throw new TypeError(S("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",g));l[b]=g[0],l[b+1]=g[1]}b+=2}return i}return new this(e)}if(s(e)&&P&&u(e[v])){if(l=e[v](),!u(l.next))throw new TypeError(S("invalid argument. First argument must be an array-like object or an iterable. Value: `%s`.",e));if((c=r?T(l,r,t):L(l))instanceof Error)throw c;for(l=(i=new this(p=c.length/2))._buffer,y=0;y<p;y++)l[y]=c[y];return i}throw new TypeError(S("invalid argument. First argument must be an array-like object or an iterable. Value: `%s`.",e))})),y(D,"of",(function(){var e,t;if(!u(this))throw new TypeError("invalid invocation. `this` context must be a constructor.");if(!F(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return new this(e)})),y(D.prototype,"at",(function(e){if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!h(e))throw new TypeError(S("invalid argument. Must provide an integer. Value: `%s`.",e));if(e<0&&(e+=this._length),!(e<0||e>=this._length))return N(this._buffer,e)})),b(D.prototype,"buffer",(function(){return this._buffer.buffer})),b(D.prototype,"byteLength",(function(){return this._buffer.byteLength})),b(D.prototype,"byteOffset",(function(){return this._buffer.byteOffset})),y(D.prototype,"BYTES_PER_ELEMENT",D.BYTES_PER_ELEMENT),y(D.prototype,"copyWithin",(function(e,t){if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");return 2===arguments.length?this._buffer.copyWithin(2*e,2*t):this._buffer.copyWithin(2*e,2*t,2*arguments[2]),this})),y(D.prototype,"entries",(function(){var e,t,n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");return t=this,e=this._buffer,r=this._length,o=-1,i=-2,y(n={},"next",(function(){var t;if(o+=1,a||o>=r)return{done:!0};return t=new x(e[i+=2],e[i+1]),{value:[o,t],done:!1}})),y(n,"return",(function(e){if(a=!0,arguments.length)return{value:e,done:!0};return{done:!0}})),v&&y(n,v,(function(){return t.entries()})),n})),y(D.prototype,"every",(function(e,t){var n,r;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(!e.call(t,N(n,r),r,this))return!1;return!0})),y(D.prototype,"fill",(function(e,t,n){var r,a,o,i,s,l;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(S("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(r=this._buffer,a=this._length,arguments.length>1){if(!h(t))throw new TypeError(S("invalid argument. Second argument must be an integer. Value: `%s`.",t));if(t<0&&(t+=a)<0&&(t=0),arguments.length>2){if(!h(n))throw new TypeError(S("invalid argument. Third argument must be an integer. Value: `%s`.",n));n<0&&(n+=a)<0&&(n=0),n>a&&(n=a)}else n=a}else t=0,n=a;for(i=_(e),s=E(e),l=t;l<n;l++)r[o=2*l]=i,r[o+1]=s;return this})),y(D.prototype,"filter",(function(e,t){var n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=[],a=0;a<this._length;a++)o=N(n,a),e.call(t,o,a,this)&&r.push(o);return new this.constructor(r)})),y(D.prototype,"find",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(a=N(n,r),e.call(t,a,r,this))return a})),y(D.prototype,"findIndex",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(a=N(n,r),e.call(t,a,r,this))return r;return-1})),y(D.prototype,"findLast",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=this._length-1;r>=0;r--)if(a=N(n,r),e.call(t,a,r,this))return a})),y(D.prototype,"findLastIndex",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=this._length-1;r>=0;r--)if(a=N(n,r),e.call(t,a,r,this))return r;return-1})),y(D.prototype,"forEach",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)a=N(n,r),e.call(t,a,r,this)})),y(D.prototype,"get",(function(e){if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!r(e))throw new TypeError(S("invalid argument. Must provide a nonnegative integer. Value: `%s`.",e));if(!(e>=this._length))return N(this._buffer,e)})),y(D.prototype,"includes",(function(e,t){var n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(S("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(arguments.length>1){if(!h(t))throw new TypeError(S("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0&&(t+=this._length)<0&&(t=0)}else t=0;for(a=_(e),o=E(e),n=this._buffer,i=t;i<this._length;i++)if(a===n[r=2*i]&&o===n[r+1])return!0;return!1})),y(D.prototype,"indexOf",(function(e,t){var n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(S("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(arguments.length>1){if(!h(t))throw new TypeError(S("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0&&(t+=this._length)<0&&(t=0)}else t=0;for(a=_(e),o=E(e),n=this._buffer,i=t;i<this._length;i++)if(a===n[r=2*i]&&o===n[r+1])return i;return-1})),y(D.prototype,"join",(function(e){var t,n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(0===arguments.length)r=",";else{if(!c(e))throw new TypeError(S("invalid argument. First argument must be a string. Value: `%s`.",e));r=e}for(t=[],n=this._buffer,a=0;a<this._length;a++)t.push(N(n,a).toString());return t.join(r)})),y(D.prototype,"lastIndexOf",(function(e,t){var n,r,a,o,i;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!d(e))throw new TypeError(S("invalid argument. First argument must be a complex number. Value: `%s`.",e));if(arguments.length>1){if(!h(t))throw new TypeError(S("invalid argument. Second argument must be an integer. Value: `%s`.",t));t>=this._length?t=this._length-1:t<0&&(t+=this._length)}else t=this._length-1;for(a=_(e),o=E(e),n=this._buffer,i=t;i>=0;i--)if(a===n[r=2*i]&&o===n[r+1])return i;return-1})),b(D.prototype,"length",(function(){return this._length})),y(D.prototype,"map",(function(e,t){var n,r,o,i,s;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(r=this._buffer,n=(o=new this.constructor(this._length))._buffer,i=0;i<this._length;i++)if(s=e.call(t,N(r,i),i,this),d(s))n[2*i]=_(s),n[2*i+1]=E(s);else{if(!a(s)||2!==s.length)throw new TypeError(S("invalid argument. Callback must return either a two-element array containing real and imaginary components or a complex number. Value: `%s`.",s));n[2*i]=s[0],n[2*i+1]=s[1]}return o})),y(D.prototype,"reduce",(function(e,t){var n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));if(n=this._buffer,a=this._length,arguments.length>1)r=t,o=0;else{if(0===a)throw new Error("invalid operation. If not provided an initial value, an array must contain at least one element.");r=N(n,0),o=1}for(;o<a;o++)r=e(r,N(n,o),o,this);return r})),y(D.prototype,"reverse",(function(){var e,t,n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(n=this._length,e=this._buffer,r=R(n/2),a=0;a<r;a++)o=n-a-1,t=e[2*a],e[2*a]=e[2*o],e[2*o]=t,t=e[2*a+1],e[2*a+1]=e[2*o+1],e[2*o+1]=t;return this})),y(D.prototype,"set",(function(e){var t,n,a,i,s,l,c,u,h;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(a=this._buffer,arguments.length>1){if(!r(n=arguments[1]))throw new TypeError(S("invalid argument. Index argument must be a nonnegative integer. Value: `%s`.",n))}else n=0;if(d(e)){if(n>=this._length)throw new RangeError(S("invalid argument. Index argument is out-of-bounds. Value: `%u`.",n));return a[n*=2]=_(e),void(a[n+1]=E(e))}if(j(e)){if(n+(l=e._length)>this._length)throw new RangeError("invalid arguments. Target array lacks sufficient storage to accommodate source values.");if(t=e._buffer,h=a.byteOffset+n*I,t.buffer===a.buffer&&t.byteOffset<h&&t.byteOffset+t.byteLength>h){for(i=new w(t.length),u=0;u<t.length;u++)i[u]=t[u];t=i}for(n*=2,h=0,u=0;u<l;u++)a[n]=t[h],a[n+1]=t[h+1],n+=2,h+=2}else{if(!o(e))throw new TypeError(S("invalid argument. First argument must be either a complex number, an array-like object, or a complex number array. Value: `%s`.",e));for(l=e.length,u=0;u<l;u++)if(!d(e[u])){s=!0;break}if(s){if(!f(l))throw new RangeError(S("invalid argument. Array-like object arguments must have a length which is a multiple of two. Length: `%u`.",l));if(n+l/2>this._length)throw new RangeError("invalid arguments. Target array lacks sufficient storage to accommodate source values.");if(t=e,h=a.byteOffset+n*I,t.buffer===a.buffer&&t.byteOffset<h&&t.byteOffset+t.byteLength>h){for(i=new w(l),u=0;u<l;u++)i[u]=t[u];t=i}for(n*=2,l/=2,h=0,u=0;u<l;u++)a[n]=t[h],a[n+1]=t[h+1],n+=2,h+=2;return}if(n+l>this._length)throw new RangeError("invalid arguments. Target array lacks sufficient storage to accommodate source values.");for(n*=2,u=0;u<l;u++)c=e[u],a[n]=_(c),a[n+1]=E(c),n+=2}})),y(D.prototype,"slice",(function(e,t){var n,r,a,o,i,s,l;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(i=this._buffer,s=this._length,0===arguments.length)e=0,t=s;else{if(!h(e))throw new TypeError(S("invalid argument. First argument must be an integer. Value: `%s`.",e));if(e<0&&(e+=s)<0&&(e=0),1===arguments.length)t=s;else{if(!h(t))throw new TypeError(S("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0?(t+=s)<0&&(t=0):t>s&&(t=s)}}for(n=e<t?t-e:0,r=(a=new this.constructor(n))._buffer,l=0;l<n;l++)o=2*(l+e),r[2*l]=i[o],r[2*l+1]=i[o+1];return a})),y(D.prototype,"some",(function(e,t){var n,r;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!u(e))throw new TypeError(S("invalid argument. First argument must be a function. Value: `%s`.",e));for(n=this._buffer,r=0;r<this._length;r++)if(e.call(t,N(n,r),r,this))return!0;return!1})),y(D.prototype,"subarray",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(r=this._buffer,a=this._length,0===arguments.length)e=0,t=a;else{if(!h(e))throw new TypeError(S("invalid argument. First argument must be an integer. Value: `%s`.",e));if(e<0&&(e+=a)<0&&(e=0),1===arguments.length)t=a;else{if(!h(t))throw new TypeError(S("invalid argument. Second argument must be an integer. Value: `%s`.",t));t<0?(t+=a)<0&&(t=0):t>a&&(t=a)}}return e>=a?(a=0,n=r.byteLength):e>=t?(a=0,n=r.byteOffset+e*I):(a=t-e,n=r.byteOffset+e*I),new this.constructor(r.buffer,n,a<0?0:a)})),y(D.prototype,"toReversed",(function(){var e,t,n,r,a,o;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(n=this._length,t=new this.constructor(n),r=this._buffer,e=t._buffer,a=0;a<n;a++)o=n-a-1,e[2*a]=r[2*o],e[2*a+1]=r[2*o+1];return t})),y(D.prototype,"toString",(function(){var e,t,n;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");for(e=[],t=this._buffer,n=0;n<this._length;n++)e.push(N(t,n).toString());return e.join(",")})),y(D.prototype,"with",(function(e,t){var n,r,a;if(!j(this))throw new TypeError("invalid invocation. `this` is not a complex number array.");if(!h(e))throw new TypeError(S("invalid argument. First argument must be an integer. Value: `%s`.",e));if(a=this._length,e<0&&(e+=a),e<0||e>=a)throw new RangeError(S("invalid argument. Index argument is out-of-bounds. Value: `%s`.",e));if(!d(t))throw new TypeError(S("invalid argument. Second argument must be a complex number. Value: `%s`.",t));return(n=(r=new this.constructor(this._buffer))._buffer)[2*e]=_(t),n[2*e+1]=E(t),r})),e.exports=D},8639:e=>{"use strict";e.exports={Float32Array:"float32",Float64Array:"float64",Array:"generic",Int16Array:"int16",Int32Array:"int32",Int8Array:"int8",Uint16Array:"uint16",Uint32Array:"uint32",Uint8Array:"uint8",Uint8ClampedArray:"uint8c",Complex64Array:"complex64",Complex128Array:"complex128"}},6556:(e,t,n)=>{"use strict";var r=n(4023),a=n(3872),o=n(6532),i=n(8271),s=n(6990),l=n(6461),c=n(9475),u=n(7720),d=[r,a,i,o,l,s,n(9518),c,u,n(9705),n(200)];e.exports=d},4046:e=>{"use strict";e.exports=["float64","float32","int32","uint32","int16","uint16","int8","uint8","uint8c","complex64","complex128"]},435:(e,t,n)=>{"use strict";var r=n(3822);e.exports=r},3822:(e,t,n)=>{"use strict";var r=n(971),a=n(258),o=n(2793),i=n(8639),s=n(6556),l=n(4046),c=l.length;e.exports=function(e){var t;if(a(e))return"generic";if(r(e))return null;for(t=0;t<c;t++)if(e instanceof s[t])return l[t];return i[o(e)]||null}},3872:(e,t,n)=>{"use strict";var r,a=n(3539),o=n(9959),i=n(6321);r=a()?o:i,e.exports=r},9959:e=>{"use strict";var t="function"===typeof Float32Array?Float32Array:void 0;e.exports=t},6321:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},4023:(e,t,n)=>{"use strict";var r,a=n(7750),o=n(1170),i=n(4892);r=a()?o:i,e.exports=r},1170:e=>{"use strict";var t="function"===typeof Float64Array?Float64Array:void 0;e.exports=t},4892:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},6461:(e,t,n)=>{"use strict";var r,a=n(9612),o=n(7842),i=n(6714);r=a()?o:i,e.exports=r},7842:e=>{"use strict";var t="function"===typeof Int16Array?Int16Array:void 0;e.exports=t},6714:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},8271:(e,t,n)=>{"use strict";var r,a=n(1758),o=n(4330),i=n(6020);r=a()?o:i,e.exports=r},4330:e=>{"use strict";var t="function"===typeof Int32Array?Int32Array:void 0;e.exports=t},6020:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},9518:(e,t,n)=>{"use strict";var r,a=n(3689),o=n(2049),i=n(3447);r=a()?o:i,e.exports=r},2049:e=>{"use strict";var t="function"===typeof Int8Array?Int8Array:void 0;e.exports=t},3447:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},1338:(e,t,n)=>{"use strict";var r=n(9518),a=n(9475),o=n(7720),i=n(6461),s=n(6990),l=n(8271),c=n(6532),u=n(3872),d=[[n(4023),"Float64Array"],[u,"Float32Array"],[l,"Int32Array"],[c,"Uint32Array"],[i,"Int16Array"],[s,"Uint16Array"],[r,"Int8Array"],[a,"Uint8Array"],[o,"Uint8ClampedArray"],[n(9705),"Complex64Array"],[n(200),"Complex128Array"]];e.exports=d},9573:(e,t,n)=>{"use strict";var r=n(6388);e.exports=r},6388:(e,t,n)=>{"use strict";var r=n(3107),a=n(8374),o=n(5506),i=n(3193),s=n(6132),l=n(4537);e.exports=function(e){var t,n,c;if(r(e))t=e;else{if(!a(e))throw new TypeError(s("invalid argument. Must provide a typed array. Value: `%s`.",e));t=8===e.BYTES_PER_ELEMENT?o(e,0):i(e,0)}for(n={type:l(e),data:[]},c=0;c<t.length;c++)n.data.push(t[c]);return n}},4537:(e,t,n)=>{"use strict";var r=n(6993),a=n(2793),o=n(9578),i=n(1338);e.exports=function(e){var t,n;for(n=0;n<i.length;n++)if(r(e,i[n][0]))return i[n][1];for(;e;){for(t=a(e),n=0;n<i.length;n++)if(t===i[n][1])return i[n][1];e=o(e)}}},6990:(e,t,n)=>{"use strict";var r,a=n(7945),o=n(1489),i=n(3719);r=a()?o:i,e.exports=r},1489:e=>{"use strict";var t="function"===typeof Uint16Array?Uint16Array:void 0;e.exports=t},3719:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},6532:(e,t,n)=>{"use strict";var r,a=n(6863),o=n(7019),i=n(9437);r=a()?o:i,e.exports=r},7019:e=>{"use strict";var t="function"===typeof Uint32Array?Uint32Array:void 0;e.exports=t},9437:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},9475:(e,t,n)=>{"use strict";var r,a=n(5954),o=n(7086),i=n(4336);r=a()?o:i,e.exports=r},7086:e=>{"use strict";var t="function"===typeof Uint8Array?Uint8Array:void 0;e.exports=t},4336:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},7720:(e,t,n)=>{"use strict";var r,a=n(3978),o=n(3391),i=n(1241);r=a()?o:i,e.exports=r},3391:e=>{"use strict";var t="function"===typeof Uint8ClampedArray?Uint8ClampedArray:void 0;e.exports=t},1241:e=>{"use strict";e.exports=function(){throw new Error("not implemented")}},9567:e=>{"use strict";var t="function"===typeof Float32Array?Float32Array:null;e.exports=t},3539:(e,t,n)=>{"use strict";var r=n(1534);e.exports=r},1534:(e,t,n)=>{"use strict";var r=n(2825),a=n(2857),o=n(9567);e.exports=function(){var e,t;if("function"!==typeof o)return!1;try{t=new o([1,3.14,-3.14,5e40]),e=r(t)&&1===t[0]&&3.140000104904175===t[1]&&-3.140000104904175===t[2]&&t[3]===a}catch(n){e=!1}return e}},5829:e=>{"use strict";var t="function"===typeof Float64Array?Float64Array:null;e.exports=t},7750:(e,t,n)=>{"use strict";var r=n(8265);e.exports=r},8265:(e,t,n)=>{"use strict";var r=n(9220),a=n(5829);e.exports=function(){var e,t;if("function"!==typeof a)return!1;try{t=new a([1,3.14,-3.14,NaN]),e=r(t)&&1===t[0]&&3.14===t[1]&&-3.14===t[2]&&t[3]!==t[3]}catch(n){e=!1}return e}},6745:e=>{"use strict";e.exports=function(){}},2357:(e,t,n)=>{"use strict";var r=n(9076);e.exports=r},9076:(e,t,n)=>{"use strict";var r=n(6745);e.exports=function(){return"foo"===r.name}},9612:(e,t,n)=>{"use strict";var r=n(1011);e.exports=r},953:e=>{"use strict";var t="function"===typeof Int16Array?Int16Array:null;e.exports=t},1011:(e,t,n)=>{"use strict";var r=n(7646),a=n(9530),o=n(380),i=n(953);e.exports=function(){var e,t;if("function"!==typeof i)return!1;try{t=new i([1,3.14,-3.14,a+1]),e=r(t)&&1===t[0]&&3===t[1]&&-3===t[2]&&t[3]===o}catch(n){e=!1}return e}},1758:(e,t,n)=>{"use strict";var r=n(5409);e.exports=r},6901:e=>{"use strict";var t="function"===typeof Int32Array?Int32Array:null;e.exports=t},5409:(e,t,n)=>{"use strict";var r=n(6668),a=n(780),o=n(2042),i=n(6901);e.exports=function(){var e,t;if("function"!==typeof i)return!1;try{t=new i([1,3.14,-3.14,a+1]),e=r(t)&&1===t[0]&&3===t[1]&&-3===t[2]&&t[3]===o}catch(n){e=!1}return e}},3689:(e,t,n)=>{"use strict";var r=n(1048);e.exports=r},8533:e=>{"use strict";var t="function"===typeof Int8Array?Int8Array:null;e.exports=t},1048:(e,t,n)=>{"use strict";var r=n(6195),a=n(3033),o=n(2403),i=n(8533);e.exports=function(){var e,t;if("function"!==typeof i)return!1;try{t=new i([1,3.14,-3.14,a+1]),e=r(t)&&1===t[0]&&3===t[1]&&-3===t[2]&&t[3]===o}catch(n){e=!1}return e}},7128:(e,t,n)=>{"use strict";var r=n(2703);e.exports=r},2703:(e,t,n)=>{"use strict";var r=n(7615),a=n(2490);e.exports=function(){return"function"===typeof a&&"symbol"===typeof a("foo")&&r(a,"iterator")&&"symbol"===typeof a.iterator}},7615:(e,t,n)=>{"use strict";var r=n(2010);e.exports=r},2010:e=>{"use strict";var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return void 0!==e&&null!==e&&t.call(e,n)}},1767:(e,t,n)=>{"use strict";var r=n(2322);e.exports=r},2322:e=>{"use strict";e.exports=function(){return"function"===typeof Symbol&&"symbol"===typeof Symbol("foo")}},9681:(e,t,n)=>{"use strict";var r=n(5376);e.exports=r},5376:(e,t,n)=>{"use strict";var r=n(1767)();e.exports=function(){return r&&"symbol"===typeof Symbol.toStringTag}},7945:(e,t,n)=>{"use strict";var r=n(7336);e.exports=r},7336:(e,t,n)=>{"use strict";var r=n(8563),a=n(2761),o=n(4845);e.exports=function(){var e,t;if("function"!==typeof o)return!1;try{t=new o(t=[1,3.14,-3.14,a+1,a+2]),e=r(t)&&1===t[0]&&3===t[1]&&t[2]===a-2&&0===t[3]&&1===t[4]}catch(n){e=!1}return e}},4845:e=>{"use strict";var t="function"===typeof Uint16Array?Uint16Array:null;e.exports=t},6863:(e,t,n)=>{"use strict";var r=n(6890);e.exports=r},6890:(e,t,n)=>{"use strict";var r=n(3973),a=n(3335),o=n(633);e.exports=function(){var e,t;if("function"!==typeof o)return!1;try{t=new o(t=[1,3.14,-3.14,a+1,a+2]),e=r(t)&&1===t[0]&&3===t[1]&&t[2]===a-2&&0===t[3]&&1===t[4]}catch(n){e=!1}return e}},633:e=>{"use strict";var t="function"===typeof Uint32Array?Uint32Array:null;e.exports=t},5954:(e,t,n)=>{"use strict";var r=n(5349);e.exports=r},5349:(e,t,n)=>{"use strict";var r=n(6424),a=n(4264),o=n(7869);e.exports=function(){var e,t;if("function"!==typeof o)return!1;try{t=new o(t=[1,3.14,-3.14,a+1,a+2]),e=r(t)&&1===t[0]&&3===t[1]&&t[2]===a-2&&0===t[3]&&1===t[4]}catch(n){e=!1}return e}},7869:e=>{"use strict";var t="function"===typeof Uint8Array?Uint8Array:null;e.exports=t},3978:(e,t,n)=>{"use strict";var r=n(3517);e.exports=r},3517:(e,t,n)=>{"use strict";var r=n(5336),a=n(541);e.exports=function(){var e,t;if("function"!==typeof a)return!1;try{t=new a([-1,0,1,3.14,4.99,255,256]),e=r(t)&&0===t[0]&&0===t[1]&&1===t[2]&&3===t[3]&&5===t[4]&&255===t[5]&&255===t[6]}catch(n){e=!1}return e}},541:e=>{"use strict";var t="function"===typeof Uint8ClampedArray?Uint8ClampedArray:null;e.exports=t},6993:(e,t,n)=>{"use strict";var r=n(2512);e.exports=r},2512:(e,t,n)=>{"use strict";var r=n(6132);e.exports=function(e,t){if("function"!==typeof t)throw new TypeError(r("invalid argument. Second argument must be callable. Value: `%s`.",t));return e instanceof t}},9568:(e,t,n)=>{"use strict";var r,a=n(994);r=function(){return a(arguments)}(),e.exports=r},6631:(e,t,n)=>{"use strict";var r,a=n(9568),o=n(994),i=n(2524);r=a?o:i,e.exports=r},994:(e,t,n)=>{"use strict";var r=n(9359);e.exports=function(e){return"[object Arguments]"===r(e)}},2524:(e,t,n)=>{"use strict";var r=n(7615),a=n(9767),o=n(258),i=n(872),s=n(3335);e.exports=function(e){return null!==e&&"object"===typeof e&&!o(e)&&"number"===typeof e.length&&i(e.length)&&e.length>=0&&e.length<=s&&r(e,"callee")&&!a(e,"callee")}},9014:(e,t,n)=>{"use strict";var r=n(4313);e.exports=r},4313:(e,t,n)=>{"use strict";var r=n(872),a=n(5680);e.exports=function(e){return"object"===typeof e&&null!==e&&"number"===typeof e.length&&r(e.length)&&e.length>=0&&e.length<=a}},258:(e,t,n)=>{"use strict";var r=n(8517);e.exports=r},8517:(e,t,n)=>{"use strict";var r,a=n(9359);r=Array.isArray?Array.isArray:function(e){return"[object Array]"===a(e)},e.exports=r},6312:(e,t,n)=>{"use strict";var r=n(3983);e.exports=r},3983:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof ArrayBuffer;e.exports=function(e){return a&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===r(e)}},5111:(e,t,n)=>{"use strict";var r=n(404),a=n(2194),o=n(2542),i=n(6488);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},2194:(e,t,n)=>{"use strict";var r=n(2542),a=n(6488);e.exports=function(e){return r(e)||a(e)}},6488:(e,t,n)=>{"use strict";var r=n(9681),a=n(9359),o=n(844),i=n(7810),s=r();e.exports=function(e){return"object"===typeof e&&(e instanceof o||(s?i(e):"[object Boolean]"===a(e)))}},2542:e=>{"use strict";e.exports=function(e){return"boolean"===typeof e}},3711:e=>{"use strict";var t=Boolean.prototype.toString;e.exports=t},7810:(e,t,n)=>{"use strict";var r=n(3711);e.exports=function(e){try{return r.call(e),!0}catch(t){return!1}}},971:(e,t,n)=>{"use strict";var r=n(8806);e.exports=r},8806:(e,t,n)=>{"use strict";var r=n(4242);e.exports=function(e){return r(e)&&(e._isBuffer||e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e))}},1317:(e,t,n)=>{"use strict";var r=n(8292);e.exports=r},8292:(e,t,n)=>{"use strict";var r=n(872),a=n(1747);e.exports=function(e){return"object"===typeof e&&null!==e&&"number"===typeof e.length&&r(e.length)&&e.length>=0&&e.length<=a}},1697:(e,t,n)=>{"use strict";var r=n(8480);e.exports=r},8480:(e,t,n)=>{"use strict";var r=n(2254),a=n(9341);e.exports=function(e){return e instanceof r||e instanceof a||"object"===typeof e&&null!==e&&"number"===typeof e.re&&"number"===typeof e.im}},6437:(e,t,n)=>{"use strict";var r=n(9705),a=[n(200),r];e.exports=a},8374:(e,t,n)=>{"use strict";var r=n(8281);e.exports=r},8281:(e,t,n)=>{"use strict";var r=n(2793),a=n(9578),o=n(6437),i=n(2722);e.exports=function(e){var t,n;if("object"!==typeof e||null===e)return!1;for(n=0;n<o.length;n++)if(e instanceof o[n])return!0;for(;e;){for(t=r(e),n=0;n<i.length;n++)if(i[n]===t)return!0;e=a(e)}return!1}},5053:(e,t,n)=>{"use strict";var r;r=!n(6484).call("beep","0"),e.exports=r},9767:(e,t,n)=>{"use strict";var r=n(8578);e.exports=r},8578:(e,t,n)=>{"use strict";var r=n(3408),a=n(830).isPrimitive,o=n(4689).isPrimitive,i=n(6484),s=n(5053);e.exports=function(e,t){var n;return void 0!==e&&null!==e&&(!(n=i.call(e,t))&&s&&r(e)?!a(t=+t)&&o(t)&&t>=0&&t<e.length:n)}},6484:e=>{"use strict";var t=Object.prototype.propertyIsEnumerable;e.exports=t},2825:(e,t,n)=>{"use strict";var r=n(3736);e.exports=r},3736:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Float32Array;e.exports=function(e){return a&&e instanceof Float32Array||"[object Float32Array]"===r(e)}},9220:(e,t,n)=>{"use strict";var r=n(27);e.exports=r},27:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Float64Array;e.exports=function(e){return a&&e instanceof Float64Array||"[object Float64Array]"===r(e)}},3629:(e,t,n)=>{"use strict";var r=n(8236);e.exports=r},8236:(e,t,n)=>{"use strict";var r=n(6253);e.exports=function(e){return"function"===r(e)}},7646:(e,t,n)=>{"use strict";var r=n(9905);e.exports=r},9905:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Int16Array;e.exports=function(e){return a&&e instanceof Int16Array||"[object Int16Array]"===r(e)}},6668:(e,t,n)=>{"use strict";var r=n(6259);e.exports=r},6259:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Int32Array;e.exports=function(e){return a&&e instanceof Int32Array||"[object Int32Array]"===r(e)}},6195:(e,t,n)=>{"use strict";var r=n(9870);e.exports=r},9870:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Int8Array;e.exports=function(e){return a&&e instanceof Int8Array||"[object Int8Array]"===r(e)}},4689:(e,t,n)=>{"use strict";var r=n(404),a=n(3360),o=n(7588),i=n(3674);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},7987:(e,t,n)=>{"use strict";var r=n(2857),a=n(8239),o=n(872);e.exports=function(e){return e<r&&e>a&&o(e)}},3360:(e,t,n)=>{"use strict";var r=n(7588),a=n(3674);e.exports=function(e){return r(e)||a(e)}},3674:(e,t,n)=>{"use strict";var r=n(2280).isObject,a=n(7987);e.exports=function(e){return r(e)&&a(e.valueOf())}},7588:(e,t,n)=>{"use strict";var r=n(2280).isPrimitive,a=n(7987);e.exports=function(e){return r(e)&&a(e)}},7536:(e,t,n)=>{"use strict";var r=n(9475),a={uint16:n(6990),uint8:r};e.exports=a},735:(e,t,n)=>{"use strict";var r=n(5498);e.exports=r},5498:(e,t,n)=>{"use strict";var r,a=n(7536);r=function(){var e;return(e=new a.uint16(1))[0]=4660,52===new a.uint8(e.buffer)[0]}(),e.exports=r},830:(e,t,n)=>{"use strict";var r=n(404),a=n(8625),o=n(8859),i=n(2131);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},8625:(e,t,n)=>{"use strict";var r=n(8859),a=n(2131);e.exports=function(e){return r(e)||a(e)}},2131:(e,t,n)=>{"use strict";var r=n(2280).isObject,a=n(6679);e.exports=function(e){return r(e)&&a(e.valueOf())}},8859:(e,t,n)=>{"use strict";var r=n(2280).isPrimitive,a=n(6679);e.exports=function(e){return r(e)&&a(e)}},5180:(e,t,n)=>{"use strict";var r=n(404),a=n(483),o=n(6605),i=n(6057);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},483:(e,t,n)=>{"use strict";var r=n(6605),a=n(6057);e.exports=function(e){return r(e)||a(e)}},6057:(e,t,n)=>{"use strict";var r=n(4689).isObject;e.exports=function(e){return r(e)&&e.valueOf()>=0}},6605:(e,t,n)=>{"use strict";var r=n(4689).isPrimitive;e.exports=function(e){return r(e)&&e>=0}},2280:(e,t,n)=>{"use strict";var r=n(404),a=n(223),o=n(1905),i=n(3117);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},223:(e,t,n)=>{"use strict";var r=n(1905),a=n(3117);e.exports=function(e){return r(e)||a(e)}},3117:(e,t,n)=>{"use strict";var r=n(9681),a=n(9359),o=n(2125),i=n(8253),s=r();e.exports=function(e){return"object"===typeof e&&(e instanceof o||(s?i(e):"[object Number]"===a(e)))}},1905:e=>{"use strict";e.exports=function(e){return"number"===typeof e}},3318:(e,t,n)=>{"use strict";var r=n(2125).prototype.toString;e.exports=r},8253:(e,t,n)=>{"use strict";var r=n(3318);e.exports=function(e){try{return r.call(e),!0}catch(t){return!1}}},4242:(e,t,n)=>{"use strict";var r=n(404),a=n(6188),o=n(7349);r(o,"isObjectLikeArray",a(o)),e.exports=o},7349:e=>{"use strict";e.exports=function(e){return null!==e&&"object"===typeof e}},4750:(e,t,n)=>{"use strict";var r=n(3633);e.exports=r},3633:(e,t,n)=>{"use strict";var r=n(258);e.exports=function(e){return"object"===typeof e&&null!==e&&!r(e)}},5417:(e,t,n)=>{"use strict";var r=n(1640);e.exports=r},1640:(e,t,n)=>{"use strict";var r=n(4750),a=n(3629),o=n(9578),i=n(7615),s=n(9359),l=Object.prototype;e.exports=function(e){var t;return!!r(e)&&(!(t=o(e))||!i(e,"constructor")&&i(t,"constructor")&&a(t.constructor)&&"[object Function]"===s(t.constructor)&&i(t,"isPrototypeOf")&&a(t.isPrototypeOf)&&(t===l||function(e){var t;for(t in e)if(!i(e,t))return!1;return!0}(e)))}},2001:(e,t,n)=>{"use strict";var r=n(404),a=n(7968),o=n(5460),i=n(810);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},7968:(e,t,n)=>{"use strict";var r=n(5460),a=n(810);e.exports=function(e){return r(e)||a(e)}},810:(e,t,n)=>{"use strict";var r=n(4689).isObject;e.exports=function(e){return r(e)&&e.valueOf()>0}},5460:(e,t,n)=>{"use strict";var r=n(4689).isPrimitive;e.exports=function(e){return r(e)&&e>0}},280:(e,t,n)=>{"use strict";var r=n(404),a=n(7775),o=n(4337),i=n(6109);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},7775:(e,t,n)=>{"use strict";var r=n(4337),a=n(6109);e.exports=function(e){return r(e)||a(e)}},6109:(e,t,n)=>{"use strict";var r=n(2280).isObject;e.exports=function(e){return r(e)&&e.valueOf()>0}},4337:(e,t,n)=>{"use strict";var r=n(2280).isPrimitive;e.exports=function(e){return r(e)&&e>0}},3408:(e,t,n)=>{"use strict";var r=n(404),a=n(6263),o=n(6473),i=n(3909);r(a,"isPrimitive",o),r(a,"isObject",i),e.exports=a},6263:(e,t,n)=>{"use strict";var r=n(6473),a=n(3909);e.exports=function(e){return r(e)||a(e)}},3909:(e,t,n)=>{"use strict";var r=n(9681),a=n(9359),o=n(1679),i=r();e.exports=function(e){return"object"===typeof e&&(e instanceof String||(i?o(e):"[object String]"===a(e)))}},6473:e=>{"use strict";e.exports=function(e){return"string"===typeof e}},1679:(e,t,n)=>{"use strict";var r=n(3960);e.exports=function(e){try{return r.call(e),!0}catch(t){return!1}}},3960:e=>{"use strict";var t=String.prototype.valueOf;e.exports=t},5580:(e,t,n)=>{"use strict";var r=n(9518),a=n(9475),o=n(7720),i=n(6461),s=n(6990),l=n(8271),c=n(6532),u=n(3872),d=[n(4023),u,l,c,i,s,r,a,o];e.exports=d},3107:(e,t,n)=>{"use strict";var r=n(4174);e.exports=r},4174:(e,t,n)=>{"use strict";var r=n(2793),a=n(5527),o=n(9578),i=n(7750),s=n(4023),l=n(5580),c=n(2447),u=i()?o(s):d;function d(){}u="TypedArray"===a(u)?u:d,e.exports=function(e){var t,n;if("object"!==typeof e||null===e)return!1;if(e instanceof u)return!0;for(n=0;n<l.length;n++)if(e instanceof l[n])return!0;for(;e;){for(t=r(e),n=0;n<c.length;n++)if(c[n]===t)return!0;e=o(e)}return!1}},8563:(e,t,n)=>{"use strict";var r=n(4590);e.exports=r},4590:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Uint16Array;e.exports=function(e){return a&&e instanceof Uint16Array||"[object Uint16Array]"===r(e)}},3973:(e,t,n)=>{"use strict";var r=n(9636);e.exports=r},9636:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Uint32Array;e.exports=function(e){return a&&e instanceof Uint32Array||"[object Uint32Array]"===r(e)}},6424:(e,t,n)=>{"use strict";var r=n(5231);e.exports=r},5231:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Uint8Array;e.exports=function(e){return a&&e instanceof Uint8Array||"[object Uint8Array]"===r(e)}},5336:(e,t,n)=>{"use strict";var r=n(9996);e.exports=r},9996:(e,t,n)=>{"use strict";var r=n(9359),a="function"===typeof Uint8ClampedArray;e.exports=function(e){return a&&e instanceof Uint8ClampedArray||"[object Uint8ClampedArray]"===r(e)}},6188:(e,t,n)=>{"use strict";var r=n(1907);e.exports=r},1907:(e,t,n)=>{"use strict";var r=n(258),a=n(6132);e.exports=function(e){if("function"!==typeof e)throw new TypeError(a("invalid argument. Must provide a function. Value: `%s`.",e));return function(t){var n,a;if(!r(t))return!1;if(0===(n=t.length))return!1;for(a=0;a<n;a++)if(!1===e(t[a]))return!1;return!0}}},6438:e=>{"use strict";e.exports=function(e,t,n,r,a,o,i){var s,l,c,u,d,f,h;for(s=t.data,l=a.data,u=t.accessors[0],c=a.accessors[1],d=r,f=i,h=0;h<e;h++)c(l,f,u(s,d)),d+=n,f+=o;return t}},870:(e,t,n)=>{"use strict";var r=n(404),a=n(4441);r(a,"ndarray",n(713)),e.exports=a},4441:(e,t,n)=>{"use strict";var r=n(2508),a=n(6438);e.exports=function(e,t,n,o,i){var s,l,c,u,d,f;if(e<=0)return o;if(c=r(t),u=r(o),c.accessorProtocol||u.accessorProtocol)return a(e,c,n,s=n<0?(1-e)*n:0,u,i,l=i<0?(1-e)*i:0),u.data;if(1===n&&1===i){if((d=e%8)>0)for(f=0;f<d;f++)o[f]=t[f];if(e<8)return o;for(f=d;f<e;f+=8)o[f]=t[f],o[f+1]=t[f+1],o[f+2]=t[f+2],o[f+3]=t[f+3],o[f+4]=t[f+4],o[f+5]=t[f+5],o[f+6]=t[f+6],o[f+7]=t[f+7];return o}for(s=n<0?(1-e)*n:0,l=i<0?(1-e)*i:0,f=0;f<e;f++)o[l]=t[s],s+=n,l+=i;return o}},713:(e,t,n)=>{"use strict";var r=n(2508),a=n(6438);e.exports=function(e,t,n,o,i,s,l){var c,u,d,f,h,p;if(e<=0)return i;if(d=r(t),f=r(i),d.accessorProtocol||f.accessorProtocol)return a(e,d,n,o,f,s,l),f.data;if(c=o,u=l,1===n&&1===s){if((h=e%8)>0)for(p=0;p<h;p++)i[u]=t[c],c+=n,u+=s;if(e<8)return i;for(p=h;p<e;p+=8)i[u]=t[c],i[u+1]=t[c+1],i[u+2]=t[c+2],i[u+3]=t[c+3],i[u+4]=t[c+4],i[u+5]=t[c+5],i[u+6]=t[c+6],i[u+7]=t[c+7],c+=8,u+=8;return i}for(p=0;p<e;p++)i[u]=t[c],c+=n,u+=s;return i}},844:(e,t,n)=>{"use strict";var r=n(9347);e.exports=r},9347:e=>{"use strict";var t=Boolean;e.exports=t},9341:(e,t,n)=>{"use strict";var r=n(3372);e.exports=r},3372:(e,t,n)=>{"use strict";var r=n(2280).isPrimitive,a=n(9872),o=n(404),i=n(3887),s=n(6132),l=n(7345),c=n(5810);function u(e,t){if(!(this instanceof u))throw new TypeError("invalid invocation. Constructor must be called with the `new` keyword.");if(!r(e))throw new TypeError(s("invalid argument. Real component must be a number. Value: `%s`.",e));if(!r(t))throw new TypeError(s("invalid argument. Imaginary component must be a number. Value: `%s`.",t));return a(this,"re",{configurable:!1,enumerable:!0,writable:!1,value:i(e)}),a(this,"im",{configurable:!1,enumerable:!0,writable:!1,value:i(t)}),this}o(u,"BYTES_PER_ELEMENT",4),o(u.prototype,"BYTES_PER_ELEMENT",4),o(u.prototype,"byteLength",8),o(u.prototype,"toString",l),o(u.prototype,"toJSON",c),e.exports=u},5810:e=>{"use strict";e.exports=function(){var e={type:"Complex64"};return e.re=this.re,e.im=this.im,e}},7345:e=>{"use strict";e.exports=function(){var e=""+this.re;return this.im<0?e+=" - "+-this.im:e+=" + "+this.im,e+="i"}},2254:(e,t,n)=>{"use strict";var r=n(4737);e.exports=r},4737:(e,t,n)=>{"use strict";var r=n(2280).isPrimitive,a=n(9872),o=n(404),i=n(6132),s=n(7736),l=n(2019);function c(e,t){if(!(this instanceof c))throw new TypeError("invalid invocation. Constructor must be called with the `new` keyword.");if(!r(e))throw new TypeError(i("invalid argument. Real component must be a number. Value: `%s`.",e));if(!r(t))throw new TypeError(i("invalid argument. Imaginary component must be a number. Value: `%s`.",t));return a(this,"re",{configurable:!1,enumerable:!0,writable:!1,value:e}),a(this,"im",{configurable:!1,enumerable:!0,writable:!1,value:t}),this}o(c,"BYTES_PER_ELEMENT",8),o(c.prototype,"BYTES_PER_ELEMENT",8),o(c.prototype,"byteLength",16),o(c.prototype,"toString",s),o(c.prototype,"toJSON",l),e.exports=c},2019:e=>{"use strict";e.exports=function(){var e={type:"Complex128"};return e.re=this.re,e.im=this.im,e}},7736:e=>{"use strict";e.exports=function(){var e=""+this.re;return this.im<0?e+=" - "+-this.im:e+=" + "+this.im,e+="i"}},7400:(e,t,n)=>{"use strict";var r=n(4015);e.exports=r},4015:e=>{"use strict";e.exports=function(e){return e.im}},3494:(e,t,n)=>{"use strict";var r=n(6678);e.exports=r},6678:e=>{"use strict";e.exports=function(e){return e.im}},1886:(e,t,n)=>{"use strict";var r=n(7537);e.exports=r},7537:e=>{"use strict";e.exports=function(e){return e.re}},8212:(e,t,n)=>{"use strict";var r=n(2955);e.exports=r},2955:e=>{"use strict";e.exports=function(e){return e.re}},5680:e=>{"use strict";e.exports=4294967295},1747:e=>{"use strict";e.exports=9007199254740991},5129:e=>{"use strict";e.exports=1023},1955:e=>{"use strict";e.exports=2147483647},8666:e=>{"use strict";e.exports=2146435072},4004:e=>{"use strict";e.exports=2147483648},1850:e=>{"use strict";e.exports=1048575},2587:e=>{"use strict";e.exports=.6931471805599453},5748:e=>{"use strict";e.exports=-1023},1384:e=>{"use strict";e.exports=1023},3285:e=>{"use strict";e.exports=9007199254740991},3210:e=>{"use strict";e.exports=-1074},8239:(e,t,n)=>{"use strict";var r=n(2125).NEGATIVE_INFINITY;e.exports=r},2857:e=>{"use strict";var t=Number.POSITIVE_INFINITY;e.exports=t},7013:e=>{"use strict";e.exports=22250738585072014e-324},9530:e=>{"use strict";e.exports=32767},380:e=>{"use strict";e.exports=-32768},780:e=>{"use strict";e.exports=2147483647},2042:e=>{"use strict";e.exports=-2147483648},3033:e=>{"use strict";e.exports=127},2403:e=>{"use strict";e.exports=-128},2761:e=>{"use strict";e.exports=65535},3335:e=>{"use strict";e.exports=4294967295},4264:e=>{"use strict";e.exports=255},6246:(e,t,n)=>{"use strict";var r=n(9897);e.exports=r},9897:(e,t,n)=>{"use strict";var r=n(872);e.exports=function(e){return r(e/2)}},7182:(e,t,n)=>{"use strict";var r=n(2801);e.exports=r},2801:(e,t,n)=>{"use strict";var r=n(2857),a=n(8239);e.exports=function(e){return e===r||e===a}},872:(e,t,n)=>{"use strict";var r=n(2927);e.exports=r},2927:(e,t,n)=>{"use strict";var r=n(7730);e.exports=function(e){return r(e)===e}},6679:(e,t,n)=>{"use strict";var r=n(7970);e.exports=r},7970:e=>{"use strict";e.exports=function(e){return e!==e}},411:(e,t,n)=>{"use strict";var r=n(8694);e.exports=r},8694:(e,t,n)=>{"use strict";var r=n(6246);e.exports=function(e){return r(e>0?e-1:e+1)}},5542:(e,t,n)=>{"use strict";var r=n(5737);e.exports=r},5737:(e,t,n)=>{"use strict";var r=n(2857);e.exports=function(e){return 0===e&&1/e===r}},5350:(e,t,n)=>{"use strict";var r=n(4297);e.exports=r},4297:e=>{"use strict";e.exports=function(e,t){var n,r;return((n=(65535&(e>>>=0))>>>0)*(r=(65535&(t>>>=0))>>>0)>>>0)+((e>>>16>>>0)*r+n*(t>>>16>>>0)<<16>>>0)>>>0}},2712:(e,t,n)=>{"use strict";var r=n(5023);e.exports=r},5023:e=>{"use strict";e.exports=function(e){return Math.abs(e)}},4037:(e,t,n)=>{"use strict";var r=n(8932);e.exports=r},8932:e=>{"use strict";var t=Math.ceil;e.exports=t},940:(e,t,n)=>{"use strict";var r=n(2243);e.exports=r},2243:(e,t,n)=>{"use strict";var r=n(4004),a=n(1955),o=n(2105),i=n(4126),s=n(6056),l=[0,0];e.exports=function(e,t){var n,c;return o.assign(e,l,1,0),n=l[0],n&=a,c=i(t),s(n|=c&=r,l[1])}},331:(e,t,n)=>{"use strict";var r=n(1127),a=n(7713);e.exports=function(e,t,n){var o,i,s;return s=(o=e-t)-(i=o*o)*a(i),r(1-(t-o*s/(2-s)-e),n)}},375:(e,t,n)=>{"use strict";var r=n(4466);e.exports=r},4466:(e,t,n)=>{"use strict";var r=n(6679),a=n(7882),o=n(8239),i=n(2857),s=n(331),l=1.4426950408889634,c=1/(1<<28),u=-c;e.exports=function(e){var t;return r(e)||e===i?e:e===o?0:e>709.782712893384?i:e<-745.1332191019411?0:e>u&&e<c?1+e:(t=a(e<0?l*e-.5:l*e+.5),s(e-.6931471803691238*t,1.9082149292705877e-10*t,t))}},7713:e=>{"use strict";e.exports=function(e){return 0===e?.16666666666666602:.16666666666666602+e*(e*(6613756321437934e-20+e*(4.1381367970572385e-8*e-16533902205465252e-22))-.0027777777777015593)}},7730:(e,t,n)=>{"use strict";var r=n(8885);e.exports=r},8885:e=>{"use strict";var t=Math.floor;e.exports=t},1127:(e,t,n)=>{"use strict";var r=n(3266);e.exports=r},3266:(e,t,n)=>{"use strict";var r=n(2857),a=n(8239),o=n(5129),i=n(1384),s=n(5748),l=n(3210),c=n(6679),u=n(7182),d=n(940),f=n(99).assign,h=n(3015),p=n(2105),m=n(6056),g=[0,0],v=[0,0];e.exports=function(e,t){var n,y;return 0===t||0===e||c(e)||u(e)?e:(f(e,g,1,0),t+=g[1],(t+=h(e=g[0]))<l?d(0,e):t>i?e<0?a:r:(t<=s?(t+=52,y=2220446049250313e-31):y=1,p.assign(e,v,1,0),n=v[0],n&=2148532223,y*m(n|=t+o<<20,v[1])))}},2522:(e,t,n)=>{"use strict";var r=n(9117);e.exports=r},9117:(e,t,n)=>{"use strict";var r=n(4126),a=n(730),o=n(6679),i=n(5129),s=n(8239),l=n(3908),c=n(1851),u=.6931471803691238,d=1.9082149292705877e-10,f=1048575;e.exports=function(e){var t,n,h,p,m,g,v,y,b,w,x;return 0===e?s:o(e)||e<0?NaN:(p=0,(n=r(e))<1048576&&(p-=54,n=r(e*=0x40000000000000)),n>=2146435072?e+e:(p+=(n>>20)-i|0,p+=(v=(n&=f)+614244&1048576)>>20,g=(e=a(e,n|1072693248^v))-1,(f&2+n)<3?0===g?0===p?0:p*u+p*d:(m=g*g*(.5-.3333333333333333*g),0===p?g-m:p*u-(m-p*d-g)):(v=n-398458|0,y=440401-n|0,h=(w=(x=(b=g/(2+g))*b)*x)*l(w),m=x*c(w)+h,(v|=y)>0?(t=.5*g*g,0===p?g-(t-b*(t+m)):p*u-(t-(b*(t+m)+p*d)-g)):0===p?g-b*(g-m):p*u-(b*(g-m)-p*d-g))))}},3908:e=>{"use strict";e.exports=function(e){return 0===e?.3999999999940942:.3999999999940942+e*(.22222198432149784+.15313837699209373*e)}},1851:e=>{"use strict";e.exports=function(e){return 0===e?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+.14798198605116586*e))}},6666:(e,t,n)=>{"use strict";var r=n(1885);e.exports=r},1885:(e,t,n)=>{"use strict";var r=n(5542),a=n(6679),o=n(2857);e.exports=function(e,t){return a(e)||a(t)?NaN:e===o||t===o?o:e===t&&0===e?r(e)?e:t:e>t?e:t}},3898:(e,t,n)=>{"use strict";var r=n(189);e.exports=r},4173:(e,t,n)=>{"use strict";var r=n(4126),a=n(4422),o=n(730),i=n(5129),s=n(2448),l=1048576,c=[1,1.5],u=[0,.5849624872207642],d=[0,1.350039202129749e-8];e.exports=function(e,t,n){var f,h,p,m,g,v,y,b,w,x,S,_,E,R,O,k,C,A,L,T;return A=0,n<l&&(A-=53,n=r(t*=9007199254740992)),A+=(n>>20)-i|0,n=1072693248|(L=1048575&n),L<=235662?T=0:L<767610?T=1:(T=0,A+=1,n-=l),f=524288+(n>>1|536870912),g=(C=1/((t=o(t,n))+(y=c[T])))*((k=t-y)-(m=a(h=k*C,0))*(v=o(0,f+=T<<18))-m*(t-(v-y))),O=(p=h*h)*p*s(p),v=a(v=3+(p=m*m)+(O+=g*(m+h)),0),E=(S=-7.028461650952758e-9*(w=a(w=(k=m*v)+(C=g*v+(O-(v-3-p))*h),0))+.9617966939259756*(C-(w-k))+d[T])-((_=a(_=(x=.9617967009544373*w)+S+(b=u[T])+(R=A),0))-R-b-x),e[0]=_,e[1]=E,e}},4490:(e,t,n)=>{"use strict";var r=n(4422),a=n(6049);e.exports=function(e,t){var n,o,i,s,l;return n=(l=1.9259629911266175e-8*(i=t-1)-1.4426950408889634*(i*i*a(i)))-((o=r(o=(s=1.4426950216293335*i)+l,0))-s),e[0]=o,e[1]=n,e}},189:(e,t,n)=>{"use strict";var r=n(6679),a=n(411),o=n(7182),i=n(872),s=n(2314),l=n(2712),c=n(2105),u=n(4422),d=n(5163),f=n(8239),h=n(2857),p=n(1955),m=n(6950),g=n(9788),v=n(1167),y=n(4173),b=n(4490),w=n(4383),x=1083179008,S=1e300,_=1e-300,E=[0,0],R=[0,0];e.exports=function e(t,n){var O,k,C,A,L,T,M,I,P,j,F,N,D,B;if(r(t)||r(n))return NaN;if(c.assign(n,E,1,0),L=E[0],0===E[1]){if(0===n)return 1;if(1===n)return t;if(-1===n)return 1/t;if(.5===n)return s(t);if(-.5===n)return 1/s(t);if(2===n)return t*t;if(3===n)return t*t*t;if(4===n)return(t*=t)*t;if(o(n))return v(t,n)}if(c.assign(t,E,1,0),A=E[0],0===E[1]){if(0===A)return m(t,n);if(1===t)return 1;if(-1===t&&a(n))return-1;if(o(t))return t===f?e(-0,-n):n<0?0:h}if(t<0&&!1===i(n))return(t-t)/(t-t);if(C=l(t),O=A&p,k=L&p,M=L>>>31|0,T=(T=A>>>31|0)&&a(n)?-1:1,k>1105199104){if(k>1139802112)return g(t,n);if(O<1072693247)return 1===M?T*S*S:T*_*_;if(O>1072693248)return 0===M?T*S*S:T*_*_;F=b(R,C)}else F=y(R,C,O);if(N=(j=(n-(I=u(n,0)))*F[0]+n*F[1])+(P=I*F[0]),c.assign(N,E,1,0),D=d(E[0]),B=d(E[1]),D>=x){if(0!==(D-x|B))return T*S*S;if(j+8008566259537294e-32>N-P)return T*S*S}else if((D&p)>=1083231232){if(0!==(D-3230714880|B))return T*_*_;if(j<=N-P)return T*_*_}return T*(N=w(D,P,j))}},2448:e=>{"use strict";e.exports=function(e){return 0===e?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+.20697501780033842*e))))}},1748:e=>{"use strict";e.exports=function(e){return 0===e?.16666666666666602:.16666666666666602+e*(e*(6613756321437934e-20+e*(4.1381367970572385e-8*e-16533902205465252e-22))-.0027777777777015593)}},6049:e=>{"use strict";e.exports=function(e){return 0===e?.5:.5+e*(.25*e-.3333333333333333)}},4383:(e,t,n)=>{"use strict";var r=n(4126),a=n(730),o=n(4422),i=n(5163),s=n(1127),l=n(2587),c=n(5129),u=n(1955),d=n(1850),f=n(1748),h=1048576;e.exports=function(e,t,n){var p,m,g,v,y,b,w,x,S;return S=((x=e&u)>>20)-c|0,w=0,x>1071644672&&(m=a(0,((w=e+(h>>S+1)>>>0)&~(d>>(S=((w&u)>>20)-c|0)))>>>0),w=(w&d|h)>>20-S>>>0,e<0&&(w=-w),t-=m),y=(v=(n-((m=o(m=n+t,0))-t))*l+-1.904654299957768e-9*m)-((b=(g=.6931471824645996*m)+v)-g),p=b-(m=b*b)*f(m),e=r(b=1-(b*p/(p-2)-(y+b*y)-b)),e=i(e),b=(e+=w<<20>>>0)>>20<=0?s(b,w):a(b,e)}},6950:(e,t,n)=>{"use strict";var r=n(411),a=n(940),o=n(8239),i=n(2857);e.exports=function(e,t){return t===o?i:t===i?0:t>0?r(t)?e:0:r(t)?a(i,e):i}},9788:(e,t,n)=>{"use strict";var r=n(1955),a=n(4126);e.exports=function(e,t){return(a(e)&r)<=1072693247?t<0?1/0:0:t>0?1/0:0}},1167:(e,t,n)=>{"use strict";var r=n(2712),a=n(2857);e.exports=function(e,t){return-1===e?(e-e)/(e-e):1===e?1:r(e)<1===(t===a)?0:a}},2314:(e,t,n)=>{"use strict";var r=n(4557);e.exports=r},4557:e=>{"use strict";var t=Math.sqrt;e.exports=t},7882:(e,t,n)=>{"use strict";var r=n(7917);e.exports=r},7917:(e,t,n)=>{"use strict";var r=n(7730),a=n(4037);e.exports=function(e){return e<0?a(e):r(e)}},2125:(e,t,n)=>{"use strict";var r=n(8828);e.exports=r},8828:e=>{"use strict";e.exports=Number},3015:(e,t,n)=>{"use strict";var r=n(3186);e.exports=r},3186:(e,t,n)=>{"use strict";var r=n(4126),a=n(8666),o=n(5129);e.exports=function(e){var t=r(e);return(t=(t&a)>>>20)-o|0}},6056:(e,t,n)=>{"use strict";var r=n(9887);e.exports=r},4381:(e,t,n)=>{"use strict";var r,a,o;!0===n(735)?(a=1,o=0):(a=0,o=1),r={HIGH:a,LOW:o},e.exports=r},9887:(e,t,n)=>{"use strict";var r=n(6532),a=n(4023),o=n(4381),i=new a(1),s=new r(i.buffer),l=o.HIGH,c=o.LOW;e.exports=function(e,t){return s[l]=e,s[c]=t,i[0]}},9176:(e,t,n)=>{"use strict";var r;r=!0===n(735)?1:0,e.exports=r},4126:(e,t,n)=>{"use strict";var r=n(3281);e.exports=r},3281:(e,t,n)=>{"use strict";var r=n(6532),a=n(4023),o=n(9176),i=new a(1),s=new r(i.buffer);e.exports=function(e){return i[0]=e,s[o]}},5050:(e,t,n)=>{"use strict";var r=n(7013),a=n(7182),o=n(6679),i=n(2712);e.exports=function(e,t,n,s){return o(e)||a(e)?(t[s]=e,t[s+n]=0,t):0!==e&&i(e)<r?(t[s]=4503599627370496*e,t[s+n]=-52,t):(t[s]=e,t[s+n]=0,t)}},99:(e,t,n)=>{"use strict";var r=n(404),a=n(1966);r(a,"assign",n(5050)),e.exports=a},1966:(e,t,n)=>{"use strict";var r=n(5050);e.exports=function(e){return r(e,[0,0],1,0)}},6588:(e,t,n)=>{"use strict";var r;r=!0===n(735)?1:0,e.exports=r},730:(e,t,n)=>{"use strict";var r=n(6157);e.exports=r},6157:(e,t,n)=>{"use strict";var r=n(6532),a=n(4023),o=n(6588),i=new a(1),s=new r(i.buffer);e.exports=function(e,t){return i[0]=e,s[o]=t>>>0,i[0]}},4422:(e,t,n)=>{"use strict";var r=n(233);e.exports=r},6636:(e,t,n)=>{"use strict";var r;r=!0===n(735)?0:1,e.exports=r},233:(e,t,n)=>{"use strict";var r=n(6532),a=n(4023),o=n(6636),i=new a(1),s=new r(i.buffer);e.exports=function(e,t){return i[0]=e,s[o]=t>>>0,i[0]}},3887:(e,t,n)=>{"use strict";var r,a=n(7002),o=n(9284);r="function"===typeof a?a:o,e.exports=r},7002:e=>{"use strict";var t="function"===typeof Math.fround?Math.fround:null;e.exports=t},9284:(e,t,n)=>{"use strict";var r=new(n(3872))(1);e.exports=function(e){return r[0]=e,r[0]}},6248:(e,t,n)=>{"use strict";var r=n(6532),a=n(4023),o=n(4316),i=new a(1),s=new r(i.buffer),l=o.HIGH,c=o.LOW;e.exports=function(e,t,n,r){return i[0]=e,t[r]=s[l],t[r+n]=s[c],t}},2105:(e,t,n)=>{"use strict";var r=n(404),a=n(9592);r(a,"assign",n(6248)),e.exports=a},4316:(e,t,n)=>{"use strict";var r,a,o;!0===n(735)?(a=1,o=0):(a=0,o=1),r={HIGH:a,LOW:o},e.exports=r},9592:(e,t,n)=>{"use strict";var r=n(6248);e.exports=function(e){return r(e,[0,0],1,0)}},5163:(e,t,n)=>{"use strict";var r=n(5798);e.exports=r},5798:e=>{"use strict";e.exports=function(e){return 0|e}},3815:e=>{"use strict";var t=Object.assign;e.exports=t},4374:(e,t,n)=>{"use strict";var r=n(3629)(Object.assign);e.exports=r},8832:(e,t,n)=>{"use strict";var r,a=n(4374),o=n(3815),i=n(5457);r=a?o:i,e.exports=r},5457:(e,t,n)=>{"use strict";var r=n(167),a=n(2107),o=n(6132);e.exports=function(e){var t,n,i,s,l,c,u;if(void 0===e||null===e)throw new TypeError(o("invalid argument. First argument must be a non-null object. Value: `%s`.",e));for(l=a(e),c=1;c<arguments.length;c++)if(void 0!==(t=arguments[c])&&null!==t)for(s=(n=r(a(t))).length,u=0;u<s;u++)l[i=n[u]]=t[i];return l}},2107:(e,t,n)=>{"use strict";var r=n(8502);e.exports=r},8502:e=>{"use strict";var t=Object;e.exports=t},5115:(e,t,n)=>{"use strict";var r=n(7586),a=n(5068),o=n(2021),i=n(1302);e.exports=function(e,t,n,s){var l;return n===s&&n>1.5?a(e,t,n):n>1&&s>1?o(e,t,n,s):n<1&&s<1?i(e,n,s):(l=r(e,t,n))/(l+r(e,t,s))}},4951:(e,t,n)=>{"use strict";var r=n(404),a=n(9274),o=n(9333),i=n(5417),s=n(5111).isPrimitive,l=n(3629),c=n(7615),u=n(2672),d=n(7521),f=n(7379).factory,h=n(9121).factory,p=n(6679),m=n(870),g=n(6532),v=n(3973),y=n(8832),b=n(9573),w=n(6132),x=n(2383),S=n(5115);e.exports=function(){var e,t,n,_,E,R,O,k,C;if(k=!0,0===arguments.length)R=h(E={copy:!1});else if(1===arguments.length){if(!i(E=arguments[0]))throw new TypeError(w("invalid argument. Options argument must be an object. Value: `%s`.",E));if(c(E,"copy")&&!s(E.copy))throw new TypeError(w("invalid option. `%s` option must be a boolean. Option: `%s`.","copy",E.copy));if(c(E,"prng")){if(!l(E.prng))throw new TypeError(w("invalid option. `%s` option must be a pseudorandom number generator function. Option: `%s`.","prng",E.prng));R=E.prng}else{if(c(E,"state")&&!v(E.state))throw new TypeError(w("invalid option. `%s` option must be a Uint32Array. Option: `%s`.","state",E.state));!1===(E=y({},E)).copy?k=!1:E.state&&(E.state=m(E.state.length,E.state,1,new g(E.state.length),1)),E.copy=!1,R=h(E)}}else{if(C=x(n=arguments[0],_=arguments[1]))throw C;if(arguments.length>2){if(!i(E=arguments[2]))throw new TypeError(w("invalid argument. Options argument must be an object. Value: `%s`.",E));if(c(E,"copy")&&!s(E.copy))throw new TypeError(w("invalid option. `%s` option must be a boolean. Option: `%s`.","copy",E.copy));if(c(E,"prng")){if(!l(E.prng))throw new TypeError(w("invalid option. `%s` option must be a pseudorandom number generator function. Option: `%s`.","prng",E.prng));R=E.prng}else{if(c(E,"state")&&!v(E.state))throw new TypeError(w("invalid option. `%s` option must be a Uint32Array. Option: `%s`.","state",E.state));!1===(E=y({},E)).copy?k=!1:E.state&&(E.state=m(E.state.length,E.state,1,new g(E.state.length),1)),E.copy=!1,R=h(E)}}else R=h(E={copy:!1})}return E&&E.prng?t=f({prng:E.prng}):(E.state?e=E.state:(e=R.state,R.state=e),t=f({state:e,copy:!1})),r(O=void 0===n?function(e,n){if(p(e)||p(n)||e<=0||n<=0)return NaN;return S(R,t,e,n)}:function(){return S(R,t,n,_)},"NAME","beta"),E&&E.prng?(r(O,"seed",null),r(O,"seedLength",null),o(O,"state",u(null),d),r(O,"stateLength",null),r(O,"byteLength",null),r(O,"toJSON",u(null)),r(O,"PRNG",R)):(a(O,"seed",(function(){return R.seed})),a(O,"seedLength",(function(){return R.seedLength})),o(O,"state",(function(){return R.state}),(function(e){if(!v(e))throw new TypeError(w("invalid argument. Must provide a Uint32Array. Value: `%s`.",e));k&&(e=m(e.length,e,1,new g(e.length),1));R.state=e})),a(O,"stateLength",(function(){return R.stateLength})),a(O,"byteLength",(function(){return R.byteLength})),r(O,"toJSON",(function(){var e={type:"PRNG"};e.name=O.NAME,e.state=b(R.state),e.params=void 0===n?[]:[n,_];return e})),r(O,"PRNG",R),R=R.normalized),O}},3789:(e,t,n)=>{"use strict";var r=n(404),a=n(9516);r(a,"factory",n(4951)),e.exports=a},9516:(e,t,n)=>{"use strict";var r=n(4951)();e.exports=r},5068:(e,t,n)=>{"use strict";var r=n(3898),a=n(2522);e.exports=function(e,t,n){var o,i,s,l,c,u,d,f;for(c=r((s=n-1)+s,.5),o=!0;!0===o;)(d=.5*(1+(l=t())/c))>=0&&d<=1&&((u=e())<=(f=1-(i=r(l,4))/(f=8*n-12))?o=!1:u<(f+=.5*r(i/(8*n-8),2))&&(f=s*a(4*d*(1-d)),(f+=l*l/2)>=a(u)&&(o=!1)));return d}},2021:(e,t,n)=>{"use strict";var r=n(3898),a=n(2522);e.exports=function(e,t,n,o){var i,s,l,c,u,d,f,h,p,m,g;for(f=(d=(c=n-1)+(u=o-1))*a(d),l=c/d,i=.5/r(d,.5),s=!0;!0===s;)(m=l+(h=t())*i)>=0&&m<=1&&(p=e(),g=c*a(m/c),g+=u*a((1-m)/u),(g+=f+.5*h*h)>=a(p)&&(s=!1));return m}},1302:(e,t,n)=>{"use strict";var r=n(375),a=n(3898),o=n(2522);e.exports=function(e,t,n){for(var i,s,l,c,u,d;;)if(c=e(),u=e(),(l=(d=a(c,1/t))+a(u,1/n))<=1)return l>0?d/l:((i=o(c)/t)>(s=o(u)/n)?(s-=i,i=0):(i-=s,s=0),r(i-o(r(i)+r(s))))}},7586:(e,t,n)=>{"use strict";var r=n(2522),a=n(2314),o=n(3898),i=1/3;e.exports=function(e,t,n){var s,l,c,u,d,f,h,p,m,g;for(n<1?(d=1/a(9*(f=n+1-i)),p=o(e(),1/n)):(d=1/a(9*(f=n-i)),p=1),s=!0;s;){do{g=1+d*(h=t())}while(g<=0);c=1-.331*(l=h*h)*l,u=.5*l+f*(1-(g*=g*g)+r(g)),((m=e())<c||r(m)<u)&&(s=!1)}return f*g*p}},2383:(e,t,n)=>{"use strict";var r=n(280).isPrimitive,a=n(6132);e.exports=function(e,t){return r(e)?r(t)?null:new TypeError(a("invalid argument. Second argument must be a positive number. Value: `%s`.",t)):new TypeError(a("invalid argument. First argument must be a positive number. Value: `%s`.",e))}},911:(e,t,n)=>{"use strict";var r=n(2314),a=n(375),o=n(2522),i=.00991256303526217;e.exports=function(e,t){var n,s,l;for(s=a(-.5*t*t),(n=[]).push(i/s),n.push(t),l=2;l<e;l++)n[l]=r(-2*o(i/n[l-1]+s)),s=a(-.5*n[l]*n[l]);return n.push(0),n}},5833:(e,t,n)=>{"use strict";var r=n(404),a=n(9274),o=n(9333),i=n(3629),s=n(5417),l=n(5111).isPrimitive,c=n(7615),u=n(3973),d=n(9121).factory,f=n(2672),h=n(7521),p=n(7730),m=n(3335),g=n(9573),v=n(6132),y=n(3363);e.exports=function(e){var t,n,b,w;if(w={copy:!0},arguments.length){if(!s(e))throw new TypeError(v("invalid argument. Must provide an object. Value: `%s`.",e));if(c(e,"copy")&&(w.copy=e.copy,!l(e.copy)))throw new TypeError(v("invalid option. `%s` option must be a boolean. Option: `%s`.","copy",e.copy));if(c(e,"prng")){if(!i(e.prng))throw new TypeError(v("invalid option. `%s` option must be a pseudorandom number generator function. Option: `%s`.","prng",e.prng));t=e.prng}else if(c(e,"state")){if(w.state=e.state,!u(e.state))throw new TypeError(v("invalid option. `%s` option must be a Uint32Array. Option: `%s`.","state",e.state))}else if(c(e,"seed")&&(w.seed=e.seed,void 0===e.seed))throw new TypeError(v("invalid option. `%s` option must be either a positive integer less than or equal to the maximum unsigned 32-bit integer or an array-like object containing integer values less than or equal to the maximum unsigned 32-bit integer. Option: `%s`.","seed",e.seed))}return void 0===w.state?void 0===t?t=(n=d(w)).normalized:(n=d({seed:p(1+m*t()),copy:w.copy}),w.seed=null):t=(n=d(w)).normalized,b=y(t,n),r(b,"NAME","improved-ziggurat"),null===w.seed?(r(b,"seed",null),r(b,"seedLength",null)):(a(b,"seed",(function(){return n.seed})),a(b,"seedLength",(function(){return n.seedLength}))),e&&e.prng?(o(b,"state",f(null),h),r(b,"stateLength",null),r(b,"byteLength",null),r(b,"toJSON",f(null))):(o(b,"state",(function(){return n.state}),(function(e){n.state=e})),a(b,"stateLength",(function(){return n.stateLength})),a(b,"byteLength",(function(){return n.byteLength})),r(b,"toJSON",(function(){var e={type:"PRNG"};return e.name=b.NAME,e.state=g(n.state),e.params=[],e}))),r(b,"PRNG",t),b}},3363:(e,t,n)=>{"use strict";var r=n(2712),a=n(375),o=n(911),i=n(7170),s=n(5590),l=3.442619855899,c=o(128,l),u=i(c);e.exports=function(e,t){return function(){var n,o,i,d,f,h,p;for(;;){if(f=2*e()-1,h=127&t(),r(f)<u[h])return f*c[h];if(0===h)return s(e,l,f<0);if(i=(d=f*c[h])*d,p=h+1,n=a(-.5*(c[h]*c[h]-i)),(o=a(-.5*(c[p]*c[p]-i)))+e()*(n-o)<1)return d}}}},7379:(e,t,n)=>{"use strict";var r=n(404),a=n(6302);r(a,"factory",n(5833)),e.exports=a},6302:(e,t,n)=>{"use strict";var r=n(5833)();e.exports=r},7170:e=>{"use strict";e.exports=function(e){var t,n;for(t=[],n=0;n<e.length-1;n++)t.push(e[n+1]/e[n]);return t}},5590:(e,t,n)=>{"use strict";var r=n(2522);e.exports=function(e,t,n){var a,o;do{a=r(e())/t,o=r(e())}while(-2*o<a*a);return n?a-t:t-a}},1867:(e,t,n)=>{"use strict";var r=n(404),a=n(9274),o=n(9333),i=n(7615),s=n(5417),l=n(1317),c=n(3973),u=n(5111).isPrimitive,d=n(2001).isPrimitive,f=n(3285),h=n(3335),p=n(6532),m=n(6666),g=n(5350),v=n(870),y=n(9573),b=n(6132),w=n(4068),x=624,S=397,_=h>>>0,E=2147483648,R=2147483647,O=1812433253,k=1664525,C=1566083941,A=[0,2567483615],L=1/(f+1),T=2147483648,M=1,I=f*L,P=1,j=3,F=2,N=x+3,D=x+5,B=x+6;function W(e,t){var n;return n=t?"option":"argument",e.length<B+1?new RangeError(b("invalid %s. `state` array has insufficient length.",n)):e[0]!==P?new RangeError(b("invalid %s. `state` array has an incompatible schema version. Expected: `%s`. Actual: `%s.`",n,P,e[0])):e[1]!==j?new RangeError(b("invalid %s. `state` array has an incompatible number of sections. Expected: `%s`. Actual: `%s`.",n,j,e[1])):e[F]!==x?new RangeError(b("invalid %s. `state` array has an incompatible state length. Expected: `%u`. Actual: `%u`.",n,x,e[F])):1!==e[N]?new RangeError(b("invalid %s. `state` array has an incompatible section length. Expected: `%u`. Actual: `%u`.",n,1,e[N])):e[D]!==e.length-B?new RangeError(b("invalid %s. `state` array length is incompatible with seed section length. Expected: `%u`. Actual: `%u`.",n,e.length-B,e[D])):null}function H(e,t,n){var r;for(e[0]=n>>>0,r=1;r<t;r++)n=((n=e[r-1]>>>0)^n>>>30)>>>0,e[r]=g(n,O)+r>>>0;return e}e.exports=function(e){var t,n,f,O,z,V;if(f={},arguments.length){if(!s(e))throw new TypeError(b("invalid argument. Options argument must be an object. Value: `%s`.",e));if(i(e,"copy")&&(f.copy=e.copy,!u(e.copy)))throw new TypeError(b("invalid option. `%s` option must be a boolean. Option: `%s`.","copy",e.copy));if(i(e,"state")){if(n=e.state,f.state=!0,!c(n))throw new TypeError(b("invalid option. `%s` option must be a Uint32Array. Option: `%s`.","state",n));if(V=W(n,!0))throw V;!1===f.copy?t=n:(t=new p(n.length),v(n.length,n,1,t,1)),n=new p(t.buffer,t.byteOffset+(F+1)*t.BYTES_PER_ELEMENT,x),O=new p(t.buffer,t.byteOffset+(D+1)*t.BYTES_PER_ELEMENT,n[D])}if(void 0===O)if(i(e,"seed"))if(O=e.seed,f.seed=!0,d(O)){if(O>_)throw new RangeError(b("invalid option. `%s` option must be a positive integer less than or equal to the maximum unsigned 32-bit integer. Option: `%u`.","seed",O));O>>>=0}else{if(!1===l(O)||O.length<1)throw new TypeError(b("invalid option. `%s` option must be either a positive integer less than or equal to the maximum unsigned 32-bit integer or an array-like object containing integer values less than or equal to the maximum unsigned 32-bit integer. Option: `%s`.","seed",O));if(1===O.length){if(O=O[0],!d(O))throw new TypeError(b("invalid option. `%s` option must be either a positive integer less than or equal to the maximum unsigned 32-bit integer or an array-like object containing integer values less than or equal to the maximum unsigned 32-bit integer. Option: `%s`.","seed",O));if(O>_)throw new RangeError(b("invalid option. `%s` option must be either a positive integer less than or equal to the maximum unsigned 32-bit integer or an array-like object containing integer values less than or equal to the maximum unsigned 32-bit integer. Option: `%u`.","seed",O));O>>>=0}else z=O.length,(t=new p(B+z))[0]=P,t[1]=j,t[F]=x,t[N]=1,t[N+1]=x,t[D]=z,v.ndarray(z,O,1,0,t,1,D+1),n=new p(t.buffer,t.byteOffset+(F+1)*t.BYTES_PER_ELEMENT,x),O=new p(t.buffer,t.byteOffset+(D+1)*t.BYTES_PER_ELEMENT,z),n=function(e,t,n,r){var a,o,i,s;for(o=1,i=0,s=m(t,r);s>0;s--)a=e[o-1]>>>0,a=g(a=(a^a>>>30)>>>0,k)>>>0,e[o]=(e[o]>>>0^a)+n[i]+i>>>0,i+=1,(o+=1)>=t&&(e[0]=e[t-1],o=1),i>=r&&(i=0);for(s=t-1;s>0;s--)a=e[o-1]>>>0,a=g(a=(a^a>>>30)>>>0,C)>>>0,e[o]=(e[o]>>>0^a)-o>>>0,(o+=1)>=t&&(e[0]=e[t-1],o=1);return e[0]=T,e}(n=H(n,x,19650218),x,O,z)}else O=w()>>>0}else O=w()>>>0;return void 0===n&&((t=new p(B+1))[0]=P,t[1]=j,t[F]=x,t[N]=1,t[N+1]=x,t[D]=1,t[D+1]=O,n=new p(t.buffer,t.byteOffset+(F+1)*t.BYTES_PER_ELEMENT,x),O=new p(t.buffer,t.byteOffset+(D+1)*t.BYTES_PER_ELEMENT,1),n=H(n,x,O)),r(X,"NAME","mt19937"),a(X,"seed",U),a(X,"seedLength",K),o(X,"state",q,Q),a(X,"stateLength",Y),a(X,"byteLength",G),r(X,"toJSON",$),r(X,"MIN",0),r(X,"MAX",h),r(X,"normalized",Z),r(Z,"NAME",X.NAME),a(Z,"seed",U),a(Z,"seedLength",K),o(Z,"state",q,Q),a(Z,"stateLength",Y),a(Z,"byteLength",G),r(Z,"toJSON",$),r(Z,"MIN",0),r(Z,"MAX",I),X;function U(){var e=t[D];return v(e,O,1,new p(e),1)}function K(){return t[D]}function Y(){return t.length}function G(){return t.byteLength}function q(){var e=t.length;return v(e,t,1,new p(e),1)}function Q(e){var r;if(!c(e))throw new TypeError(b("invalid argument. Must provide a Uint32Array. Value: `%s`.",e));if(r=W(e,!1))throw r;!1===f.copy?f.state&&e.length===t.length?v(e.length,e,1,t,1):(t=e,f.state=!0):(e.length!==t.length&&(t=new p(e.length)),v(e.length,e,1,t,1)),n=new p(t.buffer,t.byteOffset+(F+1)*t.BYTES_PER_ELEMENT,x),O=new p(t.buffer,t.byteOffset+(D+1)*t.BYTES_PER_ELEMENT,t[D])}function $(){var e={type:"PRNG"};return e.name=X.NAME,e.state=y(t),e.params=[],e}function X(){var e,r;return(r=t[N+1])>=x&&(n=function(e){var t,n,r,a;for(a=x-S,n=0;n<a;n++)t=e[n]&E|e[n+1]&R,e[n]=e[n+S]^t>>>1^A[t&M];for(r=x-1;n<r;n++)t=e[n]&E|e[n+1]&R,e[n]=e[n-a]^t>>>1^A[t&M];return t=e[r]&E|e[0]&R,e[r]=e[S-1]^t>>>1^A[t&M],e}(n),r=0),e=n[r],t[N+1]=r+1,e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0}function Z(){return(67108864*(X()>>>5)+(X()>>>6))*L}}},9121:(e,t,n)=>{"use strict";var r=n(404),a=n(3344);r(a,"factory",n(1867)),e.exports=a},3344:(e,t,n)=>{"use strict";var r=n(1867)({seed:n(4068)()});e.exports=r},4068:(e,t,n)=>{"use strict";var r=n(3335),a=n(7730),o=r-1;e.exports=function(){return a(1+o*Math.random())>>>0}},8893:(e,t,n)=>{"use strict";var r=n(404),a=n(4124);r(a,"REGEXP",n(7680)),e.exports=a},4124:e=>{"use strict";e.exports=function(){return/^\s*function\s*([^(]*)/i}},7680:(e,t,n)=>{"use strict";var r=n(4124)();e.exports=r},3193:(e,t,n)=>{"use strict";var r=n(3640);e.exports=r},3640:(e,t,n)=>{"use strict";var r=n(4023);e.exports=function(e,t){return new r(e.buffer,e.byteOffset+e.BYTES_PER_ELEMENT*t,2*(e.length-t))}},5506:(e,t,n)=>{"use strict";var r=n(277);e.exports=r},277:(e,t,n)=>{"use strict";var r=n(3872);e.exports=function(e,t){return new r(e.buffer,e.byteOffset+e.BYTES_PER_ELEMENT*t,2*(e.length-t))}},8161:(e,t,n)=>{"use strict";var r=n(2020),a=Math.abs,o=String.prototype.toLowerCase,i=String.prototype.toUpperCase,s=String.prototype.replace,l=/e\+(\d)$/,c=/e-(\d)$/,u=/^(\d+)$/,d=/^(\d+)e/,f=/\.0$/,h=/\.0*e/,p=/(\..*[^0])0*e/;e.exports=function(e){var t,n,m=parseFloat(e.arg);if(!isFinite(m)){if(!r(e.arg))throw new Error("invalid floating-point number. Value: "+n);m=e.arg}switch(e.specifier){case"e":case"E":n=m.toExponential(e.precision);break;case"f":case"F":n=m.toFixed(e.precision);break;case"g":case"G":a(m)<1e-4?((t=e.precision)>0&&(t-=1),n=m.toExponential(t)):n=m.toPrecision(e.precision),e.alternate||(n=s.call(n,p,"$1e"),n=s.call(n,h,"e"),n=s.call(n,f,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return n=s.call(n,l,"e+0$1"),n=s.call(n,c,"e-0$1"),e.alternate&&(n=s.call(n,u,"$1."),n=s.call(n,d,"$1.e")),m>=0&&e.sign&&(n=e.sign+n),n=e.specifier===i.call(e.specifier)?i.call(n):o.call(n)}},5704:(e,t,n)=>{"use strict";var r=n(2020),a=n(3942),o=String.prototype.toLowerCase,i=String.prototype.toUpperCase;e.exports=function(e){var t,n,s;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(n=e.arg,s=parseInt(n,10),!isFinite(s)){if(!r(n))throw new Error("invalid integer. Value: "+n);s=0}return s<0&&("u"===e.specifier||10!==t)&&(s=4294967295+s+1),s<0?(n=(-s).toString(t),e.precision&&(n=a(n,e.precision,e.padRight)),n="-"+n):(n=s.toString(t),s||e.precision?e.precision&&(n=a(n,e.precision,e.padRight)):n="",e.sign&&(n=e.sign+n)),16===t&&(e.alternate&&(n="0x"+n),n=e.specifier===i.call(e.specifier)?i.call(n):o.call(n)),8===t&&e.alternate&&"0"!==n.charAt(0)&&(n="0"+n),n}},836:(e,t,n)=>{"use strict";var r=n(7179);e.exports=r},2020:e=>{"use strict";e.exports=function(e){return"number"===typeof e}},6256:e=>{"use strict";e.exports=function(e){return"string"===typeof e}},7179:(e,t,n)=>{"use strict";var r=n(5704),a=n(6256),o=n(8161),i=n(2848),s=n(3942),l=String.fromCharCode,c=isNaN,u=Array.isArray;function d(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}e.exports=function(e){var t,n,f,h,p,m,g,v,y;if(!u(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(m="",g=1,v=0;v<e.length;v++)if(f=e[v],a(f))m+=f;else{if(t=void 0!==f.precision,!(f=d(f)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+v+"`. Value: `"+f+"`.");for(f.mapping&&(g=f.mapping),n=f.flags,y=0;y<n.length;y++)switch(h=n.charAt(y)){case" ":f.sign=" ";break;case"+":f.sign="+";break;case"-":f.padRight=!0,f.padZeros=!1;break;case"0":f.padZeros=n.indexOf("-")<0;break;case"#":f.alternate=!0;break;default:throw new Error("invalid flag: "+h)}if("*"===f.width){if(f.width=parseInt(arguments[g],10),g+=1,c(f.width))throw new TypeError("the argument for * width at position "+g+" is not a number. Value: `"+f.width+"`.");f.width<0&&(f.padRight=!0,f.width=-f.width)}if(t&&"*"===f.precision){if(f.precision=parseInt(arguments[g],10),g+=1,c(f.precision))throw new TypeError("the argument for * precision at position "+g+" is not a number. Value: `"+f.precision+"`.");f.precision<0&&(f.precision=1,t=!1)}switch(f.arg=arguments[g],f.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(f.padZeros=!1),f.arg=r(f);break;case"s":f.maxWidth=t?f.precision:-1;break;case"c":if(!c(f.arg)){if((p=parseInt(f.arg,10))<0||p>127)throw new Error("invalid character code. Value: "+f.arg);f.arg=c(p)?String(f.arg):l(p)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(f.precision=6),f.arg=o(f);break;default:throw new Error("invalid specifier: "+f.specifier)}f.maxWidth>=0&&f.arg.length>f.maxWidth&&(f.arg=f.arg.substring(0,f.maxWidth)),f.padZeros?f.arg=s(f.arg,f.width||f.precision,f.padRight):f.width&&(f.arg=i(f.arg,f.width,f.padRight)),m+=f.arg||"",g+=1}return m}},2848:e=>{"use strict";function t(e){var t,n="";for(t=0;t<e;t++)n+=" ";return n}e.exports=function(e,n,r){var a=n-e.length;return a<0?e:e=r?e+t(a):t(a)+e}},3942:e=>{"use strict";function t(e){var t,n="";for(t=0;t<e;t++)n+="0";return n}e.exports=function(e,n,r){var a=!1,o=n-e.length;return o<0||(function(e){return"-"===e[0]}(e)&&(a=!0,e=e.substr(1)),e=r?e+t(o):t(o)+e,a&&(e="-"+e)),e}},5440:(e,t,n)=>{"use strict";var r=n(6772);e.exports=r},6772:e=>{"use strict";var t=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function n(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}e.exports=function(e){var r,a,o,i;for(a=[],i=0,o=t.exec(e);o;)(r=e.slice(i,t.lastIndex-o[0].length)).length&&a.push(r),a.push(n(o)),i=t.lastIndex,o=t.exec(e);return(r=e.slice(i)).length&&a.push(r),a}},6132:(e,t,n)=>{"use strict";var r=n(5579);e.exports=r},6832:e=>{"use strict";e.exports=function(e){return"string"===typeof e}},5579:(e,t,n)=>{"use strict";var r=n(836),a=n(5440),o=n(6832);e.exports=function e(t){var n,i;if(!o(t))throw new TypeError(e("invalid argument. First argument must be a string. Value: `%s`.",t));for(n=[a(t)],i=1;i<arguments.length;i++)n.push(arguments[i]);return r.apply(null,n)}},2490:(e,t,n)=>{"use strict";var r=n(3245);e.exports=r},3245:e=>{"use strict";var t="function"===typeof Symbol?Symbol:void 0;e.exports=t},2510:(e,t,n)=>{"use strict";var r=n(7937);e.exports=r},7937:(e,t,n)=>{"use strict";var r=n(7128)()?Symbol.iterator:null;e.exports=r},2672:(e,t,n)=>{"use strict";var r=n(8647);e.exports=r},8647:e=>{"use strict";e.exports=function(e){return function(){return e}}},2793:(e,t,n)=>{"use strict";var r=n(9432);e.exports=r},9432:(e,t,n)=>{"use strict";var r=n(9359),a=n(8893).REGEXP,o=n(971);e.exports=function(e){var t,n,i;if(("Object"===(n=r(e).slice(8,-1))||"Error"===n)&&e.constructor){if("string"===typeof(i=e.constructor).name)return i.name;if(t=a.exec(i.toString()))return t[1]}return o(e)?"Buffer":n}},9274:(e,t,n)=>{"use strict";var r=n(5629);e.exports=r},5629:(e,t,n)=>{"use strict";var r=n(9872);e.exports=function(e,t,n){r(e,t,{configurable:!1,enumerable:!1,get:n})}},404:(e,t,n)=>{"use strict";var r=n(5627);e.exports=r},5627:(e,t,n)=>{"use strict";var r=n(9872);e.exports=function(e,t,n){r(e,t,{configurable:!1,enumerable:!1,writable:!1,value:n})}},9333:(e,t,n)=>{"use strict";var r=n(4420);e.exports=r},4420:(e,t,n)=>{"use strict";var r=n(9872);e.exports=function(e,t,n,a){r(e,t,{configurable:!1,enumerable:!1,get:n,set:a})}},5863:e=>{"use strict";var t=Object.defineProperty;e.exports=t},4609:e=>{"use strict";var t="function"===typeof Object.defineProperty?Object.defineProperty:null;e.exports=t},42:(e,t,n)=>{"use strict";var r=n(4609);e.exports=function(){try{return r({},"x",{}),!0}catch(e){return!1}}},9872:(e,t,n)=>{"use strict";var r,a=n(42),o=n(5863),i=n(4657);r=a()?o:i,e.exports=r},4657:(e,t,n)=>{"use strict";var r=n(6132),a=Object.prototype,o=a.toString,i=a.__defineGetter__,s=a.__defineSetter__,l=a.__lookupGetter__,c=a.__lookupSetter__;e.exports=function(e,t,n){var u,d,f,h;if("object"!==typeof e||null===e||"[object Array]"===o.call(e))throw new TypeError(r("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!==typeof n||null===n||"[object Array]"===o.call(n))throw new TypeError(r("invalid argument. Property descriptor must be an object. Value: `%s`.",n));if((d="value"in n)&&(l.call(e,t)||c.call(e,t)?(u=e.__proto__,e.__proto__=a,delete e[t],e[t]=n.value,e.__proto__=u):e[t]=n.value),f="get"in n,h="set"in n,d&&(f||h))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return f&&i&&i.call(e,t,n.get),h&&s&&s.call(e,t,n.set),e}},167:(e,t,n)=>{"use strict";var r=n(5794);e.exports=r},5794:(e,t,n)=>{"use strict";var r=n(1393),a=n(6932),o=n(9767);e.exports=function(e){var t,n,i;for(t=r(e),n=a(e),i=0;i<n.length;i++)o(e,n[i])&&t.push(n[i]);return t}},5527:(e,t,n)=>{"use strict";var r=n(8146);e.exports=r},8146:(e,t,n)=>{"use strict";var r=n(3629),a=n(2357),o=n(6132),i=n(8893).REGEXP,s=a();e.exports=function(e){if(!1===r(e))throw new TypeError(o("invalid argument. Must provide a function. Value: `%s`.",e));return s?e.name:i.exec(e.toString())[1]}},8651:(e,t,n)=>{"use strict";var r,a=n(3629),o=n(2055),i=n(8955);r=a(Object.getPrototypeOf)?o:i,e.exports=r},9578:(e,t,n)=>{"use strict";var r=n(8669);e.exports=r},8669:(e,t,n)=>{"use strict";var r=n(2107),a=n(8651);e.exports=function(e){return null===e||void 0===e?null:(e=r(e),a(e))}},2055:e=>{"use strict";var t=Object.getPrototypeOf;e.exports=t},8955:(e,t,n)=>{"use strict";var r=n(9359),a=n(6404);e.exports=function(e){var t=a(e);return t||null===t?t:"[object Function]"===r(e.constructor)?e.constructor.prototype:e instanceof Object?Object.prototype:null}},6404:e=>{"use strict";e.exports=function(e){return e.__proto__}},8610:(e,t,n)=>{"use strict";var r=n(5111).isPrimitive,a=n(6132),o=n(1791),i=n(5654),s=n(360),l=n(2914);e.exports=function(e){if(arguments.length){if(!r(e))throw new TypeError(a("invalid argument. Must provide a boolean. Value: `%s`.",e));if(e)return o()}if(l)return l;if(i)return i;if(s)return s;throw new Error("unexpected error. Unable to resolve global object.")}},1791:e=>{"use strict";e.exports=function(){return new Function("return this;")()}},2914:e=>{"use strict";var t="object"===typeof globalThis?globalThis:null;e.exports=t},5654:e=>{"use strict";var t="object"===typeof self?self:null;e.exports=t},360:e=>{"use strict";var t="object"===typeof window?window:null;e.exports=t},5675:(e,t,n)=>{"use strict";var r=n(8870);e.exports=r},8870:(e,t,n)=>{"use strict";var r=n(830),a=n(1317),o=n(3408).isPrimitive,i=n(4689).isPrimitive,s=n(6132);e.exports=function(e,t,n){var l,c;if(!a(e)&&!o(e))throw new TypeError(s("invalid argument. First argument must be an array-like object. Value: `%s`.",e));if(0===(l=e.length))return-1;if(3===arguments.length){if(!i(n))throw new TypeError(s("invalid argument. Third argument must be an integer. Value: `%s`.",n));if(n>=0){if(n>=l)return-1;c=n}else(c=l+n)<0&&(c=0)}else c=0;if(r(t)){for(;c<l;c++)if(r(e[c]))return c}else for(;c<l;c++)if(e[c]===t)return c;return-1}},4574:e=>{"use strict";e.exports=function(e){return Object.keys(Object(e))}},9266:(e,t,n)=>{"use strict";var r=n(6631),a=n(4574),o=Array.prototype.slice;e.exports=function(e){return r(e)?a(o.call(e)):a(e)}},5027:(e,t,n)=>{"use strict";var r=n(4574);e.exports=function(){return function(){return 2!==(r(arguments)||"").length}(1,2)}},4535:(e,t,n)=>{"use strict";var r,a=n(7615),o=n(5675),i=n(6253),s=n(9223),l=n(9608),c=n(4993);r=function(){var e;if("undefined"===i(c))return!1;for(e in c)try{-1===o(l,e)&&a(c,e)&&null!==c[e]&&"object"===i(c[e])&&s(c[e])}catch(t){return!0}return!1}(),e.exports=r},4185:e=>{"use strict";var t="undefined"!==typeof Object.keys;e.exports=t},2894:(e,t,n)=>{"use strict";var r=n(9767)(n(7521),"prototype");e.exports=r},2009:(e,t,n)=>{"use strict";var r=!n(9767)({toString:null},"toString");e.exports=r},6764:e=>{"use strict";var t="undefined"!==typeof window;e.exports=t},1393:(e,t,n)=>{"use strict";var r=n(7952);e.exports=r},9223:e=>{"use strict";e.exports=function(e){return e.constructor&&e.constructor.prototype===e}},4755:(e,t,n)=>{"use strict";var r=n(4535),a=n(9223),o=n(6764);e.exports=function(e){if(!1===o&&!r)return a(e);try{return a(e)}catch(t){return!1}}},7952:(e,t,n)=>{"use strict";var r,a=n(5027),o=n(4185),i=n(4574),s=n(9266),l=n(3510);r=o?a()?s:i:l,e.exports=r},3510:(e,t,n)=>{"use strict";var r=n(4242),a=n(7615),o=n(6631),i=n(2894),s=n(2009),l=n(4755),c=n(9547);e.exports=function(e){var t,n,u,d,f,h,p;if(d=[],o(e)){for(p=0;p<e.length;p++)d.push(p.toString());return d}if("string"===typeof e){if(e.length>0&&!a(e,"0"))for(p=0;p<e.length;p++)d.push(p.toString())}else{if(!1===(u="function"===typeof e)&&!r(e))return d;n=i&&u}for(f in e)n&&"prototype"===f||!a(e,f)||d.push(String(f));if(s)for(t=l(e),p=0;p<c.length;p++)h=c[p],t&&"constructor"===h||!a(e,h)||d.push(String(h));return d}},4993:e=>{"use strict";var t="undefined"===typeof window?void 0:window;e.exports=t},9359:(e,t,n)=>{"use strict";var r,a=n(9681),o=n(2346),i=n(3460);r=a()?i:o,e.exports=r},2346:(e,t,n)=>{"use strict";var r=n(8983);e.exports=function(e){return r.call(e)}},3460:(e,t,n)=>{"use strict";var r=n(7615),a=n(3103),o=n(8983);e.exports=function(e){var t,n,i;if(null===e||void 0===e)return o.call(e);n=e[a],t=r(e,a);try{e[a]=void 0}catch(s){return o.call(e)}return i=o.call(e),t?e[a]=n:delete e[a],i}},8983:e=>{"use strict";var t=Object.prototype.toString;e.exports=t},3103:(e,t,n)=>{"use strict";var r=n(2490),a="function"===typeof r?r.toStringTag:"";e.exports=a},7521:(e,t,n)=>{"use strict";var r=n(2032);e.exports=r},2032:e=>{"use strict";e.exports=function(){}},8387:(e,t,n)=>{"use strict";var r=n(2107),a=r.getOwnPropertySymbols;e.exports=function(e){return a(r(e))}},2100:e=>{"use strict";var t="undefined"!==typeof Object.getOwnPropertySymbols;e.exports=t},6932:(e,t,n)=>{"use strict";var r,a=n(2100),o=n(8387),i=n(4365);r=a?o:i,e.exports=r},4365:e=>{"use strict";e.exports=function(){return[]}},5921:(e,t,n)=>{"use strict";var r=n(6279),a=n(3506),o=n(6087);e.exports=function(){return"function"===typeof r||"object"===typeof o||"function"===typeof a}},3506:(e,t,n)=>{"use strict";var r=n(8610)(),a=r.document&&r.document.childNodes;e.exports=a},6279:e=>{"use strict";e.exports=/./},6087:e=>{"use strict";var t=Int8Array;e.exports=t},6253:(e,t,n)=>{"use strict";var r=n(5921),a=n(8124),o=n(7466),i=r()?o:a;e.exports=i},8124:(e,t,n)=>{"use strict";var r=n(2793);e.exports=function(e){var t;return null===e?"null":"object"===(t=typeof e)?r(e).toLowerCase():t}},7466:(e,t,n)=>{"use strict";var r=n(2793);e.exports=function(e){return r(e).toLowerCase()}},2730:(e,t,n)=>{"use strict";var r=n(5043),a=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)i.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function m(e,t,n,r,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(p,e)||!d.call(h,e)&&(f.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var F,N=Object.assign;function D(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function H(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case R:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case O:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=U(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function oe(e,t){var n=U(t.value),r=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ve=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Ee=null;function Re(e){if(e=ba(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=xa(t),Se(e.stateNode,e.type,t))}}function Oe(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function ke(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Le=!1;function Te(e,t,n){if(Le)return e(t,n);Le=!0;try{return Ce(e,t,n)}finally{Le=!1,(null!==_e||null!==Ee)&&(Ae(),ke())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=xa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Ie=!1}function je(e,t,n,r,a,o,i,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Fe=!1,Ne=null,De=!1,Be=null,We={onError:function(e){Fe=!0,Ne=e}};function He(e,t,n,r,a,o,i,s,l){Fe=!1,Ne=null,je.apply(We,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(ze(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ue(a),e;if(i===r)return Ue(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Qe=a.unstable_shouldYield,$e=a.unstable_requestPaint,Xe=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&n;if(0!==i){var s=i&~a;0!==s?r=dt(s):0!==(o&=i)&&(r=dt(o))}else 0!==(i=n&~a)?r=dt(i):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,_t,Et,Rt,Ot=!1,kt=[],Ct=null,At=null,Lt=null,Tt=new Map,Mt=new Map,It=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Ft(e,t,n,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Nt(e){var t=ya(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Rt(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){Dt(e)&&n.delete(t)}function Wt(){Ot=!1,null!==Ct&&Dt(Ct)&&(Ct=null),null!==At&&Dt(At)&&(At=null),null!==Lt&&Dt(Lt)&&(Lt=null),Tt.forEach(Bt),Mt.forEach(Bt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function zt(e){function t(t){return Ht(t,e)}if(0<kt.length){Ht(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ht(Ct,e),null!==At&&Ht(At,e),null!==Lt&&Ht(Lt,e),Tt.forEach(t),Mt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Nt(n),null===n.blockedOn&&It.shift()}var Vt=w.ReactCurrentBatchConfig,Ut=!0;function Kt(e,t,n,r){var a=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=a,Vt.transition=o}}function Yt(e,t,n,r){var a=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=a,Vt.transition=o}}function Gt(e,t,n,r){if(Ut){var a=Qt(e,t,n,r);if(null===a)Ur(e,t,r,qt,n),jt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ct=Ft(Ct,e,t,n,r,a),!0;case"dragenter":return At=Ft(At,e,t,n,r,a),!0;case"mouseover":return Lt=Ft(Lt,e,t,n,r,a),!0;case"pointerover":var o=a.pointerId;return Tt.set(o,Ft(Tt.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Mt.set(o,Ft(Mt.get(o)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==a;){var o=ba(a);if(null!==o&&xt(o),null===(o=Qt(e,t,n,r))&&Ur(e,t,r,qt,n),o===a)break;a=o}null!==a&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var qt=null;function Qt(e,t,n,r){if(qt=null,null!==(e=ya(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,o=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[o-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,o){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(cn),dn=N({},cn,{view:0,detail:0}),fn=an(dn),hn=N({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(hn),mn=an(N({},hn,{dataTransfer:0})),gn=an(N({},dn,{relatedTarget:0})),vn=an(N({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=N({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),wn=an(N({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Rn(){return En}var On=N({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=an(On),Cn=an(N({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(N({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rn})),Ln=an(N({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=N({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(Tn),In=[9,13,27,32],Pn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Fn=u&&"TextEvent"in window&&!jn,Nn=u&&(!Pn||jn&&8<jn&&11>=jn),Dn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Kn(e,t,n,r){Oe(r),0<(t=Yr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Gn=null;function qn(e){Dr(e,0)}function Qn(e){if(G(wa(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Zn;if(u){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Yn&&(Yn.detachEvent("onpropertychange",nr),Gn=Yn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Kn(t,Gn,e,xe(e)),Te(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Yn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function or(e,t){if("click"===e)return Qn(t)}function ir(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=ur(n,o);var i=ur(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Yr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Er={};function Rr(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Or=Rr("animationend"),kr=Rr("animationiteration"),Cr=Rr("animationstart"),Ar=Rr("transitionend"),Lr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Lr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Tr.length;Ir++){var Pr=Tr[Ir];Mr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Mr(Or,"onAnimationEnd"),Mr(kr,"onAnimationIteration"),Mr(Cr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,l,c){if(He.apply(this,arguments),Fe){if(!Fe)throw Error(o(198));var u=Ne;Fe=!1,Ne=null,De||(De=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;Nr(a,s,c),o=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,c=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;Nr(a,s,c),o=l}}}if(De)throw e=Be,De=!1,Be=null,e}function Br(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Hr]){e[Hr]=!0,i.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Wr(t,!1,e),Wr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Wr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch($t(t)){case 1:var a=Kt;break;case 4:a=Yt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,a){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ya(s)))return;if(5===(l=i.tag)||6===l){r=o=i;continue e}s=s.parentNode}}r=r.return}Te((function(){var r=o,a=xe(n),i=[];e:{var s=Lr.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Or:case kr:case Cr:l=vn;break;case Ar:l=Ln;break;case"scroll":l=fn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,f=u?null!==s?s+"Capture":null:s;u=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==f&&(null!=(m=Me(p,f))&&u.push(Kr(p,m,h)))),d)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,a),i.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",f="onPointerEnter",p="pointer"),d=null==l?s:wa(l),h=null==c?s:wa(c),(s=new u(m,p+"leave",l,n,a)).target=d,s.relatedTarget=h,m=null,ya(a)===r&&((u=new u(f,p+"enter",c,n,a)).target=h,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(f=c,p=0,h=u=l;h;h=Gr(h))p++;for(h=0,m=f;m;m=Gr(m))h++;for(;0<p-h;)u=Gr(u),p--;for(;0<h-p;)f=Gr(f),h--;for(;p--;){if(u===f||null!==f&&u===f.alternate)break e;u=Gr(u),f=Gr(f)}u=null}else u=null;null!==l&&qr(i,s,l,u,!1),null!==c&&null!==d&&qr(i,d,c,u,!0)}if("select"===(l=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=$n;else if(Un(s))if(Xn)g=ir;else{g=ar;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Kn(i,g,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?wa(r):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(i,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,n,a)}var y;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Nn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Zt="value"in(Xt=a)?Xt.value:Xt.textContent,zn=!0)),0<(v=Yr(r,b)).length&&(b=new wn(b,e,null,n,a),i.push({event:b,listeners:v}),y?b.data=y:null!==(y=Hn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Dn);case"textInput":return(e=t.data)===Dn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Wn(e,t)?(e=en(),Jt=Zt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(a=new wn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}Dr(i,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Me(e,n))&&r.unshift(Kr(e,o,a)),null!=(o=Me(e,t))&&r.push(Kr(e,o,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,a){for(var o=t._reactName,i=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Me(n,o))&&i.unshift(Kr(n,l,s)):a||null!=(l=Me(n,o))&&i.push(Kr(n,l,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function la(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);zt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ua(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,ha="__reactProps$"+da,pa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ua(e);null!==e;){if(n=e[fa])return n;e=ua(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[fa]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xa(e){return e[ha]||null}var Sa=[],_a=-1;function Ea(e){return{current:e}}function Ra(e){0>_a||(e.current=Sa[_a],Sa[_a]=null,_a--)}function Oa(e,t){_a++,Sa[_a]=e.current,e.current=t}var ka={},Ca=Ea(ka),Aa=Ea(!1),La=ka;function Ta(e,t){var n=e.type.contextTypes;if(!n)return ka;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in n)o[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ia(){Ra(Aa),Ra(Ca)}function Pa(e,t,n){if(Ca.current!==ka)throw Error(o(168));Oa(Ca,t),Oa(Aa,n)}function ja(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(o(108,V(e)||"Unknown",a));return N({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ka,La=Ca.current,Oa(Ca,e),Oa(Aa,Aa.current),!0}function Na(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ja(e,t,La),r.__reactInternalMemoizedMergedChildContext=e,Ra(Aa),Ra(Ca),Oa(Ca,e)):Ra(Aa),Oa(Aa,n)}var Da=null,Ba=!1,Wa=!1;function Ha(e){null===Da?Da=[e]:Da.push(e)}function za(){if(!Wa&&null!==Da){Wa=!0;var e=0,t=bt;try{var n=Da;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Da=null,Ba=!1}catch(a){throw null!==Da&&(Da=Da.slice(e+1)),Ge(Je,za),a}finally{bt=t,Wa=!1}}return null}var Va=[],Ua=0,Ka=null,Ya=0,Ga=[],qa=0,Qa=null,$a=1,Xa="";function Za(e,t){Va[Ua++]=Ya,Va[Ua++]=Ka,Ka=e,Ya=t}function Ja(e,t,n){Ga[qa++]=$a,Ga[qa++]=Xa,Ga[qa++]=Qa,Qa=e;var r=$a;e=Xa;var a=32-it(r)-1;r&=~(1<<a),n+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,$a=1<<32-it(t)+a|n<<a|r,Xa=o+e}else $a=1<<o|n<<a|r,Xa=e}function eo(e){null!==e.return&&(Za(e,1),Ja(e,1,0))}function to(e){for(;e===Ka;)Ka=Va[--Ua],Va[Ua]=null,Ya=Va[--Ua],Va[Ua]=null;for(;e===Qa;)Qa=Ga[--qa],Ga[qa]=null,Xa=Ga[--qa],Ga[qa]=null,$a=Ga[--qa],Ga[qa]=null}var no=null,ro=null,ao=!1,oo=null;function io(e,t){var n=Mc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qa?{id:$a,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ao){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ca(n.nextSibling);var r=no;t&&so(e,t)?io(r,n):(e.flags=-4097&e.flags|2,ao=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!ao)return uo(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw ho(),Error(o(418));for(;t;)io(e,t),t=ca(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ca(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=ca(e.nextSibling)}function po(){ro=no=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Ea(null),bo=null,wo=null,xo=null;function So(){xo=wo=bo=null}function _o(e){var t=yo.current;Ra(yo),e._currentValue=t}function Eo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ro(e,t){bo=e,xo=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var ko=null;function Co(e){null===ko?ko=[e]:ko.push(e)}function Ao(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Co(t)):(n.next=a.next,a.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var To=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Io(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Po(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Lo(e,n)}return null===(a=r.interleaved)?(t.next=t,Co(r)):(t.next=a.next,a.next=t),r.interleaved=t,Lo(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function No(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?a=o=i:o=o.next=i,n=n.next}while(null!==n);null===o?a=o=t:o=o.next=t}else a=o=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Do(e,t,n,r){var a=e.updateQueue;To=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===i?o=c:i.next=c,i=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==i&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=a.baseState;for(i=0,u=c=l=null,s=o;;){var f=s.lane,h=s.eventTime;if((r&f)===f){null!==u&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,h=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=m.payload)?p.call(h,d,f):p)||void 0===f)break e;d=N({},d,f);break e;case 2:To=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else h={eventTime:h,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=h,l=d):u=u.next=h,i|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Nl|=i,e.lanes=i,e.memoizedState=d}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var Wo=(new r.Component).refs;function Ho(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zo={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),o=Po(r,a);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,a))&&(rc(t,e,a,r),Fo(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),a=nc(e),o=Po(r,a);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=jo(e,o,a))&&(rc(t,e,a,r),Fo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),a=Po(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=jo(e,a,r))&&(rc(t,e,r,n),Fo(t,e,r))}};function Vo(e,t,n,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(a,o))}function Uo(e,t,n){var r=!1,a=ka,o=t.contextType;return"object"===typeof o&&null!==o?o=Oo(o):(a=Ma(t)?La:Ca.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ta(e,a):ka),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function Yo(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=Wo,Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=Oo(o):(o=Ma(t)?La:Ca.current,a.context=Ta(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Ho(e,t,o,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&zo.enqueueReplaceState(a,a.state,null),Do(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Go(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;t===Wo&&(t=a.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&Qo(o)===t.type)?((r=a(t,n.props)).ref=Go(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=Go(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,o)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=Go(e,null,t),n.return=e,n;case S:return(t=Bc(t,e.mode,n)).return=e,t;case M:return f(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Fc(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function h(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===a?c(e,t,n,r):null;case S:return n.key===a?u(e,t,n,r):null;case M:return h(e,t,(a=n._init)(n._payload),r)}if(te(n)||j(n))return null!==a?null:d(e,t,n,r,null);qo(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case M:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||j(r))return d(t,e=e.get(n)||null,r,a,null);qo(t,r)}return null}function m(a,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=h(a,d,s[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),o=i(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===s.length)return n(a,d),ao&&Za(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=f(a,s[m],l))&&(o=i(d,o,m),null===u?c=d:u.sibling=d,u=d);return ao&&Za(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(g=p(d,a,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(a,e)})),ao&&Za(a,m),c}function g(a,s,l,c){var u=j(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=h(a,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=i(b,s,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(a,m),ao&&Za(a,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=f(a,y.value,c))&&(s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return ao&&Za(a,g),u}for(m=r(a,m);!y.done;g++,y=l.next())null!==(y=p(m,a,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=i(y,s,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),ao&&Za(a,g),u}return function e(r,o,i,l){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var c=i.key,u=o;null!==u;){if(u.key===c){if((c=i.type)===_){if(7===u.tag){n(r,u.sibling),(o=a(u,i.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&Qo(c)===u.type){n(r,u.sibling),(o=a(u,i.props)).ref=Go(r,u,i),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}i.type===_?((o=Fc(i.props.children,r.mode,l,i.key)).return=r,r=o):((l=jc(i.type,i.key,i.props,null,r.mode,l)).ref=Go(r,o,i),l.return=r,r=l)}return s(r);case S:e:{for(u=i.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){n(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bc(i,r.mode,l)).return=r,r=o}return s(r);case M:return e(r,o,(u=i._init)(i._payload),l)}if(te(i))return m(r,o,i,l);if(j(i))return g(r,o,i,l);qo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(n(r,o.sibling),(o=a(o,i)).return=r,r=o):(n(r,o),(o=Dc(i,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Xo=$o(!0),Zo=$o(!1),Jo={},ei=Ea(Jo),ti=Ea(Jo),ni=Ea(Jo);function ri(e){if(e===Jo)throw Error(o(174));return e}function ai(e,t){switch(Oa(ni,t),Oa(ti,e),Oa(ei,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ra(ei),Oa(ei,t)}function oi(){Ra(ei),Ra(ti),Ra(ni)}function ii(e){ri(ni.current);var t=ri(ei.current),n=le(t,e.type);t!==n&&(Oa(ti,e),Oa(ei,n))}function si(e){ti.current===e&&(Ra(ei),Ra(ti))}var li=Ea(0);function ci(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ui=[];function di(){for(var e=0;e<ui.length;e++)ui[e]._workInProgressVersionPrimary=null;ui.length=0}var fi=w.ReactCurrentDispatcher,hi=w.ReactCurrentBatchConfig,pi=0,mi=null,gi=null,vi=null,yi=!1,bi=!1,wi=0,xi=0;function Si(){throw Error(o(321))}function _i(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Ei(e,t,n,r,a,i){if(pi=i,mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fi.current=null===e||null===e.memoizedState?ss:ls,e=n(r,a),bi){i=0;do{if(bi=!1,wi=0,25<=i)throw Error(o(301));i+=1,vi=gi=null,t.updateQueue=null,fi.current=cs,e=n(r,a)}while(bi)}if(fi.current=is,t=null!==gi&&null!==gi.next,pi=0,vi=gi=mi=null,yi=!1,t)throw Error(o(300));return e}function Ri(){var e=0!==wi;return wi=0,e}function Oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vi?mi.memoizedState=vi=e:vi=vi.next=e,vi}function ki(){if(null===gi){var e=mi.alternate;e=null!==e?e.memoizedState:null}else e=gi.next;var t=null===vi?mi.memoizedState:vi.next;if(null!==t)vi=t,gi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gi=e).memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},null===vi?mi.memoizedState=vi=e:vi=vi.next=e}return vi}function Ci(e,t){return"function"===typeof t?t(e):t}function Ai(e){var t=ki(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gi,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=s=null,c=null,u=i;do{var d=u.lane;if((pi&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=f,s=r):c=c.next=f,mi.lanes|=d,Nl|=d}u=u.next}while(null!==u&&u!==i);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,mi.lanes|=i,Nl|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Li(e){var t=ki(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,t.memoizedState)||(ws=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ti(){}function Mi(e,t){var n=mi,r=ki(),a=t(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,ws=!0),r=r.queue,Ui(ji.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==vi&&1&vi.memoizedState.tag){if(n.flags|=2048,Bi(9,Pi.bind(null,n,r,a,t),void 0,null),null===Ll)throw Error(o(349));0!==(30&pi)||Ii(n,t,a)}return a}function Ii(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pi(e,t,n,r){t.value=n,t.getSnapshot=r,Fi(t)&&Ni(e)}function ji(e,t,n){return n((function(){Fi(t)&&Ni(e)}))}function Fi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ni(e){var t=Lo(e,1);null!==t&&rc(t,e,1,-1)}function Di(e){var t=Oi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ci,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mi,e),[t.memoizedState,e]}function Bi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Wi(){return ki().memoizedState}function Hi(e,t,n,r){var a=Oi();mi.flags|=e,a.memoizedState=Bi(1|t,n,void 0,void 0===r?null:r)}function zi(e,t,n,r){var a=ki();r=void 0===r?null:r;var o=void 0;if(null!==gi){var i=gi.memoizedState;if(o=i.destroy,null!==r&&_i(r,i.deps))return void(a.memoizedState=Bi(t,n,o,r))}mi.flags|=e,a.memoizedState=Bi(1|t,n,o,r)}function Vi(e,t){return Hi(8390656,8,e,t)}function Ui(e,t){return zi(2048,8,e,t)}function Ki(e,t){return zi(4,2,e,t)}function Yi(e,t){return zi(4,4,e,t)}function Gi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zi(4,4,Gi.bind(null,t,e),n)}function Qi(){}function $i(e,t){var n=ki();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_i(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xi(e,t){var n=ki();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_i(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zi(e,t,n){return 0===(21&pi)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mi.lanes|=n,Nl|=n,e.baseState=!0),t)}function Ji(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=hi.transition;hi.transition={};try{e(!1),t()}finally{bt=n,hi.transition=r}}function es(){return ki().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))as(t,n);else if(null!==(n=Ao(e,t,n,r))){rc(n,e,r,tc()),os(n,t,r)}}function ns(e,t,n){var r=nc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,s=o(i,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var l=t.interleaved;return null===l?(a.next=a,Co(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Ao(e,t,a,r))&&(rc(n,e,r,a=tc()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===mi||null!==t&&t===mi}function as(e,t){bi=yi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var is={readContext:Oo,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},ss={readContext:Oo,useCallback:function(e,t){return Oi().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:Vi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Hi(4194308,4,Gi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hi(4,2,e,t)},useMemo:function(e,t){var n=Oi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Oi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Oi().memoizedState=e},useState:Di,useDebugValue:Qi,useDeferredValue:function(e){return Oi().memoizedState=e},useTransition:function(){var e=Di(!1),t=e[0];return e=Ji.bind(null,e[1]),Oi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mi,a=Oi();if(ao){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ll)throw Error(o(349));0!==(30&pi)||Ii(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Vi(ji.bind(null,r,i,e),[e]),r.flags|=2048,Bi(9,Pi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Oi(),t=Ll.identifierPrefix;if(ao){var n=Xa;t=":"+t+"R"+(n=($a&~(1<<32-it($a)-1)).toString(32)+n),0<(n=wi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Oo,useCallback:$i,useContext:Oo,useEffect:Ui,useImperativeHandle:qi,useInsertionEffect:Ki,useLayoutEffect:Yi,useMemo:Xi,useReducer:Ai,useRef:Wi,useState:function(){return Ai(Ci)},useDebugValue:Qi,useDeferredValue:function(e){return Zi(ki(),gi.memoizedState,e)},useTransition:function(){return[Ai(Ci)[0],ki().memoizedState]},useMutableSource:Ti,useSyncExternalStore:Mi,useId:es,unstable_isNewReconciler:!1},cs={readContext:Oo,useCallback:$i,useContext:Oo,useEffect:Ui,useImperativeHandle:qi,useInsertionEffect:Ki,useLayoutEffect:Yi,useMemo:Xi,useReducer:Li,useRef:Wi,useState:function(){return Li(Ci)},useDebugValue:Qi,useDeferredValue:function(e){var t=ki();return null===gi?t.memoizedState=e:Zi(t,gi.memoizedState,e)},useTransition:function(){return[Li(Ci)[0],ki().memoizedState]},useMutableSource:Ti,useSyncExternalStore:Mi,useId:es,unstable_isNewReconciler:!1};function us(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var a=n}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Po(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Yl=r),fs(0,t)},n}function ms(e,t,n){(n=Po(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Oc.bind(null,e,t,n),t.then(e,e))}function vs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Po(-1,1)).tag=2,jo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=w.ReactCurrentOwner,ws=!1;function xs(e,t,n,r){t.child=null===e?Zo(t,null,n,r):Xo(t,e.child,n,r)}function Ss(e,t,n,r,a){n=n.render;var o=t.ref;return Ro(t,a),r=Ei(e,t,n,r,o,a),n=Ri(),null===e||ws?(ao&&n&&eo(t),t.flags|=1,xs(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ks(e,t,a))}function _s(e,t,n,r,a){if(null===e){var o=n.type;return"function"!==typeof o||Ic(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(i,r)&&e.ref===t.ref)return Ks(e,t,a)}return t.flags|=1,(e=Pc(o,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,a){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=o,0===(e.lanes&a))return t.lanes=e.lanes,Ks(e,t,a);0!==(131072&e.flags)&&(ws=!0)}}return ks(e,t,n,r,a)}function Rs(e,t,n){var r=t.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oa(Pl,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oa(Pl,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Oa(Pl,Il),Il|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Oa(Pl,Il),Il|=r;return xs(e,t,a,n),t.child}function Os(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,n,r,a){var o=Ma(n)?La:Ca.current;return o=Ta(t,o),Ro(t,a),n=Ei(e,t,n,r,o,a),r=Ri(),null===e||ws?(ao&&r&&eo(t),t.flags|=1,xs(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ks(e,t,a))}function Cs(e,t,n,r,a){if(Ma(n)){var o=!0;Fa(t)}else o=!1;if(Ro(t,a),null===t.stateNode)Us(e,t),Uo(t,n,r),Yo(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,s=t.memoizedProps;i.props=s;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Oo(c):c=Ta(t,c=Ma(n)?La:Ca.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==c)&&Ko(t,i,r,c),To=!1;var f=t.memoizedState;i.state=f,Do(t,r,i,a),l=t.memoizedState,s!==r||f!==l||Aa.current||To?("function"===typeof u&&(Ho(t,n,u,r),l=t.memoizedState),(s=To||Vo(t,n,s,r,f,l,c))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=s):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Io(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:vo(t.type,s),i.props=c,d=t.pendingProps,f=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Oo(l):l=Ta(t,l=Ma(n)?La:Ca.current);var h=n.getDerivedStateFromProps;(u="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||f!==l)&&Ko(t,i,r,l),To=!1,f=t.memoizedState,i.state=f,Do(t,r,i,a);var p=t.memoizedState;s!==d||f!==p||Aa.current||To?("function"===typeof h&&(Ho(t,n,h,r),p=t.memoizedState),(c=To||Vo(t,n,c,r,f,p,l)||!1)?(u||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,a)}function As(e,t,n,r,a,o){Os(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Na(t,n,!1),Ks(e,t,o);r=t.stateNode,bs.current=t;var s=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Xo(t,e.child,null,o),t.child=Xo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,a&&Na(t,n,!0),t.child}function Ls(e){var t=e.stateNode;t.pendingContext?Pa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pa(0,t.context,!1),ai(e,t.containerInfo)}function Ts(e,t,n,r,a){return po(),mo(a),t.flags|=256,xs(e,t,n,r),t.child}var Ms,Is,Ps,js,Fs={dehydrated:null,treeContext:null,retryLane:0};function Ns(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,t,n){var r,a=t.pendingProps,i=li.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Oa(li,1&i),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Nc(l,a,0,null),e=Fc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ns(n),t.memoizedState=Fs,e):Bs(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,a,i,s){if(n)return 256&t.flags?(t.flags&=-257,Ws(e,t,s,r=ds(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Nc({mode:"visible",children:r.children},a,0,null),(i=Fc(i,a,s,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&Xo(t,e.child,null,s),t.child.memoizedState=Ns(s),t.memoizedState=Fs,i);if(0===(1&t.mode))return Ws(e,t,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Ws(e,t,s,r=ds(i=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),ws||l){if(null!==(r=Ll)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Lo(e,a),rc(r,e,a,-1))}return gc(),Ws(e,t,s,r=ds(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ro=ca(a.nextSibling),no=t,ao=!0,oo=null,null!==e&&(Ga[qa++]=$a,Ga[qa++]=Xa,Ga[qa++]=Qa,$a=e.id,Xa=e.overflow,Qa=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,i,n);if(s){s=a.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Pc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Pc(r,s):(s=Fc(s,l,n,null)).flags|=2,s.return=t,a.return=t,a.sibling=s,t.child=a,a=s,s=t.child,l=null===(l=e.child.memoizedState)?Ns(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Fs,a}return e=(s=e.child).sibling,a=Pc(s,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Bs(e,t){return(t=Nc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ws(e,t,n,r){return null!==r&&mo(r),Xo(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Eo(e.return,t,n)}function zs(e,t,n,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a)}function Vs(e,t,n){var r=t.pendingProps,a=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=li.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,n,t);else if(19===e.tag)Hs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oa(li,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ci(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),zs(t,!1,a,n,o);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ci(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}zs(t,!0,n,null,o);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Nl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ys(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ma(t.type)&&Ia(),Gs(t),null;case 3:return r=t.stateNode,oi(),Ra(Aa),Ra(Ca),di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Is(e,t),Gs(t),null;case 5:si(t);var a=ri(ni.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=ri(ei.current),fo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[fa]=t,r[ha]=i,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<jr.length;a++)Br(jr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":$(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":ae(r,i),Br("invalid",r)}for(var l in ye(n,i),a=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":Y(r),J(r,i,!0);break;case"textarea":Y(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Jr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fa]=t,e[ha]=r,Ms(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<jr.length;a++)Br(jr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":$(e,r),a=Q(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=N({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var u=c[i];"style"===i?ge(e,u):"dangerouslySetInnerHTML"===i?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===i?"string"===typeof u?("textarea"!==n||""!==u)&&fe(e,u):"number"===typeof u&&fe(e,""+u):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=u&&"onScroll"===i&&Br("scroll",e):null!=u&&b(e,i,u,l))}switch(n){case"input":Y(e),J(e,r,!1);break;case"textarea":Y(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+U(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)js(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ri(ni.current),ri(ei.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(i=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return Gs(t),null;case 13:if(Ra(li),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,i=!1;else if(i=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[fa]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),i=!1}else null!==oo&&(sc(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&li.current)?0===jl&&(jl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return oi(),Is(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return _o(t.type._context),Gs(t),null;case 19:if(Ra(li),null===(i=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Ys(i,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ci(e))){for(t.flags|=128,Ys(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oa(li,1&li.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>Vl&&(t.flags|=128,r=!0,Ys(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ci(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ys(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ao)return Gs(t),null}else 2*Xe()-i.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Ys(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=li.current,Oa(li,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qs(e,t){switch(to(t),t.tag){case 1:return Ma(t.type)&&Ia(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oi(),Ra(Aa),Ra(Ca),di(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return si(t),null;case 13:if(Ra(li),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ra(li),null;case 4:return oi(),null;case 10:return _o(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(){},Ps=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ri(ei.current);var o,i=null;switch(n){case"input":a=Q(e,a),r=Q(e,r),i=[];break;case"select":a=N({},a,{value:void 0}),r=N({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},js=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Xs=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Js=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Rc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Rc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&tl(t,n,o)}a=a.next}while(a!==r)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[ha],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,fl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Xs||el(n,t);case 6:var r=dl,a=fl;dl=null,hl(e,t,n),fl=a,null!==(dl=r)&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(fl?(e=dl,n=n.stateNode,8===e.nodeType?la(e.parentNode,n):1===e.nodeType&&la(e,n),zt(e)):la(dl,n.stateNode));break;case 4:r=dl,a=fl,dl=n.stateNode.containerInfo,fl=!0,hl(e,t,n),dl=r,fl=a;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&tl(n,t,i),a=a.next}while(a!==r)}hl(e,t,n);break;case 1:if(!Xs&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Rc(n,t,s)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xs=(r=Xs)||null!==n.memoizedState,hl(e,t,n),Xs=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,fl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===dl)throw Error(o(160));pl(i,s,a),dl=null,fl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Rc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(g){Rc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Rc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(g){Rc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&X(a,i),be(l,s);var u=be(l,i);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?ge(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):b(a,d,f,u)}switch(l){case"input":Z(a,i);break;case"textarea":oe(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[ha]=i}catch(g){Rc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Rc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Rc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(zl=Xe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xs=(u=Xs)||d,gl(t,e),Xs=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(f=Js=d;null!==Js;){switch(p=(h=Js).child,h.tag){case 0:case 11:case 14:case 15:rl(4,h,h.return);break;case 1:el(h,h.return);var m=h.stateNode;if("function"===typeof m.componentWillUnmount){r=h,n=h.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Rc(r,n,g)}}break;case 5:el(h,h.return);break;case 22:if(null!==h.memoizedState){Sl(f);continue}}null!==p?(p.return=h,Js=p):Sl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Rc(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Rc(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),ul(e,ll(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;cl(e,ll(e),i);break;default:throw Error(o(161))}}catch(s){Rc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Js=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var a=Js,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||$s;if(!i){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=$s;var c=Xs;if($s=i,(Xs=l)&&!c)for(Js=a;null!==Js;)l=(i=Js).child,22===i.tag&&null!==i.memoizedState?_l(a):null!==l?(l.return=i,Js=l):_l(a);for(;null!==o;)Js=o,wl(o,t,n),o=o.sibling;Js=a,$s=s,Xs=c}xl(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Js=o):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xs||al(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Bo(t,i,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&zt(f)}}}break;default:throw Error(o(163))}Xs||512&t.flags&&ol(t)}catch(h){Rc(t,t.return,h)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function Sl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function _l(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){Rc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(l){Rc(t,a,l)}}var o=t.return;try{ol(t)}catch(l){Rc(t,o,l)}break;case 5:var i=t.return;try{ol(t)}catch(l){Rc(t,i,l)}}}catch(l){Rc(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var El,Rl=Math.ceil,Ol=w.ReactCurrentDispatcher,kl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Al=0,Ll=null,Tl=null,Ml=0,Il=0,Pl=Ea(0),jl=0,Fl=null,Nl=0,Dl=0,Bl=0,Wl=null,Hl=null,zl=0,Vl=1/0,Ul=null,Kl=!1,Yl=null,Gl=null,ql=!1,Ql=null,$l=0,Xl=0,Zl=null,Jl=-1,ec=0;function tc(){return 0!==(6&Al)?Xe():-1!==Jl?Jl:Jl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Ml?Ml&-Ml:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Zl=null,Error(o(185));vt(e,n,r),0!==(2&Al)&&e===Ll||(e===Ll&&(0===(2&Al)&&(Dl|=n),4===jl&&lc(e,Ml)),ac(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Vl=Xe()+500,Ba&&za()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),s=1<<i,l=a[i];-1===l?0!==(s&n)&&0===(s&r)||(a[i]=ht(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Ll?Ml:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Ba=!0,Ha(e)}(cc.bind(null,e)):Ha(cc.bind(null,e)),ia((function(){0===(6&Al)&&za()})),n=null;else{switch(wt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Jl=-1,ec=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===Ll?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var a=Al;Al|=2;var i=mc();for(Ll===e&&Ml===t||(Ul=null,Vl=Xe()+500,hc(e,t));;)try{bc();break}catch(l){pc(e,l)}So(),Ol.current=i,Al=a,null!==Tl?t=0:(Ll=null,Ml=0,t=jl)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=ic(e,a))),1===t)throw n=Fl,hc(e,0),lc(e,r),ac(e,Xe()),n;if(6===t)lc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=vc(e,r))&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t))throw n=Fl,hc(e,0),lc(e,r),ac(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Sc(e,Hl,Ul);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(Sc.bind(null,e,Hl,Ul),t);break}Sc(e,Hl,Ul);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-it(r);i=1<<s,(s=t[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rl(r/1960))-r)){e.timeoutHandle=ra(Sc.bind(null,e,Hl,Ul),r);break}Sc(e,Hl,Ul);break;default:throw Error(o(329))}}}return ac(e,Xe()),e.callbackNode===n?oc.bind(null,e):null}function ic(e,t){var n=Wl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Hl,Hl=n,null!==t&&sc(t)),e}function sc(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function lc(e,t){for(t&=~Bl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(o(327));_c();var t=ft(e,0);if(0===(1&t))return ac(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Fl,hc(e,0),lc(e,t),ac(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sc(e,Hl,Ul),ac(e,Xe()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=Xe()+500,Ba&&za())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&Al)&&_c();var t=Al;Al|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Al=t))&&za()}}function fc(){Il=Pl.current,Ra(Pl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Tl)for(n=Tl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ia();break;case 3:oi(),Ra(Aa),Ra(Ca),di();break;case 5:si(r);break;case 4:oi();break;case 13:case 19:Ra(li);break;case 10:_o(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ll=e,Tl=e=Pc(e.current,null),Ml=Il=t,jl=0,Fl=null,Bl=Dl=Nl=0,Hl=Wl=null,null!==ko){for(t=0;t<ko.length;t++)if(null!==(r=(n=ko[t]).interleaved)){n.interleaved=null;var a=r.next,o=n.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}n.pending=r}ko=null}return e}function pc(e,t){for(;;){var n=Tl;try{if(So(),fi.current=is,yi){for(var r=mi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}yi=!1}if(pi=0,vi=gi=mi=null,bi=!1,wi=0,kl.current=null,null===n||null===n.return){jl=1,Fl=t,Tl=null;break}e:{var i=e,s=n.return,l=n,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=vs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&gs(i,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){gs(i,u,t),gc();break e}c=Error(o(426))}else if(ao&&1&l.mode){var v=vs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ys(v,s,l,0,t),mo(us(c,l));break e}}i=c=us(c,l),4!==jl&&(jl=2),null===Wl?Wl=[i]:Wl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,No(i,ps(0,c,t));break e;case 1:l=c;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,No(i,ms(i,l,t));break e}}i=i.return}while(null!==i)}xc(n)}catch(w){t=w,Tl===n&&null!==n&&(Tl=n=n.return);continue}break}}function mc(){var e=Ol.current;return Ol.current=is,null===e?is:e}function gc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Ll||0===(268435455&Nl)&&0===(268435455&Dl)||lc(Ll,Ml)}function vc(e,t){var n=Al;Al|=2;var r=mc();for(Ll===e&&Ml===t||(Ul=null,hc(e,t));;)try{yc();break}catch(a){pc(e,a)}if(So(),Al=n,Ol.current=r,null!==Tl)throw Error(o(261));return Ll=null,Ml=0,jl}function yc(){for(;null!==Tl;)wc(Tl)}function bc(){for(;null!==Tl&&!Qe();)wc(Tl)}function wc(e){var t=El(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?xc(e):Tl=t,kl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Il)))return void(Tl=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Tl=n);if(null===e)return jl=6,void(Tl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Tl=t);Tl=t=e}while(null!==t);0===jl&&(jl=5)}function Sc(e,t,n){var r=bt,a=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Ql);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),o=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~o}}(e,i),e===Ll&&(Tl=Ll=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Lc(tt,(function(){return _c(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(ea=Ut,hr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(x){n=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==n||0!==a&&3!==f.nodeType||(l=s+a),f!==i||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)h=f,f=p;for(;;){if(f===e)break t;if(h===n&&++u===a&&(l=s),h===i&&++d===r&&(c=s),null!==(p=f.nextSibling))break;h=(f=h).parentNode}f=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ut=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){Rc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ta),Ut=!!ea,ta=ea=null,e.current=n,bl(n,e,a),$e(),Al=l,bt=s,Cl.transition=i}else e.current=n;if(ql&&(ql=!1,Ql=e,$l=a),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Kl)throw Kl=!1,e=Yl,Yl=null,e;0!==(1&$l)&&0!==e.tag&&_c(),i=e.pendingLanes,0!==(1&i)?e===Zl?Xl++:(Xl=0,Zl=e):Xl=0,za()}(e,t,n,r)}finally{Cl.transition=a,bt=r}return null}function _c(){if(null!==Ql){var e=wt($l),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Al))throw Error(o(331));var a=Al;for(Al|=4,Js=e.current;null!==Js;){var i=Js,s=i.child;if(0!==(16&Js.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:rl(8,d,i)}var f=d.child;if(null!==f)f.return=d,Js=f;else for(;null!==Js;){var h=(d=Js).sibling,p=d.return;if(il(d),d===u){Js=null;break}if(null!==h){h.return=p,Js=h;break}Js=p}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Js=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Js=s;else e:for(;null!==Js;){if(0!==(2048&(i=Js).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Js=y;break e}Js=i.return}}var b=e.current;for(Js=b;null!==Js;){var w=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Js=w;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(S){Rc(l,l.return,S)}if(l===s){Js=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break e}Js=l.return}}if(Al=a,za(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(S){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Ec(e,t,n){e=jo(e,t=ps(0,t=us(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ac(e,t))}function Rc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=jo(t,e=ms(t,e=us(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ac(t,e));break}}t=t.return}}function Oc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ll===e&&(Ml&n)===n&&(4===jl||3===jl&&(130023424&Ml)===Ml&&500>Xe()-zl?hc(e,0):Bl|=n),ac(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Lo(e,t))&&(vt(e,t,n),ac(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),kc(e,n)}function Lc(e,t){return Ge(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,n,r){return new Tc(e,t,n,r)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Ic(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Fc(n.children,a,i,t);case E:s=8,a|=8;break;case R:return(e=Mc(12,n,t,2|a)).elementType=R,e.lanes=i,e;case A:return(e=Mc(13,n,t,a)).elementType=A,e.lanes=i,e;case L:return(e=Mc(19,n,t,a)).elementType=L,e.lanes=i,e;case I:return Nc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case O:s=10;break e;case k:s=9;break e;case C:s=11;break e;case T:s=14;break e;case M:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Fc(e,t,n,r){return(e=Mc(7,e,r,t)).lanes=n,e}function Nc(e,t,n,r){return(e=Mc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Mc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,a,o,i,s,l){return e=new Wc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function zc(e){if(!e)return ka;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ma(n))return ja(e,n,t)}return t}function Vc(e,t,n,r,a,o,i,s,l){return(e=Hc(n,r,!0,e,0,o,0,s,l)).context=zc(null),n=e.current,(o=Po(r=tc(),a=nc(n))).callback=void 0!==t&&null!==t?t:null,jo(n,o,a),e.current.lanes=a,vt(e,a,r),ac(e,r),e}function Uc(e,t,n,r){var a=t.current,o=tc(),i=nc(a);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Po(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=jo(a,t,i))&&(rc(e,a,i,o),Fo(e,a,i)),i}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Yc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Yc(e,t),(e=e.alternate)&&Yc(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Aa.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Ls(t),po();break;case 5:ii(t);break;case 1:Ma(t.type)&&Fa(t);break;case 4:ai(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Oa(yo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Oa(li,1&li.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Oa(li,1&li.current),null!==(e=Ks(e,t,n))?e.sibling:null);Oa(li,1&li.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oa(li,li.current),r)break;return null;case 22:case 23:return t.lanes=0,Rs(e,t,n)}return Ks(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ao&&0!==(1048576&t.flags)&&Ja(t,Ya,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Us(e,t),e=t.pendingProps;var a=Ta(t,Ca.current);Ro(t,n),a=Ei(null,t,r,e,a,n);var i=Ri();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(r)?(i=!0,Fa(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Mo(t),a.updater=zo,t.stateNode=a,a._reactInternals=t,Yo(t,r,e,n),t=As(null,t,r,!0,i,n)):(t.tag=0,ao&&i&&eo(t),xs(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===T)return 14}return 2}(r),e=vo(r,e),a){case 0:t=ks(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=Ss(null,t,r,e,n);break e;case 14:t=_s(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:vo(r,a),n);case 1:return r=t.type,a=t.pendingProps,Cs(e,t,r,a=t.elementType===r?a:vo(r,a),n);case 3:e:{if(Ls(t),null===e)throw Error(o(387));r=t.pendingProps,a=(i=t.memoizedState).element,Io(e,t),Do(t,r,null,n);var s=t.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ts(e,t,r,n,a=us(Error(o(423)),t));break e}if(r!==a){t=Ts(e,t,r,n,a=us(Error(o(424)),t));break e}for(ro=ca(t.stateNode.containerInfo.firstChild),no=t,ao=!0,oo=null,n=Zo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===a){t=Ks(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return ii(t),null===e&&co(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==i&&na(r,i)&&(t.flags|=32),Os(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Ds(e,t,n);case 4:return ai(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Ss(e,t,r,a=t.elementType===r?a:vo(r,a),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,Oa(yo,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Aa.current){t=Ks(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Po(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Eo(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)s=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Eo(s,n,t),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===t){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}xs(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ro(t,n),r=r(a=Oo(a)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return a=vo(r=t.type,t.pendingProps),_s(e,t,r,a=vo(r.type,a),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:vo(r,a),Us(e,t),t.tag=1,Ma(r)?(e=!0,Fa(t)):e=!1,Ro(t,n),Uo(t,r,a),Yo(t,r,a,n),As(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Rs(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,n,r,a){var o=n._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=Kc(i);s.call(e)}}Uc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Kc(i);o.call(e)}}var i=Vc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[pa]=i.current,zr(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Kc(l);s.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pa]=l.current,zr(8===e.nodeType?e.parentNode:e),dc((function(){Uc(t,l,n,r)})),l}(n,t,e,a,r);return Kc(i)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Uc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Uc(null,e,null,null)})),t[pa]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Nt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ac(t,Xe()),0===(6&Al)&&(Vl=Xe()+500,za()))}break;case 13:dc((function(){var t=Lo(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},St=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Lo(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},Et=function(){return bt},Rt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Se=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=xa(r);if(!a)throw Error(o(90));G(r),Z(r,a)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ae=dc;var tu={usingClientEntryPoint:!1,Events:[ba,wa,xa,Oe,ke,uc]},nu={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{at=au.inject(ru),ot=au}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,r="",a=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,a,0,i,s),e[pa]=t.current,zr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new $c(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(o(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pa]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},1153:(e,t,n)=>{"use strict";var r=n(5043),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,r){var a,o={},i=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)S.call(t,a)&&!E.hasOwnProperty(a)&&(o[a]=t[a]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===o[a]&&(o[a]=l[a]);return{$$typeof:n,type:e,key:i,ref:s,props:o,_owner:_.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return i=i(l=e),e=""===o?"."+C(l,0):o,x(i)?(a="",null!=e&&(a=e.replace(k,"$&/")+"/"),A(i,t,a,"",(function(e){return e}))):null!=i&&(O(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(k,"$&/")+"/")+e)),t.push(i)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+C(s=e[c],c);l+=A(s,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=A(s=s.value,t,a,u=o+C(s,c++),i);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var r=[],a=0;return A(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},I={transition:null},P={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};t.Children={map:L,forEach:function(e,t,n){L(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,s=_.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)S.call(t,c)&&!E.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:o,ref:i,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=R,t.createFactory=function(e){var t=R.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<o(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<a&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<a&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,I(S);else{var t=r(u);null!==t&&P(x,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(O),O=-1),p=!0;var o=h;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var i=f.callback;if("function"===typeof i){f.callback=null,h=f.priorityLevel;var s=i(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&a(c),w(n)}else a(c);f=r(c)}if(null!==f)var l=!0;else{var d=r(u);null!==d&&P(x,d.startTime-n),l=!1}return l}finally{f=null,h=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,R=null,O=-1,k=5,C=-1;function A(){return!(t.unstable_now()-C<k)}function L(){if(null!==R){var e=t.unstable_now();C=e;var n=!0;try{n=R(!0,e)}finally{n?_():(E=!1,R=null)}}else E=!1}if("function"===typeof b)_=function(){b(L)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,M=T.port2;T.port1.onmessage=L,_=function(){M.postMessage(null)}}else _=function(){v(L,0)};function I(e){R=e,E||(E=!0,_())}function P(e,n){O=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(O),O=-1):g=!0,P(x,o-i))):(e.sortIndex=s,n(c,e),m||p||(m=!0,I(S))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},5995:e=>{function t(e){return e}e.exports=function(e,n){if(null==e)return e;var r=(n=n||{}).width||50,a="string"===typeof n.indent?n.indent:"  ",o=n.newline||"\n"+a,i="function"===typeof n.escape?n.escape:t,s=".{1,"+r+"}";!0!==n.cut&&(s+="([\\s\u200b]+|$)|[^\\s\u200b]+?([\\s\u200b]+|$)");var l=new RegExp(s,"g"),c=a+(e.match(l)||[]).map((function(e){return"\n"===e.slice(-1)&&(e=e.slice(0,e.length-1)),i(e)})).join(o);return!0===n.trim&&(c=function(e){const t=e.split("\n").map((e=>function(e){let t=e.length-1,n=e[t];for(;" "===n||"\t"===n;)n=e[--t];return e.substring(0,t+1)}(e)));return t.join("\n")}(c)),c}},2722:e=>{"use strict";e.exports=JSON.parse('["Complex64Array","Complex128Array"]')},2447:e=>{"use strict";e.exports=JSON.parse('["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]')},9608:e=>{"use strict";e.exports=JSON.parse('["console","external","frame","frameElement","frames","innerHeight","innerWidth","outerHeight","outerWidth","pageXOffset","pageYOffset","parent","scrollLeft","scrollTop","scrollX","scrollY","self","webkitIndexedDB","webkitStorageInfo","window"]')},9547:e=>{"use strict";e.exports=JSON.parse('["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]')}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(5043),t=n(4391),r=n(3789),a=n.n(r),o=n(9121),i=n.n(o);const s=i().MAX+1;class l{constructor(e){this.mt=void 0,this.bt=void 0,this.mt=i().factory({seed:e}),this.bt=a().factory({state:this.mt.state,copy:!1})}chance(e){return this.mt()<e*s}uniform(e){let{min:t=0,max:n=1}=e;return t+this.mt()*(n-t)/s}beta(e){let{a:t,b:n,min:r=0,max:a=1}=e;return r+this.bt(t,n)*(a-r)}uniformInt(e){return Math.floor(this.uniform(e))}betaInt(e){return Math.floor(this.beta(e))}uniformChoice(e){return e[this.uniformInt({max:e.length})]}betaChoice(e,t){let{a:n,b:r}=t;return e[this.betaInt({a:n,b:r,max:e.length})]}weightedChoice(e){const t=e.filter((e=>e.bid>0)),n=t.reduce(((e,t)=>e+t.bid),0);let r=this.uniform({max:n});for(const{bid:a,item:o}of t)if(r-=a,r<=0)return o;return t[t.length-1].item}shuffle(e){const t=[];for(let n=0;n<e.length;n++){const r=Math.floor(this.mt()*n/s);n!==r&&(t[n]=t[r]),t[r]=e[n]}return t}}var c=function(e){return e[e.init=0]="init",e[e.partition=1]="partition",e[e.weave=2]="weave",e[e.flood=3]="flood",e[e.pickSpawn=4]="pickSpawn",e[e.pickArchitect=5]="pickArchitect",e[e.pearl=6]="pearl",e[e.prime=7]="prime",e[e.rough=8]="rough",e[e.placeRechargeSeam=9]="placeRechargeSeam",e[e.placeBuildings=10]="placeBuildings",e[e.placeCrystals=11]="placeCrystals",e[e.placeOre=12]="placeOre",e[e.placeLandslides=13]="placeLandslides",e[e.placeErosion=14]="placeErosion",e[e.placeEntities=15]="placeEntities",e[e.lore=16]="lore",e[e.mod=17]="mod",e[e.script=18]="script",e[e.monsterSpawnScript=19]="monsterSpawnScript",e[e.brace=20]="brace",e[e.height=21]="height",e[e.placeSlugHoles=22]="placeSlugHoles",e[e.slugSpawnScript=23]="slugSpawnScript",e}(c||{});let u=function(e){return e[e.premise=0]="premise",e[e.orders=1]="orders",e[e.success=2]="success",e[e.failure=3]="failure",e[e.foundHoard=4]="foundHoard",e[e.foundHq=5]="foundHq",e[e.foundAllLostMiners=6]="foundAllLostMiners",e[e.nomadsSettled=7]="nomadsSettled",e[e.foundSlugNest=8]="foundSlugNest",e[e.name=9]="name",e[e.failureBaseDestroyed=10]="failureBaseDestroyed",e[e.buildAndPower=11]="buildAndPower",e[e.seismicForeshadow=12]="seismicForeshadow",e[e.pandora=13]="pandora",e}({});const d=Symbol("sealed");class f{constructor(e){this.seed=void 0,this.boxes=void 0,this.pickArchitect=e=>this.prng(c.pickArchitect,e),this.mod=e=>this.prng(c.mod,e),this.prime=e=>this.prng(c.prime,e),this.pearl=e=>this.prng(c.pearl,e),this.rough=e=>this.prng(c.rough,e),this.placeRechargeSeam=e=>this.prng(c.placeRechargeSeam,e),this.placeBuildings=e=>this.prng(c.placeBuildings,e),this.placeCrystals=e=>this.prng(c.placeCrystals,e),this.placeOre=e=>this.prng(c.placeOre,e),this.placeSlugHoles=e=>this.prng(c.placeSlugHoles,e),this.placeLandslides=e=>this.prng(c.placeLandslides,e),this.placeErosion=e=>this.prng(c.placeErosion,e),this.placeEntities=e=>this.prng(c.placeEntities,e),this.lore=e=>this.prng(c.lore,e),this.script=e=>this.prng(c.script,e),this.monsterSpawnScript=e=>this.prng(c.monsterSpawnScript,e),this.slugSpawnScript=e=>this.prng(c.slugSpawnScript,e),this.seed=e,0===e&&(e=1999);const t=i().factory({seed:e}),n=Object.keys(c).length,r=[];for(let a=0;a<n;a++)r[a]={seed:t(),rngs:[]};this.boxes=r}prng(e,t){const n=this.boxes[e];let r=n.rngs[t];if(r){if(Object.is(r,d))throw new Error("prng at [".concat(e,",").concat(t,"] was sealed"));return r}const a=(n.seed+1999*t+s)%s;return r=new l(a),n.rngs[t]=r,r}init(e){return this.prng(c.init,e)}seal(){this.boxes.forEach((e=>e.rngs.forEach(((t,n)=>e.rngs[n]=d))))}get partition(){return this.prng(c.partition,0)}get weave(){return this.prng(c.weave,0)}get flood(){return this.prng(c.flood,0)}get pickSpawn(){return this.prng(c.pickSpawn,0)}get brace(){return this.prng(c.brace,0)}get height(){return this.prng(c.height,0)}}var h=function(e){return e[e.biome=0]="biome",e[e.targetSize=1]="targetSize",e[e.hasMonsters=2]="hasMonsters",e[e.flood=3]="flood",e[e.heightTargetRange=4]="heightTargetRange",e[e.hasSlugs=5]="hasSlugs",e[e.hasAirLimit=6]="hasAirLimit",e}(h||{});const p={baseplateMaxOblongness:3,baseplateMaxRatioOfSize:.33,caveCount:20,optimalAuxiliaryPathCount:2,randomAuxiliaryPathCount:3,auxiliaryPathMinAngle:Math.PI/4,anchorGravity:1,anchorWhimsy:1,planWhimsy:1,caveBaroqueness:.16,hallBaroqueness:.07,caveCrystalRichness:{base:.16,hops:.32,order:.32},hallCrystalRichness:{base:.07,hops:0,order:0},caveOreRichness:{base:1.19,hops:-.16,order:-.08},hallOreRichness:{base:.12,hops:0,order:0},monsterSpawnRate:{base:.3,hops:.56,order:.6},monsterWaveSize:{base:1.75,hops:2,order:3},architects:{},caveCrystalSeamBias:.05,hallCrystalSeamBias:.05,caveOreSeamBias:.05,hallOreSeamBias:.05,hallHasSlugHoleChance:0,stratascosity:0,strataplanity:3,caveHasLandslidesChance:.4,hallHasLandslidesChance:.8,caveLandslideCooldownRange:{min:15,max:120},hallLandslideCooldownRange:{min:30,max:150},crystalGoalRatio:.2,airSafetyFactor:2,globalHostilesCooldown:0,globalHostilesCap:15},m={rock:{caveHasRechargeSeamChance:.07,hallHasRechargeSeamChance:.02,caveHasSlugHoleChance:.05,caveMaxSlope:75,hallMaxSlope:90,voidMaxSlope:120,borderMaxSlope:200},ice:{caveHasRechargeSeamChance:.07,hallHasRechargeSeamChance:.07,caveHasSlugHoleChance:0,caveMaxSlope:30,hallMaxSlope:30,voidMaxSlope:40,borderMaxSlope:100},lava:{caveHasRechargeSeamChance:.1,hallHasRechargeSeamChance:.04,caveHasSlugHoleChance:.01,caveMaxSlope:60,hallMaxSlope:90,voidMaxSlope:120,borderMaxSlope:200}};function g(e,t){const n=e.init(h.flood),r=n.betaInt({a:1.4,b:1.4,...{rock:{min:0,max:8},ice:{min:0,max:20},lava:{min:0,max:4}}[t]}),a=r>3?n.uniformInt({min:1,max:r/2}):1,o=n.betaInt({a:1.4,b:1.4,...{rock:{min:0,max:4},ice:{min:0,max:2},lava:{min:4,max:16}}[t]});return{waterPlans:r,waterLakes:a,lavaPlans:o,lavaLakes:o>3?n.uniformInt({min:1,max:Math.min(o/2,3)}):1,erosionPlans:o>0?n.betaInt({rock:{a:.8,b:1.4,min:0,max:6},ice:{a:.5,b:1.8,min:0,max:4},lava:{a:1.4,b:1.4,min:0,max:16}}[t]):0}}function v(e){const t=new f(e.seed),n={biome:t.init(h.biome).uniformChoice(["rock","ice","lava"]),hasMonsters:t.init(h.hasMonsters).chance(.75),targetSize:t.init(h.targetSize).uniformInt({min:50,max:78}),...e},r=t.init(h.hasAirLimit).chance(.75),a=t.init(h.hasSlugs).chance({rock:.25,ice:.01,lava:.05}[n.biome]),o=t.init(h.heightTargetRange).betaInt({rock:{a:3,b:1,min:100,max:500},ice:{a:1,b:3,min:100,max:500},lava:{a:2,b:1.5,min:100,max:500}}[n.biome]);return{...p,...m[n.biome],...g(t,n.biome),hasAirLimit:r,hasSlugs:a,heightTargetRange:o,...n}}const y={contextInput:"style_contextInput__1OoGc",section:"style_section__UU5kL",subsection:"style_subsection__V6nKB",inputRow:"style_inputRow__e-kmi",icon:"style_icon__w+PGc",inactive:"style_inactive__-rc9v",invisible:"style_invisible__I4pew",override:"style_override__ZXWWz",seed:"style_seed__gS1FQ",architectCount:"style_architectCount__wZQ1S",showAdvanced:"style_showAdvanced__sTHS2",curve:"style_curve__v3DHl"},b=[0,0],w=[0,-1],x=[1,-1],S=[1,0],_=[1,1],E=[0,1],R=[-1,1],O=[-1,0],k=[-1,-1],C=[w,E,S,O],A=[w,x,S,_,E,R,O,k];function L(e){let[t,n]=e;return{x:t,y:n}}function T(e,t){let[n,r]=e;if(!t.length)return null;let[a,o]=t[0],i=1/0;for(const[s,l]of t){const e=(n-s)*(n-s)+(r-l)*(r-l);e<i&&([a,o,i]=[s,l,e])}return[a,o]}function M(e,t){let[n,r]=e,[a,o]=t;return[n+a,r+o]}function*I(e,t){let n=Math.floor(e[0]),r=Math.floor(e[1]);const a=Math.floor(t[0]),o=Math.floor(t[1]),i=Math.abs(a-n),s=a>n?1:-1,l=-Math.abs(o-r),c=o>r?1:-1;let u=i+l;for(;yield[n,r],n!==a||r!==o;){const e=2*u,t=e>=l,d=e<=i;if(t){if(n===a)break;u+=l,n+=s}if(d){if(t&&(yield[n,r]),r===o)break;u+=i,r+=c}}}function P(e){return(180*e/Math.PI+180)%360-180}function j(e){let[t,n]=e;return[-t,-n]}function F(e){let[t,n]=e;return[n,-t]}function N(e){let[t,n]=e;return[-n,t]}var D=n(579);const B=e=>{let{of:t,choices:n,update:r,initialContext:a,context:o}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("p",{children:t}),(0,D.jsx)("div",{className:y.inputRow,children:n.map((e=>{const n=[y.choice],i=a[t]===e;i&&n.push(y.override);const s=(null===o||void 0===o?void 0:o[t])===e;return n.push(s?y.active:y.inactive),(0,D.jsx)("button",{className:n.join(" "),onClick:()=>{r({[t]:i?void 0:e})},children:"".concat(e)},"".concat(e))}))})]})},W=e=>{let{of:t,min:n,max:r,step:a,update:o,initialContext:i,context:s}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{children:[t,":"]}),(0,D.jsxs)("p",{children:[s[t].base.toFixed(2),", ",s[t].hops.toFixed(2),","," ",s[t].order.toFixed(2)]}),(0,D.jsxs)("div",{className:y.inputRow,children:[(0,D.jsx)("div",{className:y.curve,children:["base","hops","order"].map((e=>{const i=s[t][e];return(0,D.jsx)("input",{className:y.slider,type:"range",min:n,max:r,step:a,value:i,style:{"--completion":"".concat(100*(i-n)/(r-n),"%")},onChange:n=>function(e,n){o({[t]:{...s[t],[e]:n}})}(e,n.target.valueAsNumber)},e)}))}),t in i?(0,D.jsx)("button",{className:"".concat(y.icon," ").concat(y.override),onClick:()=>o({[t]:void 0}),children:"undo"}):(0,D.jsx)("div",{className:"".concat(y.icon," ").concat(y.invisible)})]})]})},H=e=>{let{of:t,min:n,max:r,percent:a,angle:o,step:i,zeroLabel:s,update:l,initialContext:c,context:u}=e;const d=u[t],f=s&&0===d?s:a?(0,D.jsxs)(D.Fragment,{children:[(100*d).toFixed(),"%"]}):o?(0,D.jsxs)(D.Fragment,{children:[P(d).toFixed(),"\xb0"]}):d;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{children:[t,": ",f]}),(0,D.jsxs)("div",{className:y.inputRow,children:[(0,D.jsx)("input",{className:y.slider,type:"range",min:n,max:r,step:i||(a?.01:o?Math.PI/36:1),value:d,style:{"--completion":"".concat(100*(d-n)/(r-n),"%")},onChange:e=>l({[t]:e.target.valueAsNumber})}),t in c?(0,D.jsx)("button",{className:"".concat(y.icon," ").concat(y.override),onClick:()=>l({[t]:void 0}),children:"undo"}):(0,D.jsx)("div",{className:"".concat(y.icon," ").concat(y.invisible)})]})]})},z=e=>{let{of:t,min:n,max:r,step:a,zeroLabel:o,update:i,initialContext:s,context:l}=e;const c=Math.log2(l[t]),u=o&&0===c?o:c<0?"1/".concat(Math.pow(2,-c).toFixed()):l[t].toFixed();return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("p",{children:[t,": ",u]}),(0,D.jsxs)("div",{className:y.inputRow,children:[(0,D.jsx)("input",{className:y.slider,type:"range",min:n,max:r,step:a||1,value:c,style:{"--completion":"".concat(100*(c-n)/(r-n),"%")},onChange:e=>i({[t]:Math.pow(2,e.target.valueAsNumber)})}),t in s?(0,D.jsx)("button",{className:"".concat(y.icon," ").concat(y.override),onClick:()=>i({[t]:void 0}),children:"undo"}):(0,D.jsx)("div",{className:"".concat(y.icon," ").concat(y.invisible)})]})]})};function V(e,t){for(let n=0;n<e.length-1;n++)t(e[n],e[n+1],n)}function U(e,t){const n=[];return V(e,((e,r,a)=>n.push(t(e,r,a)))),n}function K(e){return e.filter((e=>e))}class Y{constructor(){this.phrases=[],this.states=new Set}phrase(e,t){const n={id:this.phrases.length,text:e,requires:null!==t&&void 0!==t?t:null,after:[],before:[],reachableStates:{},lane:-1};return this.phrases.push(n),t&&"start"!==t&&"end"!==t&&this.states.add(t),n}}function G(e,t){let n=0,r=0,a=[];for(;;)if(n>=e.length){if(r>=t.length)return a;a.push(t[r++])}else r>=t.length||e[n].id<t[r].id?a.push(e[n++]):e[n].id>t[r].id?a.push(t[r++]):(a.push(e[n++]),r++)}class q{constructor(e,t,n,r){this.v=void 0,this.heads=void 0,this.tails=void 0,this.skip=void 0,this.v=e,this.heads=t,this.tails=n,this.skip=r}static coerce(e,t){const n=[],r=[];for(const s of t)s instanceof q?r.push(s):"function"===typeof s?n.push(s):n.push((()=>s));if(0===r.length){const t=[e.phrase(n)];return new q(e,t,t,!1)}const a=r.reduce(((e,t)=>G(e,t.heads)),[]),o=r.reduce(((e,t)=>G(e,t.tails)),[]),i=r.some((e=>e.skip));if(n.length>0){const t=e.phrase(n);a.push(t),o.push(t)}return new q(e,a,o,i)}then(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=q.coerce(this.v,t);for(const i of this.tails)for(const e of r.heads)o=e,(a=i).after.push(o),o.before.push(a);var a,o;return new q(this.v,this.skip?G(this.heads,r.heads):this.heads,r.skip?G(this.tails,r.tails):r.tails,this.skip&&r.skip)}}function Q(e){const t={};for(const r of e.after)Object.assign(t,r.reachableStates);if(0===Object.keys(t).length)return e.requires?{[e.requires]:!0}:{};if(!e.requires)return t;const n={};for(const r in t){const t=r.split(",");t.some((t=>t===e.requires))||(t.push(e.requires),t.sort(),n[t.join(",")]=!0)}return n}const $={".":!0,"!":!0,"?":!0,"\n":!0},X={"\n":!0},Z={",":!0,".":!0,"!":!0,"?":!0,"\n":!0};class J extends Error{}class ee{constructor(e,t,n,r){this.name=void 0,this.start=void 0,this.phrases=void 0,this.states=void 0,this.name=e,this.start=t,this.phrases=n,this.states=r}generate(e,t,n){const r=[...this.states,"start","end"],a={start:!0,end:!0};for(const i of this.states)t[i]&&(a[i]=!0);const o=[this.start];for(;;){const t=o[o.length-1];if("end"===t.requires)break;t.requires&&(a[t.requires]=!1);const n=r.filter((e=>a[e])).sort().join(","),i=t.after.filter((e=>n in e.reachableStates));if(0===i.length)throw new J("".concat(this.name,": No continuation has ").concat(n," at phrase ").concat(t.id));o.push(e.uniformChoice(i))}return function(e,t){const n=[];let r=!0,a=!1;for(let i=0;i<e.length;i++){var o;const s=null===(o=e[i])||void 0===o?void 0:o.call(e,{chosen:e,index:i,format:t});if(!s)continue;a&&!(s.charAt(0)in Z)&&n.push(" "),r?(n.push(s[0].toUpperCase()),n.push(s.slice(1))):n.push(s);const l=s.charAt(s.length-1);r=l in $,a=!(l in X)}return n.join("")}(o.map((t=>t.text.length?e.uniformChoice(t.text):null)),n)}}function te(e,t){const n=new Y;t({pg:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return q.coerce(n,t)},state:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const a=t.map((e=>n.phrase([],e)));return new q(n,a,a,!1)},start:new q(n,[],[n.phrase([],"start")],!1),end:new q(n,[n.phrase([],"end")],[],!1),cut:new q(n,[],[],!1),skip:new q(n,[],[],!0)});const r=function(e){const t=[],n=e.filter((e=>0===e.before.length)),r=[];for(;n.length>0;){const e=n.shift();if(void 0!==t[e.id])continue;const a=e.before.filter((e=>!(void 0!==t[e.id])));a.length>0?n.unshift(...a,e):(t[e.id]=r.length,r.push({...e,id:r.length}),n.unshift(...e.after))}return r.forEach((e=>{e.after=e.after.map((e=>r[t[e.id]])).sort(((e,t)=>e.id-t.id)),e.before=e.before.map((e=>r[t[e.id]])).sort(((e,t)=>e.id-t.id))})),r}(n.phrases);!function(e){for(let t=e.length-1;t>=0;t--){const n=e[t];n.reachableStates=Q(n)}}(r);const a=r.find((e=>"start"===e.requires)),o=Array.from(n.states.values()).sort();return new ee(e,a,r,o)}const ne=["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],re=["twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function ae(e){if(e>999||e<0)return e.toString();if(0===e)return"zero";const t=[];return e>=100&&(t.push("".concat(ae(Math.floor(e/100))," hundred")),e%=100),e>=20&&(t.push(re[Math.floor(e/10)-2]),e%=10),e>0&&(t.push(ne[e-1]),e=0),t.join(" ")}function oe(e,t){return 2===e?"both":t(ae(e))}const ie=te("Build and Power First Geological Center",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("We're getting those readings already!","The first scans are coming in now.").then((e=>{let{format:{remainingCount:t}}=e;return"Just ".concat(ae(t)," to go!")}),(e=>{let{format:{remainingCount:t}}=e;return"Now just build ".concat(ae(t)," more.")}),(e=>{let{format:{remainingCount:t}}=e;return"".concat(ae(t)," more like that and we're good to go!")})).then(i,n("hasMonsters").then(i,"Be sure to keep it defended.","You may want to build some Electric Fences around it.")).then(a)})),se=te("Build and Power Penultimate Geological Center",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Good work!","Well done!").then("Just one more to go!").then(a)})),le=te("Build and Power Last Geological Center",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Well done!","Outstanding!").then("We're getting all the data we need now.","Our geologists will review these scans immediately.").then(a)})),ce=te("Build and Power First Support Station",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("It's cleaning up the air already.","The air feels cleaner already.").then((e=>{let{format:{remainingCount:t}}=e;return"Just ".concat(ae(t)," to go!")}),(e=>{let{format:{remainingCount:t}}=e;return"Now just build ".concat(ae(t)," more.")}),(e=>{let{format:{remainingCount:t}}=e;return"".concat(ae(t)," more like that and we're good to go!")})).then(i,n("hasMonsters").then("Be sure to keep it defended.")).then(a)})),ue=te("Build and Power Penultimate Support Station",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Good work!","Well done!").then("Just one more to go!","We only need one more.").then(a)})),de=te("Build and Power Last Support Station",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Well done!","Outstanding!").then("This should handle the atmosphere.").then(a)}));function fe(e){return"aimedAt"in e?Math.atan2(e.aimedAt[1]-e.y,e.aimedAt[0]-e.x):"facing"in e?Math.atan2(e.facing[1],e.facing[0]):"yaw"in e?e.yaw:void 0}const he=300,pe={z:0,pitch:0,yaw:0,roll:0,scaleX:1,scaleY:1,scaleZ:1};function me(e){var t,n,r,a,o,i,s,l,c,u;return{x:e.x,y:e.y,z:null!==(t=e.z)&&void 0!==t?t:pe.z,pitch:null!==(n=e.pitch)&&void 0!==n?n:pe.pitch,yaw:null!==(r=fe(e))&&void 0!==r?r:pe.yaw,roll:null!==(a=e.roll)&&void 0!==a?a:pe.roll,scaleX:null!==(o=null!==(i=e.scaleX)&&void 0!==i?i:e.scale)&&void 0!==o?o:pe.scaleX,scaleY:null!==(s=null!==(l=e.scaleY)&&void 0!==l?l:e.scale)&&void 0!==s?s:pe.scaleY,scaleZ:null!==(c=null!==(u=e.scaleZ)&&void 0!==u?u:e.scale)&&void 0!==c?c:pe.scaleZ}}const ge=e=>me({...e,x:e.x+.5,y:e.y+.5});function ve(e){var t;return me({x:e.rng.uniform({})+e.x,y:e.rng.uniform({})+e.y,yaw:null!==(t=fe(e))&&void 0!==t?t:e.rng.uniform({min:-Math.PI,max:Math.PI}),scale:e.scale})}function ye(e,t,n,r,a,o){return(Math.max(n,r,a,o)+Math.min(n,r,a,o))/2}function be(e,t,n,r,a,o){if(t<=1-e){return n+(r-n)*e+(a-n)*t}return o+(a-o)*(e-1)+(r-o)*(t-1)}function we(e){var t,n,r,a,o,i;let{position:s,tileOffset:[l,c],heightMap:u,entityOffset:d,floorMethod:f="entity"}=e;const{scaleX:h,scaleY:p,scaleZ:m}=s,g=(s.x+l)*he+(null!==(t=null===d||void 0===d?void 0:d.x)&&void 0!==t?t:0),v=(s.y+c)*he+(null!==(n=null===d||void 0===d?void 0:d.y)&&void 0!==n?n:0),y=s.z*he+(null!==(r=null===d||void 0===d?void 0:d.z)&&void 0!==r?r:0)+function(e,t,n,r){const a=Math.floor(e),o=Math.floor(t);return(0,{entity:be,building:ye}[r])(e-a,t-o,n.get(a,o),n.get(a+1,o),n.get(a,o+1),n.get(a+1,o+1))}(s.x,s.y,u,f),b=P(s.pitch+(null!==(a=null===d||void 0===d?void 0:d.pitch)&&void 0!==a?a:0)),w=P(s.yaw+(null!==(o=null===d||void 0===d?void 0:d.yaw)&&void 0!==o?o:0)),x=P(s.roll+(null!==(i=null===d||void 0===d?void 0:d.roll)&&void 0!==i?i:0));return"Translation: X=".concat(g.toFixed(3)," Y=").concat(v.toFixed(3)," Z=").concat(y.toFixed(3)," ")+"Rotation: P=".concat(b.toFixed(6)," Y=").concat(w.toFixed(6)," R=").concat(x.toFixed(6)," ")+"Scale X=".concat(h.toFixed(3)," Y=").concat(p.toFixed(3)," Z=").concat(m.toFixed(3))}const xe=[b],Se=[b,w],_e=[b,E,w],Ee=[b,S,w],Re=[b,k,O,w];function Oe(e,t){let[n,r]=t;return-1===r?e:1===n?e.map(N):1===r?e.map(j):e.map(F)}class ke{constructor(e,t,n,r,a,o,i,s){this.id=void 0,this.name=void 0,this.inspectAbbrev=void 0,this.maxLevel=void 0,this.ore=void 0,this.crystals=void 0,this.footprint=void 0,this.dependencies=void 0,this.atTile=e=>{var t,n,r;return{...ge(e),template:this,foundation:Oe(this.footprint,e.facing).map((t=>{let[n,r]=t;return[n+e.x,r+e.y]})),level:null!==(t=e.level)&&void 0!==t?t:1,isEssential:null!==(n=e.isEssential)&&void 0!==n&&n,teleportAtStart:null!==(r=e.teleportAtStart)&&void 0!==r&&r}},this.id=e,this.name=t,this.inspectAbbrev=n,this.maxLevel=r,this.ore=a,this.crystals=o,this.footprint=i,this.dependencies=s}}const Ce=new ke("BuildingToolStore_C","Tool Store","Ts",3,0,0,Se,[]),Ae=new ke("BuildingTeleportPad_C","Teleport Pad","Tp",2,8,0,Se,[Ce]),Le=new ke("BuildingDocks_C","Docks","Dk",1,8,0,Se,[Ce]),Te=new ke("BuildingCanteen_C","Canteen","Cn",1,10,1,_e,[Ce]),Me=new ke("BuildingPowerStation_C","Power Station","Ps",2,12,2,Ee,[Ce,Ae]),Ie=new ke("BuildingSupportStation_C","Support Station","Ss",2,15,3,Se,[Ce,Ae,Me]),Pe=new ke("BuildingUpgradeStation_C","Upgrade Station","Us",3,20,3,Se,[Ce,Ae,Me]),je=new ke("BuildingGeologicalCenter_C","Geological Center","Gc",5,20,2,Se,[Ce,Ae,Me]),Fe=new ke("BuildingOreRefinery_C","Ore Refinery","Or",4,20,3,_e,[Ce,Ae,Me]),Ne=new ke("BuildingMiningLaser_C","Mining Laser","Ml",1,10,1,xe,[Ce,Ae,Me,Ie]),De=new ke("BuildingSuperTeleport_C","Super Teleport","St",2,20,4,Re,[Ce,Ae,Me,Ie]),Be=[Ce,Ae,Te,Me,Ie,Pe,je,Fe,Ne,De];const We={yaw:Math.PI/2};let He=function(e){return e[e.NONE=0]="NONE",e[e.RUBBLE=1]="RUBBLE",e[e.DIRT=2]="DIRT",e[e.LOOSE=3]="LOOSE",e[e.SEAM=4]="SEAM",e[e.HARD=5]="HARD",e[e.SOLID=6]="SOLID",e}({});const ze={FLOOR:{id:1,name:"Cavern Floor",canLandslide:!1,crystalYield:0,hardness:He.NONE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:0,trigger:null},LAVA:{id:6,name:"Lava",canLandslide:!1,crystalYield:0,hardness:He.NONE,isFluid:!0,isWall:!1,maxSlope:0,oreYield:0,trigger:null},WATER:{id:11,name:"Water",canLandslide:!1,crystalYield:0,hardness:He.NONE,isFluid:!0,isWall:!1,maxSlope:0,oreYield:0,trigger:null},DIRT:{id:26,name:"Dirt",canLandslide:!0,crystalYield:0,hardness:He.DIRT,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:4,trigger:null},LOOSE_ROCK:{id:30,name:"Loose Rock",canLandslide:!0,crystalYield:0,hardness:He.LOOSE,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:4,trigger:null},HARD_ROCK:{id:34,name:"Hard Rock",canLandslide:!0,crystalYield:0,hardness:He.HARD,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:4,trigger:null},SOLID_ROCK:{id:38,name:"Solid Rock",canLandslide:!1,crystalYield:0,hardness:He.SOLID,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:4,trigger:null},RUBBLE_1:{id:2,name:"Rubble 1",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:1,trigger:null},RUBBLE_2:{id:3,name:"Rubble 2",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:2,trigger:null},RUBBLE_3:{id:4,name:"Rubble 3",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:3,trigger:null},RUBBLE_4:{id:5,name:"Rubble 4",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:4,trigger:null},SLUG_HOLE:{id:12,name:"Slimy Slug Hole",canLandslide:!1,crystalYield:0,hardness:He.NONE,isFluid:!1,isWall:!1,maxSlope:15,oreYield:0,trigger:null},FOUNDATION:{id:14,name:"Foundation",canLandslide:!1,crystalYield:0,hardness:He.NONE,isFluid:!1,isWall:!1,maxSlope:15,oreYield:0,trigger:null},POWER_PATH:{id:24,name:"Power Path",canLandslide:!1,crystalYield:0,hardness:He.NONE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:0,trigger:null},MOIST_DIRT:{id:26,name:"Dirt (Moist)",canLandslide:!0,crystalYield:0,hardness:He.DIRT,isFluid:!1,isWall:!0,maxSlope:0,oreYield:0,trigger:"flood"},WASTE_DIRT:{id:26,name:"Dirt (Waste)",canLandslide:!0,crystalYield:0,hardness:He.DIRT,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:0,trigger:"waste"},WASTE_LOOSE_ROCK:{id:30,name:"Loose Rock (Waste)",canLandslide:!0,crystalYield:0,hardness:He.LOOSE,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:0,trigger:"waste"},WASTE_HARD_ROCK:{id:34,name:"Hard Rock (Waste)",canLandslide:!0,crystalYield:0,hardness:He.HARD,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:0,trigger:"waste"},WASTE_SOLID_ROCK:{id:38,name:"Solid Rock (Waste)",canLandslide:!1,crystalYield:0,hardness:He.SOLID,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:0,trigger:"waste"},WASTE_RUBBLE_1:{id:60,name:"Rubble 1 (Waste)",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:0,trigger:null},WASTE_RUBBLE_2:{id:61,name:"Rubble 2 (Waste)",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:0,trigger:null},WASTE_RUBBLE_3:{id:62,name:"Rubble 3 (Waste)",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:0,trigger:null},WASTE_RUBBLE_4:{id:63,name:"Rubble 4 (Waste)",canLandslide:!1,crystalYield:0,hardness:He.RUBBLE,isFluid:!1,isWall:!1,maxSlope:void 0,oreYield:0,trigger:null},CRYSTAL_SEAM:{id:42,name:"Energy Crystal Seam",canLandslide:!1,crystalYield:4,hardness:He.SEAM,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:4,trigger:null},ORE_SEAM:{id:46,name:"Ore Seam",canLandslide:!1,crystalYield:0,hardness:He.SEAM,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:8,trigger:null},RECHARGE_SEAM:{id:50,name:"Recharge Seam",canLandslide:!1,crystalYield:0,hardness:He.SOLID,isFluid:!1,isWall:!0,maxSlope:void 0,oreYield:0,trigger:null}};class Ve{constructor(e){this.data=void 0,this.data=new Map(e)}copy(){return new Ve(this.data)}get(e,t){return this.data.get("".concat(e,",").concat(t))}set(e,t,n){this.data.set("".concat(e,",").concat(t),n)}delete(e,t){return this.data.delete("".concat(e,",").concat(t))}get size(){return this.data.size}get bounds(){const e={};return this.forEach(((t,n,r)=>{n>=e.left?n+1<=e.right||(e.right=n+1):e.left=n,r>=e.top?r+1<=e.bottom||(e.bottom=r+1):e.top=r})),e}forEach(e){this.data.forEach(((t,n)=>{const[r,a]=n.split(",");e(t,parseInt(r),parseInt(a))}))}map(e){const t=[];return this.forEach((function(){return t.push(e(...arguments))})),t}flatMap(e){const t=[];return this.forEach((function(){return t.push(...e(...arguments))})),t}reduce(e,t){let n=t;return this.forEach((function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e(n,...r)})),n}}function Ue(e,t){let{from:n,to:r,queue:a}=e,{cavern:o,plan:i,tiles:s}=t;const l=new Ve,c=new Ve,u=o.dice.placeBuildings(i.id),d=[];e:for(let f=null!==n&&void 0!==n?n:1;f<(null!==r&&void 0!==r?r:i.innerPearl.length);f++){i.innerPearl[f-1].forEach((e=>{let[t,n]=e;return c.set(t,n,f)}));for(const[e,t]of u.shuffle(i.innerPearl[f].slice()))t:for(let n=0;n<a.length;n++){const r=a[n];for(const o of C){const[i,u]=o;if(c.get(e+i,t+u)!==f)continue;const h=r({x:e,y:t,facing:o});if(!h.foundation.some((e=>{let[t,n]=e;return l.get(t,n)||s.get(t,n)!==ze.FLOOR}))&&(h.template!==Le||s.get(e-i,t-u)===ze.WATER)){if(d.push(h),h.foundation.forEach((e=>{let[t,n]=e;return l.set(t,n,!0)})),a.splice(n,1),0===a.length)break e;break t}}}}return d}function Ke(e){return e.plans[e.anchor]}class Ye{constructor(e,t,n,r){this.id=void 0,this.name=void 0,this.inspectAbbrev=void 0,this.zOffset=void 0,this.id=e,this.name=t,this.inspectAbbrev=n,this.zOffset=r}}const Ge=new Ye("CreatureRockMonster_C","Rock Monster","Rm",138.15),qe=new Ye("CreatureIceMonster_C","Ice Monster","Im",138.15),Qe=new Ye("CreatureLavaMonster_C","Lava Monster","Lm",138.15),$e=new Ye("CreatureSlimySlug_C","Slimy Slug","Sg",62.15);new Ye("CreatureSmallSpider_C","Small Spider","Sr",32.15),new Ye("CreatureBat_C","Bat","Bt",27.15);function Xe(e){switch(e){case"rock":return Ge;case"ice":return qe;case"lava":return Qe}}class Ze{constructor(){this.id=0}create(e){return{sleep:!1,...e,id:this.id++}}}function Je(e,t){for(let n=0;n<e.innerPearl.length;n++){const r=e.innerPearl[n],a=e.id%(r.length-1);for(let e=a;e<r.length;e++)if(t(...r[e]))return r[e];for(let e=0;e<a;e++)if(t(...r[e]))return r[e]}}function et(e,t,n,r,a,o,i){const s=K(t.innerPearl[o].map((n=>{var r;let[o,s]=n;const l=e.tiles.get(o,s);if(!1!==(null===l||void 0===l?void 0:l.isWall)||!a(o,s,l)||null!==(r=e.pearlInnerDex.get(o,s))&&void 0!==r&&r.some(((n,r)=>r!==t.id&&"hall"!==e.plans[r].kind)))return null;const c=C.find((n=>{var r,a;let[l,c]=n;return(null===(r=e.tiles.get(o+l,s+c))||void 0===r?void 0:r.isWall)&&(null===(a=e.pearlInnerDex.get(o+l,s+c))||void 0===a?void 0:a[t.id])===i}));return c?[o,s,c]:null})));return r.shuffle(s).filter(((e,t)=>t<n)).map((e=>{let[t,n,[a,o]]=e;return me({x:t+r.uniform({max:0===a?1:.25})+(a>0?.75:0),y:n+r.uniform({max:0===o?1:.25})+(o>0?.75:0),aimedAt:[t+(0===a?r.uniform({min:-2,max:2}):-5*a),n+(0===o?r.uniform({min:-2,max:2}):-5*o)]})}))}const tt={rock:(e,t,n)=>!n.isFluid,ice:(e,t,n)=>n!==ze.LAVA,lava:(e,t,n)=>n!==ze.WATER},nt={inner:function(e,t,n){for(let o=null!==(r=n.from)&&void 0!==r?r:1;o<(null!==(a=n.to)&&void 0!==a?a:t.innerPearl.length);o++){var r,a;const i=et(e,t,n.count,n.rng,n.filterFn,o,o-1);if(i.length)return i}return[]},outer:function(e,t,n){for(let o=null!==(r=n.to)&&void 0!==r?r:t.innerPearl.length-2;o>=(null!==(a=n.from)&&void 0!==a?a:0);o--){var r,a;const i=et(e,t,n.count,n.rng,n.filterFn,o,o+1);if(i.length)return i}return[]}};function rt(e,t){var n;let{cavern:r,plan:a,creatureFactory:o}=e;if(t.force||r.context.hasMonsters&&"pandora"!==(null===(n=Ke(r).metadata)||void 0===n?void 0:n.tag)){var i;const e=Xe(r.context.biome),n=tt[r.context.biome];return nt[null!==(i=t.placement)&&void 0!==i?i:"outer"](r,a,{...t,filterFn:n}).map((t=>o.create({...t,planId:a.id,template:e,sleep:!0})))}return[]}function at(e,t){var n,r;const a=e.cavern.dice.placeSlugHoles(e.plan.id),o=null!==(n=null===t||void 0===t?void 0:t.count)&&void 0!==n?n:a.chance(e.cavern.context["".concat(e.plan.kind,"HasSlugHoleChance")])?1:0;for(var i=null!==(r=null===t||void 0===t?void 0:t.placements)&&void 0!==r?r:e.plan.innerPearl.flatMap((t=>t.filter((t=>e.tiles.get(...t)===ze.FLOOR)))),s=1;s<=o&&i.length;s++){const[t,n]=a.uniformChoice(i);if(e.tiles.set(t,n,ze.SLUG_HOLE),s===o)return;i=i.filter((e=>{let[r,a]=e;return r<t-1||r>t+1||a<n-1||a>n+1}))}}class ot{constructor(e){this.cooldown=void 0,this.cooldown=e}get key(){return this.cooldown.toFixed(1)}}class it{constructor(e,t){this.cooldown=void 0,this.initialDelay=void 0,this.cooldown=e,this.initialDelay=t}get key(){return"".concat(this.cooldown.toFixed(1),"/").concat(this.initialDelay.toFixed(1))}}function st(e,t){let{cavern:n,plan:r,landslides:a}=t;const o=n.dice.placeLandslides(r.id),i=o.uniform({min:.2,max:.8});r.innerPearl.flatMap((e=>e)).filter((e=>{var t;return!a.get(...e)&&(null===(t=n.tiles.get(...e))||void 0===t?void 0:t.canLandslide)&&o.chance(i)})).forEach((t=>{const n=o.betaInt({...e,a:10*i,b:10*(1-i)});a.set(...t,new ot(n))}))}function lt(e,t){var n,r,a,o;let{cavern:i,plan:s,erosion:l}=e;const c=new it(null!==(n=null===t||void 0===t?void 0:t.cooldown)&&void 0!==n?n:30,null!==(r=null===t||void 0===t?void 0:t.initialDelay)&&void 0!==r?r:10),u=new it(null!==(a=null===t||void 0===t?void 0:t.cooldown)&&void 0!==a?a:30,null!==(o=null===t||void 0===t?void 0:t.initialDelayStartsExposed)&&void 0!==o?o:120);s.innerPearl.forEach((e=>e.forEach((e=>{if(i.erosion.get(...e)){var t;const n=(null===(t=i.discoveryZones.get(...e))||void 0===t?void 0:t.openOnSpawn)&&C.some((t=>i.tiles.get(...M(e,t))===ze.LAVA));l.set(...e,n?u:c)}}))))}function ct(e){switch(e){case ze.SOLID_ROCK:case ze.HARD_ROCK:case ze.LOOSE_ROCK:case ze.DIRT:return!0;default:return!1}}function ut(e,t,n,r,a,o,i){for(let l=i;l>0;){var s;const i=e(),c=r.get(...i);if(l>=4&&(!c||t>0&&ct(c)&&n.chance(t))){r.set(...i,o),l-=4;continue}c||r.set(...i,ze.LOOSE_ROCK);const u=(null!==(s=a.get(...i))&&void 0!==s?s:0)+1;u>=4&&t>=0&&ct(null!==c&&void 0!==c?c:ze.LOOSE_ROCK)?(r.set(...i,o),a.set(...i,u-4)):a.set(...i,u),l--}}function dt(e,t){var n,r,a;const o=e.cavern.dice.placeCrystals(e.plan.id);return ut(null!==(n=null===t||void 0===t?void 0:t.getRandomTile)&&void 0!==n?n:mt(o,e),null!==(r=null===t||void 0===t?void 0:t.seamBias)&&void 0!==r?r:e.cavern.context["".concat(e.plan.kind,"CrystalSeamBias")],o,e.tiles,e.crystals,ze.CRYSTAL_SEAM,null!==(a=null===t||void 0===t?void 0:t.count)&&void 0!==a?a:e.plan.crystals-e.plan.architect.crystalsFromMetadata(e.plan.metadata))}function ft(e,t){var n,r,a;const o=e.cavern.dice.placeOre(e.plan.id);return ut(null!==(n=null===t||void 0===t?void 0:t.getRandomTile)&&void 0!==n?n:mt(o,e),null!==(r=null===t||void 0===t?void 0:t.seamBias)&&void 0!==r?r:e.cavern.context["".concat(e.plan.kind,"OreSeamBias")],o,e.tiles,e.ore,ze.ORE_SEAM,null!==(a=null===t||void 0===t?void 0:t.count)&&void 0!==a?a:e.plan.ore)}function ht(e){return e.plan.outerPearl.flatMap((t=>t.map((t=>{var n;const r=null!==(n=e.tiles.get(...t))&&void 0!==n?n:ze.SOLID_ROCK;if(r.hardness>=He.SOLID&&r!==ze.RECHARGE_SEAM){let n=0,r=0;for(const o of C){var a;const i=null!==(a=e.tiles.get(...M(t,o)))&&void 0!==a?a:ze.SOLID_ROCK;i===ze.RECHARGE_SEAM?n++:i.hardness>=He.SOLID&&r++}return{item:t,bid:n+r>=4?0:r}}return r.hardness===He.DIRT||r.hardness===He.LOOSE||r.hardness===He.HARD?{item:t,bid:1}:{item:t,bid:0}})).filter((e=>{let{bid:t}=e;return t>0})).map((t=>{var n,r,a,o;let{item:i,bid:s}=t;return{item:i,bid:s/((null!==(n=null===(r=e.cavern.pearlInnerDex.get(...i))||void 0===r?void 0:r.reduce((e=>e+1),0))&&void 0!==n?n:0)+(null!==(a=null===(o=e.cavern.pearlOuterDex.get(...i))||void 0===o?void 0:o.reduce((e=>e+1),0))&&void 0!==a?a:0))}}))))}function pt(e,t){return e.filter((e=>{const n=t.get(...e);return n&&(n.hardness===He.DIRT||n.hardness===He.LOOSE||n.hardness===He.HARD)}))}function mt(e,t){const n=pt(t.plan.innerPearl.flatMap((e=>e)),t.tiles);if(n.length>0)return()=>e.uniformChoice(n);const r=ht(t);if(r)return()=>e.weightedChoice(r);throw new Error("No place to put resource!")}function gt(e){return t=>{const n=t.cavern.dice.placeRechargeSeam(t.plan.id),r=null!==e&&void 0!==e?e:n.chance("cave"===t.plan.kind?t.cavern.context.caveHasRechargeSeamChance:t.cavern.context.hallHasRechargeSeamChance)?1:0;if(r>0)for(let e=0;e<r;e++){const e=ht(t).filter((e=>{let{bid:t}=e;return t>=1}));if(0===e.length)console.log("FAILED to place recharge seam in plan: %o",t.plan);else{const[r,a]=n.weightedChoice(e);t.tiles.set(r,a,ze.RECHARGE_SEAM)}}}}function vt(e){let{tiles:t,crystals:n,buildings:r,vehicles:a}=e,o=0;return null===t||void 0===t||t.forEach((e=>o+=e.crystalYield)),null===n||void 0===n||n.forEach((e=>o+=e)),null===r||void 0===r||r.forEach((e=>o+=e.template.crystals)),null===a||void 0===a||a.forEach((e=>o+=e.template.crystals)),o}function yt(e){let{tiles:t,ore:n}=e,r=0;return null===t||void 0===t||t.forEach((e=>r+=e.oreYield)),null===n||void 0===n||n.forEach((e=>r+=e)),r}const[bt,wt]=[{hasLandslidesChance:"caveHasLandslidesChance",landslideCooldownRange:"caveLandslideCooldownRange",baroqueness:"caveBaroqueness"},{hasLandslidesChance:"hallHasLandslidesChance",landslideCooldownRange:"hallLandslideCooldownRange",baroqueness:"hallBaroqueness"}].map((e=>{let{hasLandslidesChance:t,landslideCooldownRange:n,baroqueness:r}=e;return{baroqueness:e=>{let{cavern:t}=e;return t.context[r]},crystalsToPlace:e=>{let{plan:t}=e;return t.crystalRichness*t.perimeter},crystalsFromMetadata:()=>0,ore:e=>{let{plan:t}=e;return t.oreRichness*t.perimeter},prime:()=>{},placeRechargeSeam:gt(),placeBuildings:()=>({}),placeCrystals:e=>dt(e),placeOre:e=>ft(e),placeSlugHoles:e=>at(e),preErode:e=>function(e){let{cavern:t,plan:n,erosion:r}=e;n.innerPearl.forEach((e=>e.forEach((e=>{var n;!1===(null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isFluid)&&r.set(...e,!0)}))))}(e),placeLandslides:e=>{e.cavern.dice.placeLandslides(e.plan.id).chance(e.cavern.context[t])&&st(e.cavern.context[n],e)},placeErosion:e=>lt(e),placeEntities:()=>({}),maxSlope:void 0,claimEventOnDiscover:()=>[]}})),xt={...bt,crystalsToPlace:()=>5,placeRechargeSeam:gt(1),placeBuildings:e=>{const[t]=Ue({queue:[e=>Ce.atTile({...e,teleportAtStart:!0})]},e);t.foundation.forEach((t=>{let[n,r]=t;return e.tiles.set(n,r,ze.FOUNDATION)})),e.openCaveFlags.set(...t.foundation[0],!0);const n={buildings:[t]};return e.plan.id===e.cavern.anchor&&(n.cameraPosition=me({x:t.x,y:t.y,yaw:t.yaw+.75*Math.PI,pitch:Math.PI/4})),n},maxSlope:15};function St(e,t,n){return e.some((e=>t.intersects[e.id]&&e.fluid===n))}function _t(e,t,n){return!e.some((e=>t.intersects[e.id]&&e.fluid!==n))}function Et(e){return e.intersects.reduce(((e,t)=>e+(t?1:0)),0)<=1}function Rt(e,t){const n={};return t.forEach((t=>n[t]="".concat(e,"_").concat(t))),n}function Ot(e,t){let[n,r]=t;return"".concat(r-e.top,",").concat(n-e.left)}function kt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>e)).join("\n")}function Ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"".concat(e,"::;\n").concat(kt(...n),"\n")}let At=function(e){return e[e.CRITICAL=0]="CRITICAL",e[e.OBJECTIVE=1]="OBJECTIVE",e[e.HINT=2]="HINT",e[e.TRIVIAL=3]="TRIVIAL",e}({});const Lt=Rt("objectives",["res","met","won"]);function Tt(e,t){t+=1;const n=e.reduce(((e,t)=>{let{width:n}=t;return e+n}),0),r=e.reduce(((e,t)=>{let{shrink:n}=t;return e+n}),0),a=e.reduce(((e,t)=>{let{grow:n}=t;return e+n}),0);let o=0,i=0;t<n&&r>0?i=(n-t)/e.reduce(((e,t)=>{let{width:n,shrink:r}=t;return e+n*r}),0):t>n&&a>0&&(o=(t-n)/a);let s=[],l=0;for(const{of:c,width:u,shrink:d,grow:f}of e)for(l=l+u*Math.max(0,1-d*i)+f*o;Math.round(l)>0;)s.push(c),l-=1;return s}function Mt(e){let{floor:t,dirt:n,looseRock:r,hardRock:a,solidRock:o,water:i,lava:s}=e;const l=[];return t&&(l[ze.FLOOR.id]=t),n&&(l[ze.DIRT.id]=n),r&&(l[ze.LOOSE_ROCK.id]=r),a&&(l[ze.HARD_ROCK.id]=a),o&&(l[ze.SOLID_ROCK.id]=o),i&&(l[ze.WATER.id]=i),s&&(l[ze.LAVA.id]=s),e=>{var t;return null!==(t=l[e.id])&&void 0!==t?t:null}}function It(e){return Mt({floor:e,dirt:e,looseRock:e,hardRock:e,solidRock:e})}const Pt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>n.weightedChoice(t)(e,n)},jt={VOID:()=>null,ALWAYS_FLOOR:()=>ze.FLOOR,ALWAYS_DIRT:()=>ze.DIRT,ALWAYS_LOOSE_ROCK:()=>ze.LOOSE_ROCK,ALWAYS_HARD_ROCK:()=>ze.HARD_ROCK,ALWAYS_SOLID_ROCK:()=>ze.SOLID_ROCK,ALWAYS_WATER:()=>ze.WATER,ALWAYS_LAVA:()=>ze.LAVA,AT_MOST_DIRT:Mt({looseRock:ze.DIRT,hardRock:ze.DIRT,solidRock:ze.DIRT}),AT_MOST_LOOSE_ROCK:Mt({hardRock:ze.LOOSE_ROCK,solidRock:ze.LOOSE_ROCK}),AT_MOST_HARD_ROCK:Mt({solidRock:ze.HARD_ROCK}),AT_LEAST_DIRT:Mt({floor:ze.DIRT}),AT_LEAST_LOOSE_ROCK:Mt({floor:ze.LOOSE_ROCK,dirt:ze.LOOSE_ROCK}),AT_LEAST_HARD_ROCK:Mt({floor:ze.HARD_ROCK,dirt:ze.HARD_ROCK,looseRock:ze.HARD_ROCK}),FLOOR:It(ze.FLOOR),DIRT:It(ze.DIRT),LOOSE_ROCK:It(ze.LOOSE_ROCK),HARD_ROCK:It(ze.HARD_ROCK),SOLID_ROCK:It(ze.SOLID_ROCK),WATER:It(ze.WATER),LAVA:It(ze.LAVA),DIRT_OR_LOOSE_ROCK:Mt({floor:ze.DIRT,hardRock:ze.LOOSE_ROCK,solidRock:ze.LOOSE_ROCK}),LOOSE_OR_HARD_ROCK:Mt({floor:ze.LOOSE_ROCK,dirt:ze.LOOSE_ROCK,solidRock:ze.HARD_ROCK}),BRIDGE_ON_WATER:Mt({dirt:ze.FLOOR,looseRock:ze.FLOOR,hardRock:ze.FLOOR,solidRock:ze.WATER}),BRIDGE_ON_LAVA:Mt({dirt:ze.FLOOR,looseRock:ze.FLOOR,hardRock:ze.FLOOR,solidRock:ze.LAVA})},Ft={...jt,MIX_DIRT_LOOSE_ROCK:Pt({item:jt.DIRT,bid:1},{item:jt.LOOSE_ROCK,bid:4}),MIX_AT_MOST_DIRT_LOOSE_ROCK:Pt({item:jt.AT_MOST_DIRT,bid:1},{item:jt.AT_MOST_LOOSE_ROCK,bid:4}),MIX_LOOSE_HARD_ROCK:Pt({item:jt.LOOSE_ROCK,bid:4},{item:jt.LOOSE_OR_HARD_ROCK,bid:1}),MIX_FRINGE:Pt({item:jt.AT_MOST_LOOSE_ROCK,bid:10},{item:jt.AT_MOST_HARD_ROCK,bid:1},{item:jt.VOID,bid:4})};function Nt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=function(e){return e.map((e=>({width:1,shrink:0,grow:0,...e})))}(t);return{roughExtent:r[r.length-1].of===Ft.VOID?e=>{const t=Tt(r,e.pearlRadius);for(let n=t.length-1;n>0;n--)if(t[n]!==Ft.VOID)return n;return 0}:e=>e.pearlRadius,rough:e=>{let{cavern:t,plan:n,tiles:a}=e;const o=t.dice.rough(n.id),i=Tt(r,n.pearlRadius);n.innerPearl.forEach(((e,t)=>{e.forEach((e=>{var n;let[r,s]=e;const l=i[t](null!==(n=a.get(r,s))&&void 0!==n?n:ze.SOLID_ROCK,o);l&&a.set(r,s,l)}))}))}}}const Dt="buildAndPower",Bt={...bt,maxSlope:15,placeBuildings(e){let{cavern:t,plan:n,openCaveFlags:r}=e;return n.innerPearl.some((e=>e.some((e=>{var n;return!1===(null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall)&&(r.set(...e,!0),!0)})))),{}}};function Wt(e,t,n,r,a){const o=Rt("gBuPw".concat(e.inspectAbbrev),["built","checkPower","doneCount","done","msgA","msgB","msgC"]),i={tag:Dt,template:e},s=t=>Rt("p".concat(t.id,"BuPw").concat(e.inspectAbbrev),["arrow","building","onBuild"]);return{prime:()=>i,placeRechargeSeam:gt(3),objectives(t){let{cavern:n}=t;const r=n.plans.filter((t=>{var n;return(null===(n=t.metadata)||void 0===n?void 0:n.tag)===Dt&&t.metadata.template===e})).length;return{variables:[{condition:"".concat(o.done,">0"),description:K(["Build and power a ",a>1?"Level ".concat(a," "):"",e.name," in ",1===r&&"the marked cave.",2===r&&"both marked caves.",r>2&&"all ".concat(r," marked caves.")]).join("")}],sufficient:!0}},scriptGlobals(i){let{cavern:l,sb:c}=i;const d=l.plans.filter((t=>{var n;return(null===(n=t.metadata)||void 0===n?void 0:n.tag)===Dt&&t.metadata.template===e})).map((e=>s(e)));c.declareBuilding(o.built),c.when("".concat(e.id,".").concat(a>1?"levelup":"new"),"savebuilding:".concat(o.built,";"),a>1&&"((".concat(o.built,".level<").concat(a,"))return;"),...d.map((e=>"".concat(e.onBuild,";")))),c.declareInt(o.checkPower,0),c.declareInt(o.doneCount,0),d.forEach((e=>{c.declareArrow(e.arrow),c.declareBuilding(e.building)})),c.when("".concat(e.id,".poweron"),"".concat(o.checkPower,"+=1;")),c.when("".concat(e.id,".poweroff"),"".concat(o.checkPower,"+=1;")),c.when("".concat(o.checkPower,"==1"),"".concat(o.doneCount,"=0;"),...d.flatMap((e=>["((".concat(e.building,".powered>0))[hidearrow:").concat(e.arrow,"][showarrow:").concat(e.building,".row,").concat(e.building,".column,").concat(e.arrow,"];"),"((".concat(e.building,".powered>0))").concat(o.doneCount,"+=1;")])),"((".concat(o.checkPower,">1))[").concat(o.checkPower,"=1][").concat(o.checkPower,"=0];")),d.length>1&&(c.declareString(o.msgA,{die:u.buildAndPower,pg:t,format:{remainingCount:d.length-1}}),c.if("".concat(o.doneCount,"==1"),"msg:".concat(o.msgA,";"))),d.length>2&&(c.declareString(o.msgB,{die:u.buildAndPower,pg:n,format:{template:e}}),c.if("".concat(o.doneCount,"==").concat(d.length-1),"msg:".concat(o.msgB,";"))),c.declareInt(o.done,0),c.declareString(o.msgC,{die:u.buildAndPower,pg:r}),c.if("".concat(o.doneCount,">=").concat(d.length),"".concat(Lt.met,"+=1;"),"msg:".concat(o.msgC,";"),"wait:2;","".concat(o.done,"=1;"))},script(e){let{cavern:t,plan:n,sb:r}=e;const a=s(n);if(n.path.baseplates.length>1)throw new Error("Plan must have one baseplate.");const i=n.path.baseplates[0],l=n.innerPearl.flatMap((e=>e)).find((e=>{var n;return!1===(null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall)}));if(!l)throw new Error("No non-wall points found");const c=Ot(t,l),u=t.discoveryZones.get(...l).openOnSpawn;r.if("".concat(u?"time:0":"change:".concat(c)),"showarrow:".concat(c,",").concat(a.arrow,";")),r.event(a.onBuild,"((".concat(o.built,".column<").concat(i.left-t.left,"))return;"),"((".concat(o.built,".column>=").concat(i.right-t.left,"))return;"),"((".concat(o.built,".row<").concat(i.top-t.top,"))return;"),"((".concat(o.built,".row>=").concat(i.bottom-t.top,"))return;"),"savebuilding:".concat(a.building,";"),"".concat(o.checkPower,"+=1;"))}}}function Ht(e,t,n,r,a){let o=0,i=0;for(const l of e){var s;if("cave"!==l.kind||l.architect){if((null===(s=l.metadata)||void 0===s?void 0:s.tag)===Dt){if(l.metadata.template!==t)return 0;if(o+=1,o>=n)return 0}}else i++}return o>0?a:i>=2*n?r:0}const zt=[{name:"BuildAndPower.GC",...Bt,...Wt(je,ie,se,le,5),...Nt({of:Ft.FLOOR,width:2,grow:1},{of:Ft.MIX_DIRT_LOOSE_ROCK,grow:1},{of:Ft.MIX_LOOSE_HARD_ROCK,grow:.5},{of:Ft.VOID,width:0,grow:.5}),caveBid:e=>{let{cavern:t,plans:n,plan:r,hops:a}=e;const o=n[t.anchor].metadata;return!r.fluid&&r.pearlRadius>2&&r.pearlRadius<10&&1===r.path.baseplates.length&&!("hq"===(null===o||void 0===o?void 0:o.tag)&&"fixedComplete"===o.special)&&!("mobFarm"===(null===o||void 0===o?void 0:o.tag))&&!("pandora"===(null===o||void 0===o?void 0:o.tag))&&_t(n,r,null)&&a.length>5&&!a.some((e=>{var t;return(null===(t=n[e].metadata)||void 0===t?void 0:t.tag)===Dt}))&&t.context.planWhimsy*Ht(n,je,3,.04,10)}},{name:"BuildAndPower.SS.ForGasLeak",...Bt,...Wt(Ie,ce,ue,de,1),...Nt({of:Ft.ALWAYS_FLOOR,width:2},{of:Ft.LAVA,width:2,grow:1},{of:Ft.MIX_LOOSE_HARD_ROCK,grow:.5},{of:Ft.HARD_ROCK,width:0,grow:.5},{of:Ft.MIX_FRINGE}),caveBid:e=>{let{cavern:t,plans:n,plan:r,hops:a}=e;const o=n[t.anchor].metadata;return r.fluid===ze.LAVA&&r.pearlRadius>3&&1===r.path.baseplates.length&&"hq"===(null===o||void 0===o?void 0:o.tag)&&"gasLeak"===o.special&&a.length>3&&!a.some((e=>{var t;return(null===(t=n[e].metadata)||void 0===t?void 0:t.tag)===Dt}))&&t.context.planWhimsy*Ht(n,Ie,3,10,5)},preErode:e=>{let{cavern:t,plan:n,erosion:r}=e;n.innerPearl.forEach(((e,n)=>{n<2?e.forEach((e=>{r.delete(...e)})):e.forEach((e=>{var n;!1===(null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isFluid)&&r.set(...e,!0)}))}))},placeErosion:e=>lt(e,{cooldown:45})}],Vt=11102230246251565e-32,Ut=134217729,Kt=(3+8*Vt)*Vt;function Yt(e,t,n,r,a){let o,i,s,l,c=t[0],u=r[0],d=0,f=0;u>c===u>-c?(o=c,c=t[++d]):(o=u,u=r[++f]);let h=0;if(d<e&&f<n)for(u>c===u>-c?(i=c+o,s=o-(i-c),c=t[++d]):(i=u+o,s=o-(i-u),u=r[++f]),o=i,0!==s&&(a[h++]=s);d<e&&f<n;)u>c===u>-c?(i=o+c,l=i-o,s=o-(i-l)+(c-l),c=t[++d]):(i=o+u,l=i-o,s=o-(i-l)+(u-l),u=r[++f]),o=i,0!==s&&(a[h++]=s);for(;d<e;)i=o+c,l=i-o,s=o-(i-l)+(c-l),c=t[++d],o=i,0!==s&&(a[h++]=s);for(;f<n;)i=o+u,l=i-o,s=o-(i-l)+(u-l),u=r[++f],o=i,0!==s&&(a[h++]=s);return 0===o&&0!==h||(a[h++]=o),h}function Gt(e){return new Float64Array(e)}const qt=22204460492503146e-32,Qt=11093356479670487e-47,$t=Gt(4),Xt=Gt(8),Zt=Gt(12),Jt=Gt(16),en=Gt(4);function tn(e,t,n,r,a,o){const i=(t-o)*(n-a),s=(e-a)*(r-o),l=i-s,c=Math.abs(i+s);return Math.abs(l)>=33306690738754716e-32*c?l:-function(e,t,n,r,a,o,i){let s,l,c,u,d,f,h,p,m,g,v,y,b,w,x,S,_,E;const R=e-a,O=n-a,k=t-o,C=r-o;w=R*C,f=Ut*R,h=f-(f-R),p=R-h,f=Ut*C,m=f-(f-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),S=k*O,f=Ut*k,h=f-(f-k),p=k-h,f=Ut*O,m=f-(f-O),g=O-m,_=p*g-(S-h*m-p*m-h*g),v=x-_,d=x-v,$t[0]=x-(v+d)+(d-_),y=w+v,d=y-w,b=w-(y-d)+(v-d),v=b-S,d=b-v,$t[1]=b-(v+d)+(d-S),E=y+v,d=E-y,$t[2]=y-(E-d)+(v-d),$t[3]=E;let A=function(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}(4,$t),L=qt*i;if(A>=L||-A>=L)return A;if(d=e-R,s=e-(R+d)+(d-a),d=n-O,c=n-(O+d)+(d-a),d=t-k,l=t-(k+d)+(d-o),d=r-C,u=r-(C+d)+(d-o),0===s&&0===l&&0===c&&0===u)return A;if(L=Qt*i+Kt*Math.abs(A),A+=R*u+C*s-(k*c+O*l),A>=L||-A>=L)return A;w=s*C,f=Ut*s,h=f-(f-s),p=s-h,f=Ut*C,m=f-(f-C),g=C-m,x=p*g-(w-h*m-p*m-h*g),S=l*O,f=Ut*l,h=f-(f-l),p=l-h,f=Ut*O,m=f-(f-O),g=O-m,_=p*g-(S-h*m-p*m-h*g),v=x-_,d=x-v,en[0]=x-(v+d)+(d-_),y=w+v,d=y-w,b=w-(y-d)+(v-d),v=b-S,d=b-v,en[1]=b-(v+d)+(d-S),E=y+v,d=E-y,en[2]=y-(E-d)+(v-d),en[3]=E;const T=Yt(4,$t,4,en,Xt);w=R*u,f=Ut*R,h=f-(f-R),p=R-h,f=Ut*u,m=f-(f-u),g=u-m,x=p*g-(w-h*m-p*m-h*g),S=k*c,f=Ut*k,h=f-(f-k),p=k-h,f=Ut*c,m=f-(f-c),g=c-m,_=p*g-(S-h*m-p*m-h*g),v=x-_,d=x-v,en[0]=x-(v+d)+(d-_),y=w+v,d=y-w,b=w-(y-d)+(v-d),v=b-S,d=b-v,en[1]=b-(v+d)+(d-S),E=y+v,d=E-y,en[2]=y-(E-d)+(v-d),en[3]=E;const M=Yt(T,Xt,4,en,Zt);w=s*u,f=Ut*s,h=f-(f-s),p=s-h,f=Ut*u,m=f-(f-u),g=u-m,x=p*g-(w-h*m-p*m-h*g),S=l*c,f=Ut*l,h=f-(f-l),p=l-h,f=Ut*c,m=f-(f-c),g=c-m,_=p*g-(S-h*m-p*m-h*g),v=x-_,d=x-v,en[0]=x-(v+d)+(d-_),y=w+v,d=y-w,b=w-(y-d)+(v-d),v=b-S,d=b-v,en[1]=b-(v+d)+(d-S),E=y+v,d=E-y,en[2]=y-(E-d)+(v-d),en[3]=E;const I=Yt(M,Zt,4,en,Jt);return Jt[I-1]}(e,t,n,r,a,o,c)}Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(8),Gt(8),Gt(8),Gt(4),Gt(8),Gt(8),Gt(8),Gt(12);Gt(192),Gt(192);Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(8),Gt(8),Gt(8),Gt(8),Gt(8),Gt(8),Gt(8),Gt(8),Gt(8),Gt(4),Gt(4),Gt(4),Gt(8),Gt(16),Gt(16),Gt(16),Gt(32),Gt(32),Gt(48),Gt(64);Gt(1152),Gt(1152);Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(4),Gt(24),Gt(24),Gt(24),Gt(24),Gt(24),Gt(24),Gt(24),Gt(24),Gt(24),Gt(24),Gt(1152),Gt(1152),Gt(1152),Gt(1152),Gt(1152),Gt(2304),Gt(2304),Gt(3456),Gt(5760),Gt(8),Gt(8),Gt(8),Gt(16),Gt(24),Gt(48),Gt(48),Gt(96),Gt(192),Gt(384),Gt(384),Gt(384),Gt(768);Gt(96),Gt(96),Gt(96),Gt(1152);const nn=Math.pow(2,-52),rn=new Uint32Array(512);class an{static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fn;const r=e.length,a=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];a[2*o]=t(r),a[2*o+1]=n(r)}return new an(a)}constructor(e){const t=e.length>>1;if(t>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:a}=this,o=e.length>>1;let i=1/0,s=1/0,l=-1/0,c=-1/0;for(let E=0;E<o;E++){const t=e[2*E],n=e[2*E+1];t<i&&(i=t),n<s&&(s=n),t>l&&(l=t),n>c&&(c=n),this._ids[E]=E}const u=(i+l)/2,d=(s+c)/2;let f,h,p;for(let E=0,R=1/0;E<o;E++){const t=on(u,d,e[2*E],e[2*E+1]);t<R&&(f=E,R=t)}const m=e[2*f],g=e[2*f+1];for(let E=0,R=1/0;E<o;E++){if(E===f)continue;const t=on(m,g,e[2*E],e[2*E+1]);t<R&&t>0&&(h=E,R=t)}let v=e[2*h],y=e[2*h+1],b=1/0;for(let E=0;E<o;E++){if(E===f||E===h)continue;const t=ln(m,g,v,y,e[2*E],e[2*E+1]);t<b&&(p=E,b=t)}let w=e[2*p],x=e[2*p+1];if(b===1/0){for(let r=0;r<o;r++)this._dists[r]=e[2*r]-e[0]||e[2*r+1]-e[1];cn(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const a=this._ids[e],o=this._dists[a];o>r&&(t[n++]=a,r=o)}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(tn(m,g,v,y,w,x)<0){const e=h,t=v,n=y;h=p,v=w,y=x,p=e,w=t,x=n}const S=function(e,t,n,r,a,o){const i=n-e,s=r-t,l=a-e,c=o-t,u=i*i+s*s,d=l*l+c*c,f=.5/(i*c-s*l);return{x:e+(c*u-s*d)*f,y:t+(i*d-l*u)*f}}(m,g,v,y,w,x);this._cx=S.x,this._cy=S.y;for(let E=0;E<o;E++)this._dists[E]=on(e[2*E],e[2*E+1],S.x,S.y);cn(this._ids,this._dists,0,o-1),this._hullStart=f;let _=3;n[f]=t[p]=h,n[h]=t[f]=p,n[p]=t[h]=f,r[f]=0,r[h]=1,r[p]=2,a.fill(-1),a[this._hashKey(m,g)]=f,a[this._hashKey(v,y)]=h,a[this._hashKey(w,x)]=p,this.trianglesLen=0,this._addTriangle(f,h,p,-1,-1,-1);for(let E,R,O=0;O<this._ids.length;O++){const o=this._ids[O],i=e[2*o],s=e[2*o+1];if(O>0&&Math.abs(i-E)<=nn&&Math.abs(s-R)<=nn)continue;if(E=i,R=s,o===f||o===h||o===p)continue;let l=0;for(let e=0,t=this._hashKey(i,s);e<this._hashSize&&(l=a[(t+e)%this._hashSize],-1===l||l===n[l]);e++);l=t[l];let c,u=l;for(;c=n[u],tn(i,s,e[2*u],e[2*u+1],e[2*c],e[2*c+1])>=0;)if(u=c,u===l){u=-1;break}if(-1===u)continue;let d=this._addTriangle(u,o,n[u],-1,-1,r[u]);r[o]=this._legalize(d+2),r[u]=d,_++;let m=n[u];for(;c=n[m],tn(i,s,e[2*m],e[2*m+1],e[2*c],e[2*c+1])<0;)d=this._addTriangle(m,o,c,r[o],-1,r[m]),r[o]=this._legalize(d+2),n[m]=m,_--,m=c;if(u===l)for(;c=t[u],tn(i,s,e[2*c],e[2*c+1],e[2*u],e[2*u+1])<0;)d=this._addTriangle(c,o,u,-1,r[u],r[c]),this._legalize(d+2),r[c]=d,n[u]=u,_--,u=c;this._hullStart=t[o]=u,n[u]=t[m]=o,n[o]=m,a[this._hashKey(i,s)]=o,a[this._hashKey(e[2*u],e[2*u+1])]=u}this.hull=new Uint32Array(_);for(let E=0,R=this._hullStart;E<_;E++)this.hull[E]=R,R=n[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let a=0,o=0;for(;;){const i=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===i){if(0===a)break;e=rn[--a];continue}const l=i-i%3,c=s+(e+1)%3,u=l+(i+2)%3,d=t[o],f=t[e],h=t[c],p=t[u];if(sn(r[2*d],r[2*d+1],r[2*f],r[2*f+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[i]=d;const r=n[u];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===u){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(i,n[o]),this._link(o,u);const s=l+(i+1)%3;a<rn.length&&(rn[a++]=s)}else{if(0===a)break;e=rn[--a]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,a,o){const i=this.trianglesLen;return this._triangles[i]=e,this._triangles[i+1]=t,this._triangles[i+2]=n,this._link(i,r),this._link(i+1,a),this._link(i+2,o),this.trianglesLen+=3,i}}function on(e,t,n,r){const a=e-n,o=t-r;return a*a+o*o}function sn(e,t,n,r,a,o,i,s){const l=e-i,c=t-s,u=n-i,d=r-s,f=a-i,h=o-s,p=u*u+d*d,m=f*f+h*h;return l*(d*m-p*h)-c*(u*m-p*f)+(l*l+c*c)*(u*h-d*f)<0}function ln(e,t,n,r,a,o){const i=n-e,s=r-t,l=a-e,c=o-t,u=i*i+s*s,d=l*l+c*c,f=.5/(i*c-s*l),h=(c*u-s*d)*f,p=(i*d-l*u)*f;return h*h+p*p}function cn(e,t,n,r){if(r-n<=20)for(let a=n+1;a<=r;a++){const r=e[a],o=t[r];let i=a-1;for(;i>=n&&t[e[i]]>o;)e[i+1]=e[i--];e[i+1]=r}else{let a=n+1,o=r;un(e,n+r>>1,a),t[e[n]]>t[e[r]]&&un(e,n,r),t[e[a]]>t[e[r]]&&un(e,a,r),t[e[n]]>t[e[a]]&&un(e,n,a);const i=e[a],s=t[i];for(;;){do{a++}while(t[e[a]]<s);do{o--}while(t[e[o]]>s);if(o<a)break;un(e,a,o)}e[n+1]=e[o],e[o]=i,r-a+1>=o-n?(cn(e,t,a,r),cn(e,t,n,o-1)):(cn(e,t,n,o-1),cn(e,t,a,r))}}function un(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function dn(e){return e[0]}function fn(e){return e[1]}function hn(e,t){for(let n=0;n<t.innerPearl.length;n++){const r=t.innerPearl[n];for(let t=0;t<r.length;t++){const n=r[t],a=e.discoveryZones.get(...n);if(a)return a.openOnSpawn?void 0:a.triggerPoint}}}var pn=function(e){return e[e.DISARMED=0]="DISARMED",e[e.ARMED=1]="ARMED",e[e.FIRE=2]="FIRE",e}(pn||{});const mn=Rt("gCrSp",["globalCooldown","airMiners","anchorHold","active","mob"]);function gn(e){var t;return e.context.hasMonsters&&"pandora"!==(null===(t=Ke(e).metadata)||void 0===t?void 0:t.tag)}function vn(e,t){(null!==t&&void 0!==t&&t.force||gn(e.cavern))&&bn(e,{creature:Xe(e.cavern.context.biome),reArmMode:"automatic",rng:e.cavern.dice.monsterSpawnScript(e.plan.id),...t})}function yn(e,t){(null!==t&&void 0!==t&&t.force||e.cavern.context.hasSlugs)&&bn(e,{creature:$e,needCrystals:{base:1},reArmMode:"automatic",rng:e.cavern.dice.slugSpawnScript(e.plan.id),...t})}function bn(e,t){var n,r,a,o,i,s,l;let{cavern:c,plan:u,sb:d}=e;const f=Rt("p".concat(u.id).concat(t.creature.inspectAbbrev,"Sp"),["arm","doCooldown","doTrip","doSpawn","emerge","hoardTrip","needCrystals"]),h=Math.min(null!==(n=t.waveSize)&&void 0!==n?n:t.rng.betaInt({a:5,b:2,min:1,max:1.25*(null!==(r=t.meanWaveSize)&&void 0!==r?r:u.monsterWaveSize)}),c.context.globalHostilesCap>0?c.context.globalHostilesCap:1/0),p={min:2/h,max:15/h},m=function(e,t,n){const r=[];for(;r.length<n;)r.push(...t.shuffle(e));return r.length=n,r}(null!==(a=t.emerges)&&void 0!==a?a:function(e){return e.path.baseplates.map((e=>{const[t,n]=e.center;return{x:Math.floor(t),y:Math.floor(n),radius:e.pearlRadius}}))}(u),t.rng,h);d.declareInt(f.arm,pn.DISARMED);const g=[t.initialCooldown&&"wait:random(".concat(t.initialCooldown.min.toFixed(2),")(").concat(t.initialCooldown.max.toFixed(2),");"),"".concat(f.arm,"=").concat(pn.ARMED,";"),t.tripOnArmed&&"".concat(f.doTrip,";")];if(t.armEvent)d.event(t.armEvent,...g);else{const e=hn(c,u);e?d.if("change:".concat(Ot(c,e)),...g):d.onInit(...g)}const v=null!==(o=t.tripEvent)&&void 0!==o?o:f.doTrip;if((null!==(i=t.tripPoints)&&void 0!==i?i:function(e,t){return t.outerPearl[0].filter((t=>e.tiles.get(...t)))}(c,u)).forEach((e=>d.when("enter:".concat(Ot(c,e)),"".concat(v,";")))),null!==(s=t.needCrystals)&&void 0!==s&&s.increment&&d.declareInt(f.needCrystals,t.needCrystals.base),d.event(v,c.anchorHoldCreatures&&"((".concat(mn.anchorHold,">0))return;"),c.context.globalHostilesCap>0&&"((".concat(mn.active,">").concat(c.context.globalHostilesCap-h,"))return;"),c.oxygen&&t.needStableAir&&"((".concat(mn.airMiners,"<miners))return;"),t.needCrystals&&"((crystals<".concat(t.needCrystals.increment?f.needCrystals:t.needCrystals.base,"))return;"),c.context.globalHostilesCooldown>0&&"((".concat(mn.globalCooldown,">0))return;"),"((".concat(f.arm,"==").concat(pn.ARMED,"))").concat(f.arm,"=").concat(pn.FIRE,";")),d.when("".concat(f.arm,"==").concat(pn.FIRE),"".concat(f.doSpawn,";")),d.event(f.doSpawn,c.context.globalHostilesCap>0&&"".concat(mn.active,"+=").concat(h,";"),c.context.globalHostilesCooldown>0&&"".concat(mn.globalCooldown,"+=1;"),!(null===(l=t.needCrystals)||void 0===l||!l.increment)&&"".concat(f.needCrystals,"=crystals+").concat(t.needCrystals.increment,";"),...m.map((e=>kt("wait:random(".concat(p.min.toFixed(2),")(").concat(p.max.toFixed(2),");"),"emerge:".concat(Ot(c,[e.x,e.y]),",A,").concat(t.creature.id,",").concat(e.radius,";")))),"none"!==t.reArmMode&&"".concat(f.doCooldown,";")),"none"!==t.reArmMode){var y;"hoard"===t.reArmMode&&(d.declareInt(f.hoardTrip,0),u.innerPearl[0].forEach((e=>d.when("enter:".concat(Ot(c,e),",").concat(t.creature.id),"".concat(f.hoardTrip,"=1;")))));const e=60*h/(null!==(y=t.spawnRate)&&void 0!==y?y:u.monsterSpawnRate),n=e/4,r={min:e-n,max:e+n};d.event(f.doCooldown,"hoard"===t.reArmMode&&"".concat(f.hoardTrip,"=0;"),"wait:random(".concat(r.min.toFixed(2),")(").concat(r.max.toFixed(2),");"),"hoard"===t.reArmMode&&"((".concat(f.hoardTrip,"==0))return;"),"".concat(f.arm,"=").concat(pn.ARMED,";"),"always"===t.tripOnArmed&&"".concat(f.doTrip,";"))}}function wn(e,t){return n=>{let{cavern:r,plan:a}=n;return{crystalsInBuildings:r.dice.prime(a.id).betaInt({a:1,b:1.75,min:3,max:e}),ruin:t,special:null,tag:"hq"}}}const xn=[Ce],Sn=[Ae,Me,Ie],_n=[Pe,je,Le],En=[Te,Ne,Ne,Ne];function Rn(e){let{crashOnFail:t=!1,discovered:n=!1,from:r=2,templates:a,omit:o}=e;return e=>{const i=e.plan.metadata.ruin,s=!e.plan.hops.length,l=e.cavern.dice.placeBuildings(e.plan.id),c=a?a(l):function(e,t,n){return[...xn,...t&&!n?Sn:e.shuffle(Sn),...e.shuffle(_n),...e.shuffle(En)]}(l,s,i);let u=e.plan.metadata.crystalsInBuildings;const d=[];c.some(((t,n)=>{if(t===Ce||!(u<t.crystals)&&!(t===Le&&!e.plan.intersects.some(((t,n)=>e.cavern.plans[n].fluid===ze.WATER)))&&!(o?o(t,n):!a&&i&&n===xn.length)){if(d.push((e=>t.atTile(e))),u-=t.crystals,u<=0)return!0}else i&&d.push((e=>({...t.atTile(e),placeRubbleInstead:!0})));return!1}));const f=Ue({from:r,queue:d},e);if(t&&d.length)throw console.error("Failed to place buildings: %o",d),new Error("Failed to place ".concat(f.length," buildings"));const h=new Set(f.flatMap((e=>e.template.dependencies)));for(let t=0;t<f.length;t++){const n=f[t];let r;"placeRubbleInstead"in n?r=ze.RUBBLE_1:(r=ze.FOUNDATION,h.has(n.template)&&(f[t]={...n,level:2})),n.foundation.forEach((t=>{let[n,a]=t;return e.tiles.set(n,a,r)}))}const p=e=>e.foundation[e.foundation.length-1],m=(t,n)=>{for(const r of I(p(t),p(n)))e.tiles.get(...r)===ze.FLOOR&&e.tiles.set(...r,i&&l.chance(.62)?ze.WASTE_RUBBLE_4:ze.POWER_PATH)};if(f.length>2){const e=f.flatMap(p),t=new an(e);for(let n=0;n<t.triangles.length;n++)if(n>t.halfedges[n]){m(f[t.triangles[n]],f[t.triangles[n+(n%3===2?-2:1)]])}}else f.length>1&&m(f[0],f[1]);i&&e.plan.innerPearl.forEach((t=>t.forEach((t=>{e.tiles.get(...t)===ze.FLOOR&&e.tiles.set(...t,l.betaChoice([ze.FLOOR,ze.WASTE_RUBBLE_1,ze.WASTE_RUBBLE_2,ze.WASTE_RUBBLE_3,ze.WASTE_RUBBLE_4],{a:1,b:4}))})))),n&&e.openCaveFlags.set(...f[0].foundation[0],!0);const g=s?(()=>{const[e,t]=f.reduce(((e,t)=>{let[n,r]=e;return[n+t.x,r+t.y]}),[0,0]);return me({x:f[0].x,y:f[0].y,aimedAt:[e/f.length,t/f.length],pitch:Math.PI/4})})():void 0;return u>0&&dt(e,{count:u,seamBias:0}),{buildings:f.filter((e=>!("placeRubbleInstead"in e))),cameraPosition:g}}}const On={...bt,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:2},{of:Ft.FLOOR,width:0,grow:2},{of:Ft.DIRT,width:0,grow:.5},{of:Ft.DIRT_OR_LOOSE_ROCK,grow:.25},{of:Ft.MIX_LOOSE_HARD_ROCK,grow:.25}),crystalsFromMetadata:e=>e.crystalsInBuildings,placeRechargeSeam:gt(1),placeSlugHoles(e){e.cavern.context.hasSlugs&&at(e,{count:2})},monsterSpawnScript:e=>vn(e,{initialCooldown:{min:120,max:240},needCrystals:{base:4},needStableAir:!0}),slugSpawnScript:e=>yn(e,{needCrystals:{base:5,increment:10},waveSize:2}),maxSlope:15},kn=te("Found Crystal Hoard",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("Wow! This ought to do it!","You've found quite the haul here.","Our intel was accurate. Look at all those Energy Crystals!").then(t("Now, transport these Energy Crystals back to your base.","Bring this to your base to complete our mission!","Get this back to your base."),n("treasureCaveMany").then("With this, we have enough to complete our mission!","Collect all the Energy Crystals you've found and complete our mission!"),n("hasMonsters").then("I hope we can collect these without attracting too much attention.",(e=>{let{format:{enemies:t}}=e;return"Be careful, Cadet! This is surely enough to attract those ".concat(t,".")}))).then(n("treasureCaveOne","treasureCaveMany"),i).then(n("hasMonsters"),i).then(a)})),Cn=te("Found HQ",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;const s=r.then("Our Rock Raider HQ is safe and sound!","Way to go, Cadet!"),l=r.then("You found the Rock Raider HQ.","There it is!"),c=t(i,n("resourceObjective")).then(a);t(t(s,l).then("Now, ","Now you should be able to"),l.then(n("hasMonsters").then("Shore up the base defenses","Now, get some Electric Fences up")).then(". We need this base secure if we're going to",". Once the base is safe,",t("before the monsters find it too!",(e=>{let{format:{enemies:t}}=e;return"and keep it safe from those ".concat(t,"!")}),"and hope those monsters don't cause any more damage!").then(i,n("lostMinersOne","lostMinersTogether","lostMinersApart")).then(c))).then(i,t(n("buildAndPowerGcOne").then("build that Geological Center"),n("buildAndPowerGcMultiple").then("build the Geological Centers"),n("buildAndPowerSsOne").then("build that Support Station"),n("buildAndPowerSsMultiple").then("build the Support Station")).then(t("and"),t("!").then(c))).then(t(n("lostMinersOne").then("find the lost Rock Raider!"),n("lostMinersTogether","lostMinersApart").then("find those lost Rock Raiders!")).then(c),n("resourceObjective").then((e=>{let{format:{resourceGoal:t}}=e;return"collect ".concat(t,".")}),(e=>{let{format:{resourceGoalNamesOnly:t}}=e;return"get those ".concat(t,".")})).then(a))})),An=te("Found Vehicle left by Lost Miners",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then((e=>{let{format:{vehicle:t}}=e;return"Look! A ".concat(t.template.name,"!")}),(e=>{let{format:{vehicle:t}}=e;return"You found a missing ".concat(t.template.name,"!")}),"Hmm. That doesn't belong there.").then("They must be nearby.","They must have passed this way.","They should be close.","You must be getting warmer.").then(a)})),Ln=te("Found Lost Miners",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(n("foundMinersOne").then("Look! It's one of the lost Rock Radiers!","You found a lost Rock Raider!","You found one of the lost Rock Raiders!"),n("foundMinersTogether").then((e=>{let{format:{foundMiners:t}}=e;return"Look at that! ".concat(ae(t)," of the lost Rock Raiders are here, safely together.")}),(e=>{let{format:{foundMiners:t}}=e;return"That's ".concat(ae(t)," Rock Raiders found!")}),(e=>{let{format:{foundMiners:t}}=e;return"You found ".concat(ae(t)," of them here!")}))).then(i,"Keep going!","Keep searching, Cadet.").then((e=>{let{format:{lostMiners:t}}=e;return"We need to find ".concat(oe(t,(e=>"all ".concat(e)))," before we can leave.")})).then(a)})),Tn=te("Found All Lost Miners",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then((e=>{let{format:{lostMiners:t}}=e;return"And that makes ".concat(ae(t)," Rock Raiders found!")}),(e=>{let{format:{lostMiners:t}}=e;return"You found ".concat(oe(t,(e=>"all ".concat(e)))," Rock Raiders!")}),(e=>{let{format:{lostMiners:t}}=e;return"That's all ".concat(oe(t,(e=>"all ".concat(e)))," Rock Raiders found!")}),n("lostMinersOne").then("Look! It's the lost Rock Raider!","You found the missing Rock Raider!"),n("lostMinersTogether").then((e=>{let{format:{lostMiners:t}}=e;return"".concat(oe(t,(e=>"the ".concat(e)))," Rock Raiders are right here, safe and sound!")}),(e=>{let{format:{lostMiners:t}}=e;return"You found ".concat(oe(t,(e=>"all ".concat(e)))," Rock Raiders!")}),"That's all of the missing Rock Raiders found!")).then(i,n("resourceObjective").then((e=>{let{format:{resourceGoal:t}}=e;return"Now, collect ".concat(t,".")}))).then(a)})),Mn=te("Nomads have settled",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("This seems like as good a place as any.","Well done, Cadet.").then(n("lostMinersOne").then(i,n("resourceObjective")).then("Now, go find that lost Rock Raider!"),n("lostMinersTogether","lostMinersApart").then(i,n("resourceObjective")).then("Now, go find those lost Rock Raiders!"),n("resourceObjective").then((e=>{let{format:{resourceGoal:t}}=e;return"Now, collect ".concat(t,".")}),(e=>{let{format:{resourceGoalNamesOnly:t}}=e;return"Those ".concat(t," are as good as ours!")}))).then(i,n("hasMonsters")).then(a),r.then("With your base constructed, you should now have no problem").then(n("lostMinersOne").then(i,n("resourceObjective")).then("finding that lost Rock Raider!"),n("lostMinersTogether","lostMinersApart").then(i,n("resourceObjective")).then("finding those lost Rock Raiders!"),n("resourceObjective").then((e=>{let{format:{resourceGoal:t}}=e;return"collecting ".concat(t,"!")}))).then(i,n("hasMonsters").then(i,(e=>{let{format:{enemies:t}}=e;return"Don't forget to build plenty of Electric Fences in case those ".concat(t," come.")}),(e=>{let{format:{enemies:t}}=e;return"Just keep an eye out for those ".concat(t,".")}))).then(a),r.then(t("With your Support Station built, you can move on to building").then(n("buildAndPowerGcOne").then("that Geological Center! Be sure to place it in the cavern marked with an arrow."),n("buildAndPowerGcMultiple").then("those Geological Centers!")),n("buildAndPowerSsOne","buildAndPowerSsMultiple").then("FAIL!!")).then(i,n("resourceObjective")).then(i,n("lostMinersOne","lostMinersTogether","lostMinersApart")).then(i,n("hasMonsters")).then(a)})),In=te("Found Slimy Slug Nest",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("I don't like the look of this.","Look at that!","Oh, dear.","This could be a problem!").then("It must be a nest of Slimy Slugs!","We need to keep these Slimy Slugs at bay.").then(a)})),Pn=te("Base Destroyed - Mission Failure",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("With your base destroyed,","Oh no! The Rock Raider HQ is in ruins, and").then("I don't think you can complete our mission.","that doesn't bode well for our mission.").then("I'm pulling you out.","We're teleporting everyone out.","I'm ordering you to evacuate immedately!").then(a)})),jn=(te("Boss Enemy Defeated",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("Good work!",(e=>{let{format:{enemy:t}}=e;return"Your Rock Raiders made short work of that ".concat(t.template.name,".")}),"That's a relief!","I was worried for a minute there.").then(a)})),te("Blackout Start",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Hmmm -","Oh no!","This isn't good.").then("the magnetic shifts are interfering with our Power Station.","the anomaly disabled our Power Station.","our Energy Crystals aren't able to power our HQ right now.").then(a)}))),Fn=te("Blackout End",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("The power is back, but it's hard to tell how long it will last.","The anomaly has disappeared for now.").then(i,"The Canteen doesn't need power, so you might want to build one as a backup.",n("hasAirLimit").then("I suggest you build additional Support Stations to keep the cavern breathable.")).then(a)})),Nn=te("Mob Farm no longer blocking",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("With so many Energy Crystals removed, you should now have no issues teleporting in the other vehicles.").then(i,n("lostMinersOne").then("Use them to find that missing Rock Raider!"),n("lostMinersTogether","lostMinersApart").then("Use them to find those missing Rock Raiders!")).then(a)})),Dn=te("Gas Leak - All Support Stations offline",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Careful there!","Oh no!","This isn't good.").then("Without even one Support Station online, this cavern will be uninhabitable very quickly.").then("Fix it NOW or we will need to abort!").then(a)})),Bn=te("Gas Leak - Support Stations Insufficient",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Careful there!","Oh no!","This isn't good.").then("Our Support Stations can't keep up and this cavern will be uninhabitable very quickly.").then("Fix it NOW or we will need to abort!").then(a)})),Wn=[Ce,Ae,Me,Ie,Le,Ce,De,Pe,je,Ie],Hn=Wn.reduce(((e,t)=>e+t.crystals),0),zn=Rt("gFCHq",["msgLose","wasBaseDestroyed"]),Vn={mod:e=>{const t=v({crystalGoalRatio:.3,...e.initialContext});return{...e,context:t}},prime:()=>({crystalsInBuildings:Hn,ruin:!1,special:"fixedComplete",tag:"hq"}),placeBuildings:Rn({crashOnFail:!0,discovered:!0,templates:()=>Wn}),scriptGlobals:e=>{let{sb:t}=e;t.onInit(...Be.map((e=>"disable:".concat(e.id,";")))),t.declareString(zn.msgLose,{die:u.failureBaseDestroyed,pg:Pn}),t.declareInt(zn.wasBaseDestroyed,0),t.if("".concat(Ce.id,"<=0"),"".concat(zn.wasBaseDestroyed,"=1;")),t.if("".concat(Me.id,"<=0"),"".concat(zn.wasBaseDestroyed,"=1;")),t.if("".concat(Ie.id,"<=0"),"".concat(zn.wasBaseDestroyed,"=1;")),t.if("".concat(zn.wasBaseDestroyed,">=1"),"((".concat(Lt.won,">0))return;"),"msg:".concat(zn.msgLose,";"),"wait:5;","lose;")}},Un=[{name:"Hq.FixedComplete",...On,...Vn,anchorBid:e=>{let{cavern:t,plan:n}=e;return!n.fluid&&n.pearlRadius>6&&.1*t.context.anchorWhimsy}}],Kn={land:"JobDriver",air:"JobPilot",sea:"JobSailor"};class Yn{constructor(e,t,n,r,a,o,i,s){this.id=void 0,this.name=void 0,this.inspectAbbrev=void 0,this.frame=void 0,this.kind=void 0,this.crystals=void 0,this.upgrades=void 0,this.zOffset=void 0,this.id=e,this.name=t,this.inspectAbbrev=n,this.frame=r,this.kind=a,this.crystals=o,this.upgrades=i,this.zOffset=s}get job(){return Kn[this.kind]}}const Gn=new Yn("VehicleHoverScout_C","Hover Scout","HoSc","small","land",1,["UpEngine"],.99),qn=new Yn("VehicleSmallDigger_C","Small Digger","SmDi","small","land",1,["UpEngine","UpDrill"],-.004),Qn=new Yn("VehicleSmallTransportTruck_C","Small Transport Truck","SmTT","small","land",2,["UpEngine","UpCargoHold"],.971),$n=new Yn("VehicleRapidRider_C","Rapid Rider","RaRr","small","sea",2,["UpAddDrill","UpCargoHold"],.978),Xn=new Yn("VehicleSMLC_C","Small Mobile Laser Cutter","SMLC","small","land",3,["UpEngine","UpLaser"],.388),Zn=new Yn("VehicleTunnelScout_C","Tunnel Scout","TuSc","small","air",3,["UpAddDrill"],-.012),Jn=new Yn("VehicleLoaderDozer_C","Loader Dozer","LoDz","large","land",5,["UpEngine"],.773),er=new Yn("VehicleGraniteGrinder_C","Granite Grinder","GrGr","large","land",5,["UpEngine","UpDrill"],-.553),tr=new Yn("VehicleCargoCarrier_C","Cargo Carrier","CaCa","large","sea",5,["UpAddNav"],.978),nr=new Yn("VehicleLMLC_C","Large Mobile Laser Cutter","LMLC","large","land",8,["UpEngine","UpLaser","UpAddNav"],.036),rr=new Yn("VehicleChromeCrusher_C","Chrome Crusher","CrCr","large","land",8,["UpEngine","UpDrill","UpLaser","UpScanner"],-.346),ar=new Yn("VehicleTunnelTransport_C","Tunnel Transport","TuTr","large","air",10,[],-.012);class or{constructor(){this.id=0}create(e){return{essential:!1,driverId:null,upgrades:[],...e,id:this.id++}}}function ir(e){const t=Rt("hintLG",["do","msg"]);e.declareInt(t.do,0),[Ne,Xn,nr].forEach((n=>e.when("".concat(n.id,".click"),"((".concat(n.id,">1))").concat(t.do,"=1;")))),e.declareString(t.msg,"Hint: Hold SHIFT+click to select multiple units. CTRL+[0-9] assigns a group of units that you can recall with [0-9]. X activates laser mode."),e.if("".concat(t.do,">0"),"msg:".concat(t.msg,";"))}const sr=[Ce,Ae,Me,Ie],lr=sr.reduce(((e,t)=>e+t.crystals),0),cr={mod(e){const t=v({globalHostilesCap:4,...e.initialContext});return{...e,context:t,oxygen:[500,500]}},prime:()=>({crystalsInBuildings:lr,ruin:!1,special:"gasLeak",tag:"hq"}),crystalsFromMetadata:e=>2+e.crystalsInBuildings,placeBuildings:Rn({crashOnFail:!0,discovered:!0,from:2,templates:()=>sr}),holdCreatures:()=>!0,script(e){let{cavern:t,plan:n,sb:r}=e;const a=Rt("p".concat(n.id,"GlHq"),["msgNoAir","msgInsuffAir","monstersCount"]),o=t.dice.script(n.id);r.onInit("disable:".concat("BuildingElectricFence_C",";"),"crystals=".concat(2,";"),"wait:".concat(240,";"),"".concat(mn.anchorHold,"=0;")),r.declareString(a.msgNoAir,{pg:Dn,rng:o}),r.declareString(a.msgInsuffAir,{pg:Bn,rng:o}),r.if("".concat(mn.airMiners,"<miners"),"((".concat(Lt.won,">0))return;"),"wait:5;","((".concat(mn.airMiners,">0))[msg:").concat(a.msgInsuffAir,"][msg:").concat(a.msgNoAir,"];")),r.declareInt(a.monstersCount,0),r.when("".concat(Xe(t.context.biome).id,".new"),"".concat(a.monstersCount,"+=1;")),r.when("".concat(a.monstersCount,"==").concat(10),"".concat(mn.anchorHold,"=1;"),"wait:random(".concat(240,")(").concat(420,");"),"".concat(mn.anchorHold,"=0;"),"".concat(a.monstersCount,"=0;")),ir(r)}},ur=[{name:"Hq.Spawn.GasLeak",...On,...cr,anchorBid:e=>{let{cavern:t,plan:n}=e;return"lava"===t.context.biome&&t.context.hasMonsters&&t.context.hasAirLimit&&!n.fluid&&n.lakeSize>3&&n.pearlRadius>3&&.2*t.context.anchorWhimsy}}],dr=[Ce,Le,Me],fr=dr.reduce(((e,t)=>e+t.crystals),0),hr=[Ne,Ne,Ie,je],pr=hr.reduce(((e,t)=>e+t.crystals),0);const mr={crystalsFromMetadata:e=>$n.crystals+e.crystalsInBuildings,prime:e=>{let{cavern:t,plan:n}=e;return{crystalsInBuildings:t.dice.prime(n.id).betaInt({a:1,b:1.75,min:fr,max:fr+pr+1}),ruin:!1,special:null,tag:"hq"}},placeBuildings:Rn({discovered:!0,from:1,templates:e=>[...dr,...e.shuffle(hr)]}),placeCrystals:e=>dt(e,{seamBias:1}),placeEntities:e=>{let{cavern:t,plan:n,minerFactory:r,vehicleFactory:a}=e;const o=t.dice.placeEntities(n.id),[i,s]=function(e,t){for(let n=0;n<e.innerPearl.length;n++){const r=e.innerPearl[n];for(let e=0;e<r.length;e++)if(t.get(...r[e])===ze.WATER)return r[e]}throw new Error("Failed to find water tile")}(n,t.tiles),l=ve({rng:o,x:i,y:s}),c=r.create({...l,planId:n.id,loadout:["Drill","JobSailor"]});return{miners:[c],vehicles:[a.create({...l,planId:n.id,driverId:c.id,template:$n,upgrades:["UpAddDrill"]})]}},script:e=>{let{cavern:t,plan:n,sb:r}=e;n.innerPearl.forEach((e=>e.forEach((e=>{var n;if(null!==(n=t.tiles.get(...e))&&void 0!==n&&n.isWall){const n=Ot(t,e);r.if("change:".concat(n),"place:".concat(n,",").concat(ze.WATER.id,";"))}}))))}},gr=[{name:"Hq.Island",...On,...mr,...Nt({of:Ft.ALWAYS_FLOOR,width:3},{of:Ft.FLOOR,width:0,grow:1},{of:Ft.WATER,width:2,grow:2},{of:Ft.MIX_FRINGE}),anchorBid:e=>{let{cavern:t,plan:n}=e;return n.fluid===ze.WATER&&n.lakeSize>3&&1===n.path.baseplates.length&&n.pearlRadius>5&&.2*t.context.anchorWhimsy}}],vr=Rt("gLostHq",["foundHq"]),yr={objectives:()=>({variables:[{condition:"".concat(vr.foundHq,">0"),description:"Find the lost Rock Raider HQ"}],sufficient:!1}),claimEventOnDiscover(e){let{cavern:t,plan:n}=e;const r=hn(t,n);if(!r)throw new Error("Cave has Find HQ objective but no undiscovered point.");return[{pos:r,priority:At.OBJECTIVE}]},scriptGlobals:e=>{let{sb:t}=e;return t.declareInt(vr.foundHq,0)},script(e){let{cavern:t,plan:n,sb:r}=e;const a=hn(t,n),o=t.ownsScriptOnDiscover[t.discoveryZones.get(...a).id]===n.id,i=n.path.baseplates.reduce(((e,t)=>e.pearlRadius>t.pearlRadius?e:t)).center,s=Rt("p".concat(n.id,"LoHq"),["messageDiscover"]);o&&(r.declareString(s.messageDiscover,{die:u.foundHq,pg:Cn}),r.if("change:".concat(Ot(t,a)),o&&"msg:".concat(s.messageDiscover,";"),o&&"pan:".concat(Ot(t,i),";"),"".concat(Lt.met,"+=1;"),"wait:1;","".concat(vr.foundHq,"=1;")))}},br=[{name:"Hq.Lost.Established",...On,...yr,prime:wn(15,!1),placeBuildings:Rn({}),caveBid:e=>{var t,n;let{cavern:r,plan:a,hops:o,plans:i}=e;return!a.fluid&&a.pearlRadius>5&&o.length<=3&&"mobFarm"!==(null===(t=i[r.anchor])||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.tag)&&!o.some((e=>i[e].fluid))&&!i.some((e=>{var t;return"hq"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)}))&&.5}},{name:"Hq.Lost.Ruins",...On,...yr,prime:wn(15,!0),placeBuildings:Rn({from:3}),placeLandslides:e=>st({min:15,max:100},e),caveBid:e=>{var t,n,r;let{cavern:a,plan:o,hops:i,plans:s}=e;return!o.fluid&&o.pearlRadius>6&&i.length<=3&&"mobFarm"!==(null===(t=s[a.anchor])||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.tag)&&!s.some((e=>{var t;return"hq"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)}))&&a.context.planWhimsy*("nomads"===(null===(r=s[i[0]].metadata)||void 0===r?void 0:r.tag)?5:.5)}}],wr=[{name:"Hq.Spawn.Established",...On,prime:wn(10,!1),placeBuildings:Rn({discovered:!0}),anchorBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius>5&&.5}},{name:"Hq.Spawn.Ruins",...On,prime:wn(12,!0),placeBuildings:Rn({discovered:!0,from:3}),placeLandslides:e=>st({min:15,max:60},e),anchorBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius>6&&.5}},...Un,...ur,...gr,...br],xr=te("Foreshadow Seismic Event",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("I don't like the look of this.","This could be a problem.",i).then("Our scanners are picking up seismic activity in the area.","We're detecting an increase in geological activity nearby.").then("Be careful down there!","Keep an eye out for anything unusual.","Stay sharp and keep your Rock Raiders safe.").then(a)})),Sr=te("Foreshadow Seismic Event (Again)",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("The seismic scanners are lighting up again.","We're detecting another big shift.","We're picking up more activity now.").then("Anything could be happening down there.","Exercise extreme caution!","Prepare yourself, Cadet!","You must protect your Rock Radiers.",i).then(a)})),_r={tag:"seismic"},Er=Rt("gSeismic",["showMessage","msg"]),Rr={prime:()=>_r,scriptGlobals:e=>{let{cavern:t,sb:n}=e;const r=t.dice.lore(u.seismicForeshadow),a=t.plans.reduce(((e,t)=>{var n;return"seismic"===(null===(n=t.metadata)||void 0===n?void 0:n.tag)?e+1:e}),0);n.declareInt(Er.showMessage,0),n.declareString("".concat(Er.msg,"1"),{rng:r,pg:xr}),n.if("".concat(Er.showMessage,"==1"),"msg:".concat(Er.msg,"1;")),a>1&&(n.declareString("".concat(Er.msg,"2"),{rng:r,pg:Sr}),n.if("".concat(Er.showMessage,"==2"),"msg:".concat(Er.msg,"2;"))),a>2&&(n.declareString("".concat(Er.msg,"3"),{rng:r,pg:Sr}),n.when("".concat(Er.showMessage,">=3"),"msg:".concat(Er.msg,"3;")))}},Or=e=>Rt("p".concat(e.id,"SmBBa"),["boss","onTrip","doArm","tripCount"]);function kr(e,t,n){const r=n,a=[],o=[],i=[];return t.innerPearl.forEach(((s,l)=>{l<n||(l<n+2?i.push(...s.filter((t=>{var n;return null===(n=e.tiles.get(...t))||void 0===n?void 0:n.isWall}))):s.forEach((n=>{var i;if(null===(i=e.pearlInnerDex.get(...n))||void 0===i?void 0:i.some(((e,n)=>n!==t.id&&e<r))){var s;const t=function(e,t){const n=[];return A.forEach((r=>{const a=e.discoveryZones.get(...M(t,r));a&&!a.openOnSpawn&&(n[a.id]=a)})),K(n)}(e,n);(1===t.length?a[s=t[0].id]||(a[s]=[]):o).push(n)}})))})),[...K(a),o,i]}const Cr={...bt,...Rr,placeBuildings:e=>{let{plan:t,tiles:n}=e;for(let r=0;r<t.pearlRadius;r++){let e=!1;for(const a of t.innerPearl[r])n.get(...a)===ze.FLOOR&&(e=!0,n.set(...a,ze.WASTE_RUBBLE_4));if(!e)break}return{}},placeEntities:e=>{let{cavern:t,plan:n,creatureFactory:r}=e;const a=n.innerPearl[0][0],o=t.dice.placeEntities(n.id);return{creatures:[r.create({template:Xe(t.context.biome),planId:n.id,sleep:!1,...ve({rng:o,x:a[0],y:a[1],scale:2})})]}},script:e=>{let{cavern:t,plan:n,sb:r}=e;const a=Or(n),o=n.innerPearl[0][0],i=t.creatures.find((e=>e.planId===n.id));r.declareCreature(a.boss,i);let s=1;for(;;){const e=n.innerPearl[s];if(2*e.reduce(((e,n)=>{var r;return null!==(r=t.tiles.get(...n))&&void 0!==r&&r.isWall?e+1:e}),0)>=e.length)break;s++}const l=kr(t,n,s);r.declareInt(a.tripCount,0);let c=0;l.forEach(((e,n)=>{n<l.length-1&&e.forEach((e=>{var n;const o=null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall,i=o?3:1;c+=i,r.if("".concat(o?"drill":"enter",":").concat(Ot(t,e)),"".concat(a.tripCount,"+=").concat(i,";"))}))})),r.if("".concat(a.tripCount,">=").concat(Math.ceil(c/4)),"wait:random(5)(30);","shake:1;","".concat(Er.showMessage,"+=1;"),"wait:random(15)(60);","shake:2;","pan:".concat(Ot(t,[Math.floor(i.x),Math.floor(i.y)]),";"),"wait:1;","shake:4;",...l.map(((e,n)=>n<l.length-1&&kt(...e.filter((e=>{var n;return null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall})).map((e=>"drill:".concat(Ot(t,e),";"))),"wait:0.25;"))),"shake:5;",...l[l.length-1].filter((e=>{var n;return null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall})).map((e=>"drill:".concat(Ot(t,e),";")))),r.if("change:".concat(Ot(t,o)),"".concat(a.tripCount,"=9999;"),"".concat(a.doArm,";"))},monsterSpawnScript:e=>vn(e,{armEvent:Or(e.plan).doArm,tripOnArmed:"first"})},Ar=[{name:"Seismic.BossBattle",...Cr,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:1},{of:Ft.ALWAYS_SOLID_ROCK,width:2},{of:Ft.MIX_LOOSE_HARD_ROCK,shrink:1},{of:Ft.MIX_AT_MOST_DIRT_LOOSE_ROCK,grow:1},{of:Ft.MIX_FRINGE,shrink:1},{of:Ft.VOID,width:0,grow:1}),caveBid:e=>{var t;let{cavern:n,plan:r,plans:a}=e;return!r.fluid&&n.context.hasMonsters&&"pandora"!==(null===(t=a[n.anchor].metadata)||void 0===t?void 0:t.tag)&&r.pearlRadius>=5&&1===r.path.baseplates.length&&!r.intersects.some(((e,t)=>{var n;return"seismic"===(null===(n=a[t].metadata)||void 0===n?void 0:n.tag)}))&&.1*n.context.planWhimsy}}],Lr=e=>Rt("p".concat(e.id,"SmEr"),["doSpawn","tripCount"]);const Tr={...bt,...Rr,placeErosion:e=>lt(e,{cooldown:25,initialDelay:2,initialDelayStartsExposed:360}),script:e=>{let{cavern:t,plan:n,sb:r}=e;const a=Lr(n),o=function(e,t){const[n,r]=t.path.baseplates[0].center,[a,o]=t.path.baseplates[1].center,i=Math.atan2(o-r,a-n),s=t.pearlRadius+2,l=Math.sin(i)*s,c=Math.cos(i)*s,u=(n+a)/2,d=(r+o)/2,f=[];for(const h of[[u-l,d+c],[u+l,d-c]]){let t=!0;for(const n of I([u,d],h)){if(t&&(t=!1,f.length))continue;const r=e.tiles.get(...n);if(!r||r.isFluid)break;f.push(n)}}return f}(t,n);r.declareInt(a.tripCount,0),o.forEach((e=>{r.when("enter:".concat(Ot(t,e)),"".concat(a.tripCount,"+=1;")),r.if("change:".concat(Ot(t,e),":").concat(ze.LAVA.id),"".concat(a.tripCount,"=999;"))})),r.if("".concat(a.tripCount,">=").concat(10),"wait:random(5)(20);","shake:1;","".concat(Er.showMessage,"+=1;")),r.if("".concat(a.tripCount,">=").concat(20),"wait:random(30)(150);","shake:2;","pan:".concat(Ot(t,o[0]),";"),"wait:1;","shake:4;",...o.map((e=>"place:".concat(Ot(t,e),",").concat(ze.LAVA.id,";"))),gn(t)&&"".concat(a.doSpawn,";"))},monsterSpawnScript:e=>vn(e,{armEvent:Lr(e.plan).doSpawn,tripOnArmed:"first"})},Mr=[{name:"Seismic.Eruption",...Tr,...Nt({of:Ft.FLOOR,grow:2},{of:Ft.DIRT,width:0,grow:.1},{of:Pt({item:Ft.DIRT,bid:.25},{item:Ft.LOOSE_ROCK,bid:1}),grow:1},{of:Ft.MIX_LOOSE_HARD_ROCK,grow:.5}),caveBid:e=>{let{cavern:t,plan:n,plans:r}=e;return!n.fluid&&n.hasErosion&&"ice"!==t.context.biome&&2===n.path.baseplates.length&&!n.intersects.some(((e,t)=>{var n;return r[t].fluid===ze.WATER||"seismic"===(null===(n=r[t].metadata)||void 0===n?void 0:n.tag)}))&&1*t.context.planWhimsy}}];const Ir=e=>Rt("p".concat(e.id,"SSeTu"),["onTrip","doSpawn","tripCount"]),Pr={...wt,...Rr,script:e=>{let{cavern:t,plan:n,sb:r}=e;const a=Ir(n),o=function(e,t){const n=[];return t.innerPearl[0].filter((t=>{const r=e.discoveryZones.get(...t);return!(!r||r.openOnSpawn||n[r.id])&&(n[r.id]=!0,!0)}))}(t,n),i=n.innerPearl[0][Math.floor(n.innerPearl[0].length/2)],s=n.innerPearl[0].filter((e=>{var n;const r=null!==(n=t.tiles.get(...e))&&void 0!==n?n:ze.SOLID_ROCK;return r.isWall&&r.hardness<He.SOLID})),l=Math.ceil((o.length+s.length)/4);r.declareInt(a.tripCount,0),o.forEach((e=>r.if("change:".concat(Ot(t,e)),"".concat(a.tripCount,"+=1;")))),s.map((e=>r.if("drill:".concat(Ot(t,e)),"".concat(a.tripCount,"+=1;")))),r.if("".concat(a.tripCount,">=").concat(l),"wait:random(5)(30);","shake:1;","".concat(Er.showMessage,"+=1;"),"wait:random(30)(150);","shake:2;","pan:".concat(Ot(t,i),";"),"wait:1;","shake:4;",...n.innerPearl[0].filter((e=>{var n;return null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall})).map((e=>"drill:".concat(Ot(t,e),";"))),t.context.hasMonsters&&"".concat(a.doSpawn,";"))},monsterSpawnScript:e=>{const t=e.plan.path.baseplates,n=[t[0],t[t.length-1]];return vn(e,{reArmMode:"none",armEvent:Ir(e.plan).doSpawn,tripOnArmed:"first",tripPoints:[],emerges:n.map((e=>{const[t,n]=e.center;return{x:Math.floor(t),y:Math.floor(n),radius:e.pearlRadius}}))})}},jr=[...Ar,...Mr,...[{name:"Seismic.SecretTunnel",...Pr,...Nt({of:Ft.SOLID_ROCK},{of:Ft.VOID,grow:1}),hallBid:e=>{let{cavern:t,plan:n,plans:r}=e;return!n.fluid&&"auxiliary"===n.path.kind&&n.path.exclusiveSnakeDistance>1&&!n.intersects.some(((e,t)=>{var n;return"seismic"===(null===(n=r[t].metadata)||void 0===n?void 0:n.tag)}))&&.75*t.context.planWhimsy}}]],Fr={...bt,placeSlugHoles(){},monsterSpawnScript(e){if(("ice"!==e.cavern.context.biome||e.plan.fluid!==ze.LAVA)&&("lava"!==e.cavern.context.biome||e.plan.fluid===ze.LAVA))return vn(e)}},Nr=[{name:"Flooded.Water.Lake",...Fr,...Nt({of:Ft.WATER,grow:2},{of:Ft.FLOOR,shrink:1,grow:1},{of:Ft.LOOSE_ROCK},{of:Pt({item:Ft.LOOSE_ROCK,bid:10},{item:Ft.LOOSE_OR_HARD_ROCK,bid:1})}),caveBid:e=>{let{plan:t}=e;return t.fluid===ze.WATER&&t.pearlRadius<10&&1}},{name:"Flooded.Water.LakeWithMonsters",...Fr,...Nt({of:Ft.WATER,grow:2},{of:Ft.FLOOR,grow:1},{of:Ft.LOOSE_ROCK},{of:Ft.LOOSE_OR_HARD_ROCK}),caveBid:e=>{let{cavern:t,plan:n}=e;return t.context.hasMonsters&&"ice"===t.context.biome&&n.fluid===ze.WATER&&n.path.baseplates.length>1&&n.pearlRadius>3&&n.pearlRadius<10&&1},placeEntities(e){const t=e.cavern.dice.placeEntities(e.plan.id);return{creatures:rt(e,{rng:t,count:Math.ceil(1.2*e.plan.monsterWaveSize)})}}},{name:"Flooded.Water.Island",...Fr,...Nt({of:Ft.ALWAYS_SOLID_ROCK,width:0,grow:.7},{of:Ft.ALWAYS_HARD_ROCK,width:0,grow:.2},{of:Ft.ALWAYS_LOOSE_ROCK,width:0,grow:.2},{of:Ft.ALWAYS_DIRT,grow:.5},{of:Ft.ALWAYS_FLOOR,grow:.1},{of:Ft.WATER,grow:2},{of:Ft.FLOOR,grow:1},{of:Ft.LOOSE_ROCK},{of:Ft.MIX_FRINGE}),caveBid:e=>{let{plan:t}=e;return t.fluid===ze.WATER&&t.pearlRadius>5&&2}},{name:"Flooded.Lava.Lake",...Fr,...Nt({of:Ft.LAVA,grow:2},{of:Ft.FLOOR,grow:1},{of:Ft.LOOSE_ROCK,shrink:1},{of:Ft.LOOSE_OR_HARD_ROCK}),caveBid:e=>{let{plan:t}=e;return t.fluid===ze.LAVA&&t.pearlRadius<10&&1}},{name:"Flooded.Lava.Island",...Fr,...Nt({of:Ft.ALWAYS_SOLID_ROCK,width:0,grow:.7},{of:Ft.ALWAYS_HARD_ROCK,width:0,grow:.2},{of:Ft.ALWAYS_LOOSE_ROCK,width:0,grow:.2},{of:Ft.ALWAYS_FLOOR,width:2,grow:.1},{of:Ft.LAVA,grow:2},{of:Ft.FLOOR,grow:.5},{of:Ft.LOOSE_ROCK},{of:Ft.LOOSE_OR_HARD_ROCK}),caveBid:e=>{let{plan:t}=e;return t.fluid===ze.LAVA&&t.pearlRadius>5&&1}},{name:"Flooded.Water.Peninsula",...Fr,...Nt({of:Ft.ALWAYS_SOLID_ROCK,width:0,grow:.7},{of:Ft.ALWAYS_HARD_ROCK,width:0,grow:.2},{of:Ft.ALWAYS_LOOSE_ROCK,width:0,grow:.2},{of:Ft.ALWAYS_DIRT,width:0,grow:.5},{of:Ft.ALWAYS_FLOOR,width:2,grow:.1},{of:Ft.BRIDGE_ON_WATER,grow:2},{of:Ft.LOOSE_ROCK},{of:Ft.MIX_FRINGE}),caveBid:e=>{let{plans:t,plan:n}=e;return n.fluid===ze.WATER&&n.pearlRadius>5&&Et(n)&&_t(t,n,null)&&1}},{name:"Flooded.Lava.Peninsula",...Fr,...Nt({of:Ft.ALWAYS_SOLID_ROCK,width:0,grow:.7},{of:Ft.ALWAYS_HARD_ROCK,width:0,grow:.2},{of:Ft.ALWAYS_LOOSE_ROCK,grow:.2},{of:Ft.ALWAYS_FLOOR,grow:.1},{of:Ft.BRIDGE_ON_LAVA,grow:2},{of:Ft.AT_MOST_HARD_ROCK}),caveBid:e=>{let{plans:t,plan:n}=e;return n.fluid===ze.LAVA&&n.pearlRadius>5&&Et(n)&&_t(t,n,null)&&1}},{name:"Flooded.Lava.Stalagmites",...Fr,crystalsToPlace:e=>{let{plan:t}=e;return t.crystalRichness*t.perimeter*2},...Nt({of:Pt({item:Ft.ALWAYS_DIRT,bid:.01},{item:Ft.ALWAYS_LOOSE_ROCK,bid:.1},{item:Ft.LAVA,bid:1}),width:4,grow:1},{of:Pt({item:Ft.AT_MOST_DIRT,bid:.25},{item:Ft.AT_MOST_LOOSE_ROCK,bid:1})},{of:Ft.AT_MOST_HARD_ROCK}),placeCrystals(e){dt(e,{seamBias:Math.max(e.cavern.context.caveCrystalSeamBias,.6)})},caveBid:e=>{let{plan:t}=e;return t.fluid===ze.LAVA&&t.hasErosion&&t.pearlRadius>5&&.4}}];const Dr=[{name:"Loopback",...{...wt},...function(e){let{roughExtent:t,rough:n}=e;return{roughExtent:t,rough:e=>{function t(t){const n=e.cavern.pearlInnerDex.get(...t);return n&&!n.some(((t,n)=>n!==e.plan.id))}n(e);const r=e.plan.intersects.map(((t,n)=>e.cavern.plans[n])).filter((e=>"cave"===e.kind)).sort(((e,t)=>e.hops.length-t.hops.length)),a=Math.min(...r.map((e=>e.outerPearl.length)))-1;for(let n=0;n<a;n++)for(const a of r){const r=a.outerPearl[n].filter(t);if(!(r.length<e.plan.pearlRadius))return r.forEach((t=>e.tiles.set(...t,ze.SOLID_ROCK))),void a.outerPearl[n+1].filter(t).filter((t=>{let[n,r]=t;return C.reduce(((t,a)=>{var o;let[i,s]=a;return(null!==(o=e.tiles.get(n+i,r+s))&&void 0!==o?o:ze.SOLID_ROCK)===ze.SOLID_ROCK?t+1:t}),0)>1})).forEach((t=>e.tiles.set(...t,ze.SOLID_ROCK)))}}}}(Nt({of:Ft.FLOOR,grow:2},{of:Ft.AT_MOST_LOOSE_ROCK,grow:1},{of:Ft.AT_MOST_HARD_ROCK},{of:Ft.VOID,grow:1})),hallBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius>1&&"auxiliary"===t.path.kind&&t.path.exclusiveSnakeDistance>5&&2}}],Br=Dr,Wr=Rt("gLostMiners",["remainingCaves","onFoundAll","messageFoundAll","done"]);function Hr(e){let t=0,n=0;return e.plans.forEach((e=>{var r;"lostMiners"===(null===(r=e.metadata)||void 0===r?void 0:r.tag)&&(n++,t+=e.metadata.minersCount)})),{lostMiners:t,lostMinerCaves:n}}function zr(e,t,n,r){if(!r.hops.length)throw new Error("Reached spawn without a breadcrumb");const a=e.plans[r.hops[r.hops.length-1]],o=T(t,a.innerPearl.flatMap((e=>e)).filter((t=>{let[r,a]=t;const o=e.discoveryZones.get(r,a);return o&&o!==n})));return o||zr(e,t,n,a)}function Vr(e,t){const n=e.miners.find((e=>e.planId===t.id)),r=[Math.floor(n.x),Math.floor(n.y)],a=e.discoveryZones.get(...r),o=e.vehicles.find((n=>{if(n.planId!==t.id)return!1;return e.discoveryZones.get(Math.floor(n.x),Math.floor(n.y))!==a}));return{minersPoint:r,breadcrumb:o,breadcrumbPoint:o?[Math.floor(o.x),Math.floor(o.y)]:void 0}}const Ur={...bt,prime:e=>{let{cavern:t,plan:n}=e;return{tag:"lostMiners",minersCount:t.dice.prime(n.id).betaInt({a:1,b:2,min:1,max:5})}},placeEntities:e=>{var t;let{cavern:n,plan:r,minerFactory:a,vehicleFactory:o}=e;const i=n.dice.placeEntities(r.id),[s,l]=null!==(t=((e,t)=>{let{tiles:n,discoveryZones:r}=t;return Je(e,((e,t)=>{var a;const o=n.get(e,t);return!(null!==o&&void 0!==o&&o.isWall)&&!(null!==o&&void 0!==o&&o.isFluid)&&!(null!==(a=r.get(e,t))&&void 0!==a&&a.openOnSpawn)}))})(r,n))&&void 0!==t?t:(()=>{throw new Error("Nowhere to place lost miners")})(),c=n.discoveryZones.get(s,l);if(!c)throw new Error("Lost Miners point is not discoverable");if(c.openOnSpawn)throw new Error("Lost Miners point is discovered on spawn");const u=[];for(let f=0;f<r.metadata.minersCount;f++)u.push(a.create({planId:r.id,...ve({x:s,y:l,rng:i})}));const d=function(e,t,n,r,a){var o;let[i,s]=n;const l=e.tiles.get(i,s),c=l===ze.LAVA||l===ze.WATER?l:null,u="mobFarm"===(null===(o=e.plans[e.anchor].metadata)||void 0===o?void 0:o.tag),d=a.weightedChoice(K([!c&&!u&&{item:Gn,bid:2},!c&&{item:qn,bid:.5},!c&&{item:Qn,bid:.75},!c&&{item:Xn,bid:.05},!u&&c===ze.WATER&&{item:$n,bid:1},!u&&{item:Zn,bid:.25},{item:null,bid:.0025}]));return d?[r.create({...ve({x:i,y:s,aimedAt:t.path.baseplates[0].center,rng:a}),planId:t.id,template:d})]:[]}(n,r,zr(n,[s,l],c,r),o,i);return{miners:u,vehicles:d}},objectives:e=>{let{cavern:t}=e;const{lostMiners:n,lostMinerCaves:r}=Hr(t),a=1===n?"Find the lost Rock Raider":1===r?"Find the cave with the lost Rock Radiers":"Find ".concat(n," lost Rock Raiders");return{variables:[{condition:"".concat(Wr.done,">0"),description:a}],sufficient:!0}},claimEventOnDiscover(e){let{cavern:t,plan:n}=e;const{minersPoint:r,breadcrumbPoint:a}=Vr(t,n);return[{pos:a,priority:At.HINT},{pos:r,priority:At.OBJECTIVE}]},scriptGlobals(e){let{cavern:t,sb:n}=e;const{lostMinerCaves:r}=Hr(t);n.declareInt(Wr.remainingCaves,r),n.declareInt(Wr.done,0),n.declareString(Wr.messageFoundAll,{die:u.foundAllLostMiners,pg:Tn}),n.event(Wr.onFoundAll,"".concat(Lt.met,"+=1;"),"msg:".concat(Wr.messageFoundAll,";"),"wait:3;","".concat(Wr.done,"=1;"))},script(e){let{cavern:t,plan:n,sb:r}=e;const a=t.dice.script(n.id),{lostMinerCaves:o}=Hr(t),i=Rt("p".concat(n.id,"LoMi"),["msgFoundBreadcrumb","msgFoundMiners","wasFound"]),{minersPoint:s,breadcrumb:l,breadcrumbPoint:c}=Vr(t,n),u=t.ownsScriptOnDiscover[t.discoveryZones.get(...s).id]===n.id,d=u&&o>1,f=c&&t.ownsScriptOnDiscover[t.discoveryZones.get(...c).id]===n.id;var h,p,m;d&&r.declareString(i.msgFoundMiners,{rng:a,pg:Ln,state:{foundMinersOne:n.metadata.minersCount<=1,foundMinersTogether:n.metadata.minersCount>1},format:{foundMiners:n.metadata.minersCount}}),r.declareInt(i.wasFound,0),r.if("change:".concat(Ot(t,s)),u&&"pan:".concat(Ot(t,s),";"),"".concat(i.wasFound,"=1;"),"".concat(Wr.remainingCaves,"-=1;"),(h="".concat(Wr.remainingCaves,"<=0"),p=Wr.onFoundAll,(m=d&&"msg:".concat(i.msgFoundMiners))?"((".concat(h,"))[").concat(p,"][").concat(m,"];"):"((".concat(h,"))").concat(p,";"))),f&&(r.declareString(i.msgFoundBreadcrumb,{rng:a,pg:An,format:{vehicle:l}}),r.if("change:".concat(Ot(t,c)),"((".concat(i.wasFound,">0))return;"),"pan:".concat(Ot(t,c),";"),"msg:".concat(i.msgFoundBreadcrumb,";")))}},Kr={rock:1,ice:1.4,lava:.7},Yr=[{name:"LostMiners",...Ur,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:2},{of:Ft.ALWAYS_LOOSE_ROCK,grow:1},{of:Ft.HARD_ROCK,grow:.5}),caveBid:e=>{let{cavern:t,hops:n,plans:r,plan:a}=e;return!a.fluid&&a.pearlRadius>2&&a.pearlRadius<10&&n.length>3&&n.length<=8&&Et(a)&&r.reduce(((e,t)=>{var n;return"lostMiners"===(null===(n=t.metadata)||void 0===n?void 0:n.tag)?e+1:e}),0)<4&&t.context.planWhimsy*Kr[t.context.biome]}}],Gr=[{item:Gn,bid:1},{item:qn,bid:4},{item:Qn,bid:1},{item:Xn,bid:2},{item:Zn,bid:1},{item:null,bid:1}],qr=Rt("gNomads",["messageBuiltBase"]),Qr={...bt,crystalsToPlace:()=>5,crystalsFromMetadata:e=>e.vehicles.reduce(((e,t)=>e+t.crystals),0),prime:e=>{let{cavern:t,plan:n}=e;const r=t.dice.prime(n.id);return{tag:"nomads",minersCount:r.betaInt({a:1,b:3,min:1,max:4}),vehicles:K([r.weightedChoice(Gr)])}},placeRechargeSeam:gt(1),placeBuildings:e=>{var t;let{cavern:n,plan:r,tiles:a,openCaveFlags:o}=e;return o.set(...Je(r,((e,t)=>{const n=a.get(e,t);return!!n&&!n.isWall})),!0),null===(t=n.plans.find((e=>{var t;return"hq"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)})))||void 0===t||t.hops.forEach((e=>{V(n.plans[e].path.baseplates,((e,t)=>{for(const o of I(e.center,t.center)){var n,r;(null!==(n=null===(r=a.get(...o))||void 0===r?void 0:r.hardness)&&void 0!==n?n:He.SOLID>=He.HARD)&&a.set(...o,ze.LOOSE_ROCK)}}))})),{}},placeEntities:e=>{let{cavern:t,plan:n,minerFactory:r,vehicleFactory:a}=e;const o=t.dice.placeEntities(n.id),[i,s]=Je(n,((e,n)=>{var r;return!(null===(r=t.discoveryZones.get(e,n))||void 0===r||!r.openOnSpawn||t.tiles.get(e,n).isFluid)})),l=n.metadata.vehicles.map((e=>{if("sea"===e.kind){const r=Je(n,((e,n)=>{var r;return!(null===(r=t.discoveryZones.get(e,n))||void 0===r||!r.openOnSpawn||t.tiles.get(e,n)!==ze.WATER)}));if(!r)throw new Error("Failed to place sea vehicle in plan ".concat(n.id));return a.create({...ve({x:r[0],y:r[1],rng:o}),planId:n.id,template:e})}return a.create({...ve({x:i,y:s,rng:o}),planId:n.id,template:e})})),c=[];for(let u=0;u<n.metadata.minersCount;u++){const e=l[u],t=e?me(e):ve({x:i,y:s,rng:o}),a=K(["Drill",(0===u||o.chance(.25))&&"JobGeologist",null===e||void 0===e?void 0:e.template.job]),d=r.create({...t,planId:n.id,loadout:a});l[u]&&(l[u]={...l[u],driverId:d.id}),c.push(d)}return{vehicles:l,miners:c,cameraPosition:me({x:c[0].x,y:c[0].y,aimedAt:n.path.baseplates[0].center,pitch:Math.PI/4})}},holdCreatures:()=>!0,scriptGlobals(e){let{cavern:t,sb:n}=e;t.plans.some((e=>{var t;return"hq"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)}))?(n.onInit("disable:miners;","disable:buildings;","disable:vehicles;"),n.if("".concat(vr.foundHq,">0"),"enable:miners;","enable:buildings;","enable:vehicles;","wait:random(20)(120);","".concat(mn.anchorHold,"=0;"))):(n.declareString(qr.messageBuiltBase,{die:u.nomadsSettled,pg:Mn}),n.if("".concat(Ce.id,".new"),"wait:random(20)(120);","".concat(mn.anchorHold,"=0;")),n.if("".concat(Ie.id,".onPowered"),"msg:".concat(qr.messageBuiltBase,";")))}},$r=[{name:"Nomads",...Qr,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:2},{of:Ft.AT_MOST_LOOSE_ROCK,grow:1},{of:Ft.MIX_FRINGE}),crystalsToPlace:e=>{let{plan:t}=e;return Math.max(t.crystalRichness*t.perimeter,5)},ore:e=>{let{plan:t}=e;return Math.max(t.oreRichness*t.perimeter,10)},placeOre:e=>ft(e,{seamBias:1}),anchorBid:e=>{let{cavern:t,plan:n}=e;return!n.fluid&&n.pearlRadius>0&&_t(t.plans,n,null)&&(Et(n)?1:.1)}},{name:"Nomads.WaterPeninsula",...Qr,...Nt({of:Ft.ALWAYS_FLOOR,grow:2},{of:Ft.BRIDGE_ON_WATER,width:2,grow:.5},{of:Ft.FLOOR},{of:Ft.AT_MOST_LOOSE_ROCK,grow:1},{of:Ft.MIX_FRINGE}),prime:()=>({tag:"nomads",minersCount:1,vehicles:[$n]}),anchorBid:e=>{let{cavern:t,plan:n}=e;return n.fluid===ze.WATER&&n.pearlRadius>4&&St(t.plans,n,null)&&.5}},{name:"Nomads.LavaPeninsula",...Qr,...Nt({of:Ft.ALWAYS_FLOOR,grow:2},{of:Ft.BRIDGE_ON_LAVA,width:2,grow:.5},{of:Ft.FLOOR},{of:Ft.AT_MOST_LOOSE_ROCK,grow:1},{of:Ft.AT_MOST_HARD_ROCK}),prime:()=>({tag:"nomads",minersCount:1,vehicles:[Zn]}),anchorBid:e=>{let{cavern:t,plan:n}=e;return n.fluid===ze.LAVA&&n.pearlRadius>4&&St(t.plans,n,null)&&.5}}],Xr={...bt,monsterSpawnScript:e=>vn(e)},Zr=[{name:"SimpleCave.Filled",...Xr,...Nt({of:Ft.DIRT,width:0,grow:.25},{of:Pt({item:Ft.DIRT,bid:.25},{item:Ft.LOOSE_ROCK,bid:.25},{item:Ft.DIRT_OR_LOOSE_ROCK,bid:.5}),grow:1},{of:Ft.LOOSE_OR_HARD_ROCK}),caveBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius<4&&.04}},{name:"SimpleCave.Open",...Xr,...Nt({of:Ft.FLOOR,grow:2},{of:Ft.AT_MOST_DIRT,width:0,grow:.5},{of:Pt({item:Ft.AT_MOST_DIRT,bid:.25},{item:Ft.AT_MOST_LOOSE_ROCK,bid:1}),grow:1},{of:Ft.MIX_FRINGE},{of:Ft.VOID,width:0,grow:.5}),caveBid:e=>{let{plans:t,plan:n}=e;return!n.fluid&&n.pearlRadius<10&&_t(t,n,null)&&2}},{name:"SimpleCave.Empty",...Xr,...Nt({of:Ft.FLOOR,grow:2},{of:Ft.DIRT,width:0,grow:.1},{of:Pt({item:Ft.DIRT,bid:.25},{item:Ft.LOOSE_ROCK,bid:1}),grow:1},{of:Ft.MIX_LOOSE_HARD_ROCK,grow:.5},{of:Ft.VOID,width:0,grow:.5}),caveBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius<10&&1}},{name:"SimpleCave.FilledWithPaths",...Xr,...Nt({of:Ft.FLOOR,width:0,grow:.5},{of:Mt({dirt:ze.FLOOR,looseRock:ze.FLOOR,hardRock:ze.FLOOR,solidRock:ze.LOOSE_ROCK}),grow:.5},{of:Mt({dirt:ze.FLOOR,looseRock:ze.FLOOR,hardRock:ze.FLOOR,solidRock:ze.DIRT}),grow:1},{of:Ft.AT_MOST_LOOSE_ROCK},{of:Ft.AT_MOST_HARD_ROCK},{of:Ft.VOID,width:0,grow:.5}),caveBid:e=>{let{plans:t,plan:n}=e;return!n.fluid&&n.pearlRadius>4&&1===n.path.baseplates.length&&t.some((e=>n.intersects[e.id]&&e.fluid))&&1}},{name:"SimpleCave.Doughnut",...Xr,...Nt({of:Ft.ALWAYS_SOLID_ROCK,grow:.2},{of:Ft.ALWAYS_HARD_ROCK,grow:.3},{of:Ft.LOOSE_ROCK,width:0,grow:.5},{of:Ft.FLOOR,width:2,grow:1},{of:Ft.DIRT,width:0,grow:.5},{of:Ft.LOOSE_ROCK},{of:Ft.AT_MOST_HARD_ROCK}),caveBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius>5&&.5}},{name:"SimpleCave.Stalagmites",...Xr,...Nt({of:Pt({item:Ft.ALWAYS_DIRT,bid:.01},{item:Ft.ALWAYS_LOOSE_ROCK,bid:.04},{item:Ft.FLOOR,bid:1}),width:4,grow:3},{of:Ft.MIX_DIRT_LOOSE_ROCK,grow:1},{of:Ft.MIX_LOOSE_HARD_ROCK,grow:.25}),caveBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius>5&&.2}}],Jr={...wt},ea=[{name:"SimpleHall.Open",...Jr,...Nt({of:Ft.FLOOR,grow:2},{of:Ft.AT_MOST_LOOSE_ROCK,grow:1},{of:Ft.AT_MOST_HARD_ROCK},{of:Ft.VOID,grow:1}),hallBid:e=>{var t;let{plans:n,plan:r,hops:a}=e;return!r.fluid&&r.pearlRadius>0&&(a.length<3&&"nomads"===(null===(t=n[a[0]].metadata)||void 0===t?void 0:t.tag)?5:1)}},{name:"SimpleHall.WideWithMonsters",...Jr,...Nt({of:Ft.FLOOR,grow:1},{of:Ft.AT_MOST_HARD_ROCK},{of:Ft.VOID}),hallBid:e=>{let{cavern:t,plan:n}=e;return t.context.hasMonsters&&!n.fluid&&n.pearlRadius>3&&n.path.exclusiveSnakeDistance>0&&.5},placeEntities(e){const t=e.cavern.dice.placeEntities(e.plan.id);return{creatures:rt(e,{rng:t,count:Math.ceil(e.plan.monsterWaveSize/2)})}}},{name:"SimpleHall.Filled",...Jr,...Nt({of:Pt({item:Ft.FLOOR,bid:1},{item:Ft.DIRT,bid:.4},{item:Ft.LOOSE_ROCK,bid:.1})},{of:Ft.MIX_FRINGE},{of:Ft.VOID,grow:1}),hallBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius>0&&1}},{name:"SimpleHall.Water.River",...Jr,crystalsToPlace:e=>{let{plan:t}=e;return 3*t.crystalRichness*t.perimeter},...Nt({of:Ft.WATER,width:2,grow:1},{of:Pt({item:Ft.AT_MOST_HARD_ROCK,bid:1},{item:Ft.VOID,bid:.5})},{of:Ft.VOID,grow:1}),placeCrystals(e){dt(e,{seamBias:Math.max(e.cavern.context.hallCrystalSeamBias,.75)})},hallBid:e=>{let{plan:t}=e;return t.fluid===ze.WATER&&1}},{name:"SimpleHall.Water.Stream",...Jr,...Nt({of:Ft.WATER,grow:.5},{of:Ft.FLOOR,grow:.25,shrink:1},{of:Ft.DIRT_OR_LOOSE_ROCK,grow:1},{of:Ft.AT_MOST_HARD_ROCK,shrink:1}),hallBid:e=>{let{plans:t,plan:n}=e;return n.fluid===ze.WATER&&_t(t,n,ze.WATER)&&1}},{name:"SimpleHall.Lava.River",...Jr,...Nt({of:Ft.LAVA,width:2,grow:1},{of:Ft.AT_MOST_HARD_ROCK,width:0,grow:1},{of:Ft.VOID,grow:1}),hallBid:e=>{let{plan:t}=e;return t.fluid===ze.LAVA&&1}},{name:"SimpleHall.Lava.WideWithMonsters",...Jr,...Nt({of:Ft.LAVA,width:2,grow:1},{of:Ft.AT_MOST_HARD_ROCK},{of:Ft.VOID}),hallBid:e=>{let{cavern:t,plan:n}=e;return t.context.hasMonsters&&"lava"===t.context.biome&&n.fluid===ze.LAVA&&n.pearlRadius>3&&n.path.exclusiveSnakeDistance>0&&1},placeEntities(e){const t=e.cavern.dice.placeEntities(e.plan.id);return{creatures:rt(e,{rng:t,count:Math.ceil(e.plan.monsterWaveSize/2)})}}}],ta={...xt,placeSlugHoles:e=>{const t=e.cavern.context.hasSlugs?e.cavern.dice.placeSlugHoles(e.plan.id).betaInt({a:1.5,b:2,min:1,max:4}):void 0;at(e,{count:t})},monsterSpawnScript:e=>vn(e,{initialCooldown:{min:120,max:240},needCrystals:{base:4},needStableAir:!0}),slugSpawnScript:e=>yn(e,{initialCooldown:{min:120,max:240},needCrystals:{base:5,increment:4},spawnRate:.2,waveSize:1})},na=Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:2},{of:Ft.AT_MOST_LOOSE_ROCK,grow:1},{of:Ft.MIX_FRINGE}),ra=[{name:"SimpleSpawn.Open",...ta,...na,anchorBid:e=>{let{plan:t}=e;return!t.fluid&&t.lakeSize>=3&&t.pearlRadius>0&&1}},{name:"SimpleSpawn.Empty",...ta,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:2},{of:Ft.LOOSE_ROCK,grow:1},{of:Ft.MIX_FRINGE}),anchorBid:e=>{let{plan:t}=e;return!t.fluid&&t.lakeSize>=3&&t.pearlRadius>0&&1}},{name:"SimpleSpawn.Fallback",...ta,...na,crystalsToPlace:()=>9,anchorBid:e=>{let{plan:t}=e;return!t.fluid&&t.pearlRadius>=2&&1e-4}}],aa=e=>e.plan.innerPearl.flatMap((t=>t.filter((t=>e.cavern.tiles.get(...t)===ze.SLUG_HOLE)))),oa={tag:"slugNest"},ia={...bt,prime:()=>oa,placeCrystals(e){dt(e,{seamBias:Math.max(e.cavern.context.caveCrystalSeamBias,.5)})},placeSlugHoles(e){const t=e.cavern.dice.placeSlugHoles(e.plan.id).betaInt({a:2,b:2,min:4,max:8});at(e,{count:t})},slugSpawnScript:e=>{const t=aa(e).length;return yn(e,{reArmMode:"none",initialCooldown:{min:20,max:60},needCrystals:{base:Math.floor(vt(e.cavern)/10)},tripOnArmed:"first",waveSize:t})},claimEventOnDiscover:e=>{let{cavern:t,plan:n}=e;return[{pos:hn(t,n),priority:At.TRIVIAL}]},script:e=>{let{cavern:t,plan:n,sb:r}=e;const a=hn(t,n);if(!a||t.ownsScriptOnDiscover[t.discoveryZones.get(...a).id]!==n.id)return;const o=Rt("p".concat(n.id,"SgNt"),["messageDiscover"]);r.declareString(o.messageDiscover,{die:u.foundSlugNest,pg:In}),r.if("change:".concat(Ot(t,a)),"msg:".concat(o.messageDiscover,";"),"pan:".concat(Ot(t,n.innerPearl[0][0]),";"))}},sa={...wt,crystalsToPlace:e=>{let{plan:t}=e;return Math.max(t.crystalRichness*t.perimeter,5)},placeCrystals(e){dt(e,{seamBias:Math.max(e.cavern.context.hallCrystalSeamBias,.75)})},placeSlugHoles(e){const t=e.cavern.dice.placeSlugHoles(e.plan.id).betaInt({a:2,b:2,min:1,max:3}),n=e.plan.innerPearl.flatMap((t=>t.filter((t=>{var n;return e.tiles.get(...t)===ze.FLOOR&&!(null!==(n=e.cavern.pearlInnerDex.get(...t))&&void 0!==n&&n.some(((t,n)=>n!==e.plan.id)))}))));at(e,{count:t,placements:n})},slugSpawnScript:e=>{const t=aa(e);return yn(e,{emerges:t.map((e=>{let[t,n]=e;return{x:t,y:n,radius:1}})),initialCooldown:{min:60,max:120},needCrystals:{base:2*e.plan.crystals,increment:e.plan.crystals},tripPoints:t,waveSize:t.length})}},la=[{name:"Slugs.Nest",...ia,...Nt({of:Ft.FLOOR,width:3,grow:1},{of:Ft.AT_MOST_DIRT,width:0,grow:.5},{of:Pt({item:Ft.DIRT,bid:.25},{item:Ft.LOOSE_ROCK,bid:1}),grow:1},{of:Ft.MIX_LOOSE_HARD_ROCK,grow:.25}),caveBid:e=>{let{cavern:t,plans:n,plan:r}=e;return t.context.hasSlugs&&r.pearlRadius>=5&&1===r.path.baseplates.length&&!r.fluid&&!r.hasErosion&&_t(n,r,null)&&!n.some((e=>{var t;return"slugNest"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)}))&&.25*t.context.planWhimsy}},{name:"Slugs.Hall",...sa,...Nt({of:Ft.FLOOR},{of:Pt({item:Ft.LOOSE_OR_HARD_ROCK,bid:1},{item:Ft.HARD_ROCK,bid:2})},{of:Ft.VOID,grow:1}),hallBid:e=>{let{cavern:t,plan:n}=e;return t.context.hasSlugs&&n.path.exclusiveSnakeDistance>5&&!n.fluid&&!n.hasErosion&&1}}],ca={...wt},ua=Me.crystals+Ie.crystals+1+De.crystals+1+5,da=[{name:"ThinHall.Open",...ca,...Nt({of:Ft.FLOOR},{of:Pt({item:Ft.AT_MOST_HARD_ROCK,bid:1},{item:Ft.VOID,bid:10})},{of:Ft.VOID,grow:1}),hallBid:e=>{let{plan:t}=e;return!t.fluid&&.2}},{name:"ThinHall.Filled",...ca,...Nt({of:Pt({item:Ft.FLOOR,bid:1},{item:Ft.LOOSE_ROCK,bid:.5})},{of:Ft.VOID,grow:1}),hallBid:e=>{let{plan:t}=e;return!t.fluid&&.1}},{name:"ThinHall.HardRock",...ca,...Nt({of:Ft.HARD_ROCK},{of:Ft.VOID,grow:1}),hallBid:e=>{let{plan:t,totalCrystals:n}=e;return!t.fluid&&n>=ua&&t.path.exclusiveSnakeDistance<10&&.7}}],fa={tag:"treasure"},ha={...bt,prime:()=>fa,objectives:e=>{let{cavern:t}=e;const n=t.plans.filter((e=>{var t;return"treasure"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)})).reduce(((e,t)=>Math.max(e,t.crystals)),0);if(!(n<15))return{crystals:5*Math.floor(n/5),sufficient:!1}}},pa=Rt("gHoard",["lock","message","crystalsAvailable"]),ma=e=>{var t;return e.objectives.crystals&&"mobFarm"!==(null===(t=Ke(e).metadata)||void 0===t?void 0:t.tag)},ga={...ha,crystalsToPlace:e=>{let{plan:t}=e;return t.crystalRichness*t.perimeter*3},placeCrystals(e){const t=pt(e.plan.innerPearl.flatMap((e=>e)),e.tiles),n=e.plan.innerPearl[0].length>1?e.plan.innerPearl[0]:[...e.plan.innerPearl[0],...e.plan.innerPearl[1]],r=[...t.map((e=>({bid:1/t.length,item:e}))),...n.map((e=>({bid:3/n.length,item:e})))],a=e.cavern.dice.placeCrystals(e.plan.id);dt(e,{getRandomTile:()=>a.weightedChoice(r),seamBias:0})},placeSlugHoles(){},placeEntities(e){if(e.plan.pearlRadius>3){const t=e.cavern.dice.placeEntities(e.plan.id);return{creatures:rt(e,{rng:t,count:Math.ceil(e.plan.monsterWaveSize/2)})}}return{}},monsterSpawnScript:e=>vn(e,{meanWaveSize:1.5*e.plan.monsterWaveSize,reArmMode:"hoard",rng:e.cavern.dice.monsterSpawnScript(e.plan.id),spawnRate:3.5*e.plan.monsterSpawnRate}),scriptGlobals(e){let{cavern:t,sb:n}=e;ma(t)&&(n.declareInt(pa.lock,0),n.declareString(pa.message,{die:u.foundHoard,pg:kn}),n.declareInt(pa.crystalsAvailable,0))},claimEventOnDiscover(e){let{plan:t}=e;return[{pos:t.innerPearl[0][0],priority:At.HINT}]},script(e){var t,n;let{cavern:r,plan:a,sb:o}=e;if(!ma(r))return;const i=a.innerPearl[0][0];if(r.ownsScriptOnDiscover[null!==(t=null===(n=r.discoveryZones.get(...i))||void 0===n?void 0:n.id)&&void 0!==t?t:-1]!==a.id)return;const s=r.plans.some((e=>{var t;return"lostMiners"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)}));o.if("change:".concat(Ot(r,i)),"((".concat(pa.lock,">0))[return][").concat(pa.lock,"=1];"),"wait:1;","".concat(pa.lock,"=0;"),"((".concat(Lt.won,">0))return;"),s&&"((".concat(Wr.done,"<1))return;"),"".concat(pa.crystalsAvailable,"=crystals+Crystal_C;"),"((".concat(pa.crystalsAvailable,"<").concat(r.objectives.crystals,"))return;"),"msg:".concat(pa.message,";"),"pan:".concat(Ot(r,i),";"))}},va={...ha,monsterSpawnScript:e=>vn(e,{meanWaveSize:1.5*e.plan.monsterWaveSize,spawnRate:2*e.plan.monsterSpawnRate})},ya=[{name:"Treasure.Hoard.Open",...ga,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:3},{of:Ft.LOOSE_ROCK,shrink:1},{of:Ft.HARD_ROCK,grow:.5}),caveBid:e=>{let{cavern:t,plans:n,plan:r}=e;return!r.fluid&&1===r.path.baseplates.length&&Et(r)&&_t(n,r,null)&&.5*t.context.planWhimsy}},{name:"Treasure.Hoard.Sealed",...ga,...Nt({of:Ft.ALWAYS_FLOOR,width:1,grow:3},{of:Ft.ALWAYS_LOOSE_ROCK},{of:Ft.ALWAYS_HARD_ROCK,grow:.5}),caveBid:e=>{let{cavern:t,plan:n}=e;return!n.fluid&&1===n.path.baseplates.length&&Et(n)&&.5*t.context.planWhimsy}},{name:"Treasure.Rich.Open",...va,...Nt({of:Ft.ALWAYS_SOLID_ROCK,width:0,grow:1},{of:Ft.ALWAYS_HARD_ROCK,width:0,grow:.5},{of:Ft.LOOSE_ROCK,grow:2},{of:Ft.FLOOR,width:2,shrink:1,grow:3},{of:Ft.LOOSE_ROCK,shrink:1},{of:Ft.HARD_ROCK,grow:.5}),caveBid:e=>{let{plan:t}=e;return!t.fluid&&t.path.baseplates.length>=1&&Et(t)&&1}},{name:"Treasure.Rich.Water.Island",...va,...Nt({of:Ft.ALWAYS_SOLID_ROCK,width:0,grow:1},{of:Ft.ALWAYS_HARD_ROCK,width:0,grow:.5},{of:Ft.ALWAYS_LOOSE_ROCK,grow:2},{of:Ft.WATER,width:2,grow:3},{of:Ft.LOOSE_ROCK,shrink:1},{of:Ft.HARD_ROCK,grow:.5}),caveBid:e=>{let{plan:t}=e;return t.fluid===ze.WATER&&t.pearlRadius>3&&t.path.baseplates.length>=1&&Et(t)&&.5},placeEntities(e){const t=e.cavern.dice.placeEntities(e.plan.id);if("ice"===e.cavern.context.biome&&t.chance(.5)){return{creatures:rt(e,{rng:t,count:Math.ceil(e.plan.monsterWaveSize/2),placement:"inner"})}}return{}}},{name:"Treasure.Hoard.Water.Peninsula",...ga,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:1},{of:Ft.BRIDGE_ON_WATER,width:2,grow:3},{of:Ft.LOOSE_ROCK,shrink:1},{of:Ft.HARD_ROCK,grow:.5}),caveBid:e=>{let{cavern:t,plans:n,plan:r}=e;return r.fluid===ze.WATER&&r.pearlRadius>3&&r.path.baseplates.length>=1&&Et(r)&&_t(n,r,null)&&.5*t.context.planWhimsy}},{name:"Treasure.Rich.Lava.Island",...va,...Nt({of:Ft.ALWAYS_SOLID_ROCK,width:0,grow:1},{of:Ft.ALWAYS_HARD_ROCK,width:0,grow:.5},{of:Ft.ALWAYS_LOOSE_ROCK,grow:2},{of:Ft.LAVA,width:2,grow:3},{of:Ft.HARD_ROCK,grow:.5}),caveBid:e=>{let{plan:t}=e;return t.fluid===ze.LAVA&&t.pearlRadius>3&&t.path.baseplates.length>=1&&Et(t)&&.5}},{name:"Treasure.Hoard.Lava.Peninsula",...ga,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:1},{of:Ft.BRIDGE_ON_LAVA,width:2,grow:3},{of:Ft.HARD_ROCK,grow:.5}),caveBid:e=>{let{cavern:t,plans:n,plan:r}=e;return r.fluid===ze.LAVA&&r.pearlRadius>3&&r.path.baseplates.length>=1&&Et(r)&&_t(n,r,null)&&.5*t.context.planWhimsy}}],ba=120,wa={tag:"blackout"},xa={...xt,prime:()=>wa,mod(e){const t=v({caveHasRechargeSeamChance:.15,hallHasRechargeSeamChance:.15,...e.initialContext});return{...e,context:t}},script(e){let{cavern:t,plan:n,sb:r}=e;const a=Rt("p".concat(n.id,"Bo"),["crystalBank","doReset","hasPS","loop","showMsg","msgStart","msgEnd","needCrystals","reset","tc","trips"]),o=t.dice.script(n.id);r.declareInt(a.crystalBank,0),r.declareInt(a.needCrystals,10),r.declareInt(a.tc,0);const i=t.buildings.filter((e=>e.template===Me));i.some((e=>{var n;return null===(n=t.discoveryZones.get(...e.foundation[0]))||void 0===n?void 0:n.openOnSpawn}))?r.declareInt(a.trips,0):(r.declareInt(a.trips,2),i.length?(r.declareInt(a.hasPS,0),r.if("".concat(Me.id,".new"),"".concat(a.hasPS,"=1;")),i.forEach((e=>r.if("change:".concat(Ot(t,e.foundation[0])),"".concat(a.hasPS,"=1;")))),r.if("".concat(a.hasPS,">0"),"".concat(a.trips,"=0;"))):r.if("".concat(Me.id,".new"),"".concat(a.trips,"=0;"))),r.when("crystals>=".concat(a.needCrystals),"".concat(a.trips,"+=1;")),r.declareInt(a.showMsg,0),r.when("".concat(a.trips,"==1"),"wait:random(5)(30);","".concat(a.needCrystals,"=crystals+").concat(7,";"),"disable:lights;","".concat(a.reset,"=0;"),"".concat(a.loop,";"),"wait:1;","".concat(a.showMsg,"=1;")),r.declareString(a.msgStart,{pg:jn,rng:o}),r.if("".concat(a.showMsg,"==1"),"msg:".concat(a.msgStart,";")),r.declareInt(a.reset,0),r.when("building.dead","".concat(a.reset,"=").concat(115,";")),r.when("vehicle.dead","".concat(a.reset,"=").concat(115,";")),r.when("".concat(a.crystalBank,">=").concat(a.needCrystals),"".concat(a.reset,"=").concat(ba,";")),r.event(a.loop,"".concat(a.tc,"=crystals;"),"crystals-=".concat(a.tc,";"),"".concat(a.crystalBank,"+=").concat(a.tc,";"),"wait:1;",t.oxygen&&"((air<".concat(500,"))").concat(a.reset,"=").concat(ba,";"),"".concat(a.reset,"+=1;"),"((".concat(a.reset,">=").concat(ba,"))[").concat(a.doReset,"][").concat(a.loop,"];")),r.event(a.doReset,"crystals+=".concat(a.crystalBank,";"),"".concat(a.needCrystals,"=").concat(a.crystalBank,"+").concat(15,";"),"".concat(a.crystalBank,"=0;"),"wait:1;","enable:lights;","".concat(a.trips,"=0;"),"wait:1;","".concat(a.showMsg,"=2;")),r.declareString(a.msgEnd,{pg:Fn,rng:o}),r.if("".concat(a.showMsg,"==2"),"msg:".concat(a.msgEnd,";"))}},Sa=[{name:"Blackout",...xa,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:2},{of:Ft.LOOSE_ROCK,grow:1},{of:Ft.MIX_FRINGE}),anchorBid:e=>{let{cavern:t,plan:n}=e;return!n.fluid&&n.lakeSize>=3&&n.pearlRadius>0&&!t.context.hasSlugs&&.03*t.context.anchorWhimsy}}],_a=[Le,De,Gn,$n,Zn,Jn,er,tr,nr,rr,ar],Ea={...xt,prime:e=>{let{cavern:t,plan:n}=e;return{tag:"mobFarm",hoardSize:t.dice.prime(n.id).betaInt({a:4,b:4,min:170,max:230})}},mod(e){const t=v({caveCrystalRichness:{base:-.16,hops:.32,order:.32},hallCrystalRichness:{base:0,hops:0,order:0},caveCrystalSeamBias:.7,globalHostilesCap:10,...e.initialContext});return{...e,context:t}},crystalsToPlace:e=>{let{plan:t}=e;return Math.max(t.crystalRichness*t.perimeter,9)},crystalsFromMetadata:e=>4+nr.crystals+e.hoardSize,placeRechargeSeam:gt(3),placeBuildings(e){const[t]=Ue({from:4,queue:[e=>Ce.atTile({...e})]},e);t.foundation.forEach((t=>{let[n,r]=t;return e.tiles.set(n,r,ze.FOUNDATION)})),e.openCaveFlags.set(...t.foundation[0],!0);const n=T(t.foundation[0],e.plan.innerPearl.flatMap((t=>t.filter((t=>{const n=e.tiles.get(...t);return n===ze.DIRT||n===ze.LOOSE_ROCK})))));return e.tiles.set(...n,ze.CRYSTAL_SEAM),{buildings:[t],cameraPosition:me({...L(e.plan.innerPearl[0][0]),aimedAt:[t.x,t.y],pitch:Math.PI/3})}},placeCrystals(e){dt(e);const t=e.plan.innerPearl.flatMap(((e,t)=>t<=2?e:[])).filter((t=>{const n=e.tiles.get(...t);return n&&!n.isWall&&!n.isFluid})),n=e.cavern.dice.placeCrystals(e.plan.id);dt(e,{getRandomTile:()=>n.betaChoice(t,{a:1,b:2.5}),seamBias:0,count:e.plan.metadata.hoardSize})},placeSlugHoles(){},placeLandslides(){},placeEntities(e){let{cavern:t,plan:n,minerFactory:r,vehicleFactory:a}=e;const o=t.dice.placeEntities(n.id),i=t.buildings.find((e=>{var r;return null===(r=t.pearlInnerDex.get(...e.foundation[0]))||void 0===r?void 0:r[n.id]})),s=C.map((e=>M(i.foundation[0],e))).filter((e=>{const n=t.tiles.get(...e);return n&&!n.isWall&&!n.isFluid})),l=ve({...L(o.uniformChoice(s)),rng:o}),c=r.create({loadout:["Drill","JobDriver","JobEngineer"],planId:n.id,...l});return{miners:[c],vehicles:[a.create({template:nr,upgrades:["UpLaser"],planId:n.id,driverId:c.id,...l})]}},objectives(e){let{cavern:t}=e;const n=.6*t.plans[t.anchor].crystals;return{crystals:5*Math.floor(n/5),sufficient:!0}},script(e){let{cavern:t,plan:n,sb:r}=e;const a=Rt("p".concat(n.id,"MbFm"),["msgNotBlocking"]),o=t.dice.script(n.id);r.onInit(..._a.map((e=>"disable:".concat(e.id,";")))),t.objectives.variables.length>0&&(r.declareString(a.msgNotBlocking,{rng:o,pg:Nn}),r.if("crystals>=".concat(t.objectives.crystals),"wait:5;",..._a.map((e=>"enable:".concat(e.id,";"))),"((".concat(Lt.won,"==0))msg:").concat(a.msgNotBlocking,";"))),ir(r)},monsterSpawnScript:e=>vn(e,{initialCooldown:{min:120,max:240},needCrystals:{base:2},tripOnArmed:"always"})},Ra=[{name:"MobFarm.Water",...Ea,...Nt({of:Ft.ALWAYS_FLOOR,width:2},{of:Ft.WATER,width:2,grow:.5},{of:Ft.FLOOR,grow:1},{of:Pt({item:Ft.LOOSE_ROCK,bid:5},{item:Ft.FLOOR,bid:1})},{of:Pt({item:Ft.LOOSE_ROCK,bid:10},{item:Ft.LOOSE_OR_HARD_ROCK,bid:1})},{of:Ft.MIX_FRINGE}),anchorBid:e=>{let{cavern:t,plan:n}=e;return"ice"===t.context.biome&&t.context.hasMonsters&&n.fluid===ze.WATER&&n.pearlRadius>6&&1===n.path.baseplates.length&&n.intersects.some(((e,n)=>{const r=t.plans[n];return!r.fluid&&r.lakeSize>=6}))&&n.intersects.reduce(((e,n,r)=>t.plans[r].fluid?e+1:e),0)<=1&&2}}],Oa={tag:"oreWaste"},ka=Ce.ore+5+6+Ae.ore+5+Me.ore+5+Ie.ore+Fe.ore;const Ca={...xt,mod(e){const t=v({caveOreRichness:{base:.4,hops:.2,order:-.2},caveOreSeamBias:.6,...e.initialContext});return{...e,context:t}},prime:()=>Oa,closer(e){let{cavern:t,tiles:n}=e;n.forEach(((e,r,a)=>{var o;const i=function(e){return e===ze.DIRT?ze.WASTE_DIRT:e===ze.LOOSE_ROCK?ze.WASTE_LOOSE_ROCK:e===ze.HARD_ROCK?ze.WASTE_HARD_ROCK:e===ze.SOLID_ROCK?ze.WASTE_SOLID_ROCK:null}(e);!i||null!==(o=t.pearlOuterDex.get(r,a))&&void 0!==o&&o.some(((e,n)=>"cave"===t.plans[n].kind&&e<1))||n.set(r,a,i)}))},objectives(e){let{cavern:t}=e;if(t.plans.some((e=>{var t;return"buildAndPower"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)})))return;const n=(yt(t)-ka)*t.context.crystalGoalRatio/5;return n<=0?void 0:{studs:5*Math.floor(n/5),sufficient:!1}},script(e){let{sb:t}=e;!function(e){const t=Rt("hintEjectOre",["do","msg"]);e.declareInt(t.do,0),e.when("ore>10","((".concat(Fe.id,"==0))return;"),"((studs<5))return;","".concat(t.do,"=1;")),e.declareString(t.msg,"You're gathering quite the stockpile there. Click on the Tool Store to dispense some ore. Your Rock Raiders can take it to the Ore Refinery to make Building Studs."),e.if("".concat(t.do,">0"),"msg:".concat(t.msg,";"))}(t)}},Aa=[{name:"OreWaste",...Ca,...Nt({of:Ft.ALWAYS_FLOOR,width:2,grow:2},{of:Ft.LOOSE_ROCK,grow:1},{of:Ft.MIX_FRINGE}),anchorBid:e=>{let{cavern:t,plan:n}=e;return!n.fluid&&n.lakeSize>=3&&n.pearlRadius>0&&t.plans.reduce(((e,t)=>t.hasErosion?e+1:e),0)<3&&.03*t.context.anchorWhimsy}}];function La(e,t){return e.filter((e=>{var n;return"disable"!==(null===(n=t.context.architects)||void 0===n?void 0:n[e.name])})).map((e=>{var n;if("encourage"===(null===(n=t.context.architects)||void 0===n?void 0:n[e.name])){const t={...e};return t.caveBid=t=>{var n;return!(null===(n=e.caveBid)||void 0===n||!n.call(e,t))&&999999},t.hallBid=t=>{var n;return!(null===(n=e.hallBid)||void 0===n||!n.call(e,t))&&999999},t.anchorBid=t=>{var n;return!(null===(n=e.anchorBid)||void 0===n||!n.call(e,t))&&999999},t}return e}))}function Ta(e){const t=e.filter((e=>"hops"in e)),n=[];t.forEach((e=>n[e.id]=!0));for(let r=0;r<e.length;r++){const a=t[r];if(!a)throw new Error("Failed to order all plans. (Is the graph disjoint?)");const o=a.intersects.map(((e,t)=>e?t:-1)).filter((t=>t>=0&&!n[t]&&e[t].kind!==a.kind));o.forEach((e=>n[e]=!0)),t.push(...o.map((t=>({...e[t],hops:[...a.hops,a.id]}))))}return t}function Ma(e,t){return e.base+e.hops*t.hops+e.order*t.order}const Ia=["Oh dear.","Uh-oh!","Oh no!","Be careful."],Pa=te("Pandora - Did spawn monster from seam",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(...Ia,i).then("Drilling that Energy Crystal Seam must have upset them.","Try to avoid drilling those seams! The monsters here don't like it.").then(a)})),ja=te("Pandora - Did spawn rogue monster",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(...Ia,i).then((e=>{let{format:{monsters:t}}=e;return"Attacking the ".concat(t," only upsets them!")}),"It seems attacking them attracts more monsters.").then(a)})),Fa=te("Pandora - Did spawn hoard",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(...Ia,i).then("We've upset the horde.","The monsters have started a feast. ").then(a)})),Na=te("Pandora - Approaching hoard",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("This is it!","You're getting very close.",i).then((e=>{let{format:{monsters:t}}=e;return"Make sure your Rock Raiders are armed and ready to take on those "+"".concat(t,".")}),"This will be a tough fight once you breach those walls. Make sure you are ready to defend those Energy Crystals!").then(a)})),Da={tag:"pandora"},Ba=Rt("gPandora",["didSpawnSeam","msgApproachingHoard","msgDidSpawnSeam","msgDidSpawnHoard","msgDidSpawnRogue","onDisturbed","roll","willSpawnHoard","willSpawnRogue"]),Wa=e=>Rt("p".concat(e.id,"Pa"),["approachingHoard","doCollapse","lyDidCollapse","lyWillCollapse","maybeCollapse","spawnHoard"]);function Ha(e){const t=e.buildings.find((t=>{var n;return t.template===Ce&&(null===(n=e.discoveryZones.get(Math.floor(t.x),Math.floor(t.y)))||void 0===n?void 0:n.openOnSpawn)}));if(t)return[t.x,t.y];const n="miners"in e&&e.miners.find((t=>{var n;return null===(n=e.discoveryZones.get(Math.floor(t.x),Math.floor(t.y)))||void 0===n?void 0:n.openOnSpawn}));if(n)return[n.x,n.y];const r=e.plans.find((e=>0===e.hops.length));if(r)return r.path.baseplates[0].center;throw new Error("Failed to find anything to pan to. Is there even a spawn?")}const za={...bt,crystalsToPlace:e=>{let{plan:t}=e;return t.crystalRichness*t.perimeter*20},mod(e){var t;const n={...e.context,caveCrystalSeamBias:Math.max(.6,null!==(t=e.initialContext.caveCrystalSeamBias)&&void 0!==t?t:0)},r=[...e.plans],a=Ta(r),o=ra.flatMap((t=>a.filter((e=>"cave"===e.kind&&e.hops.length>0)).map((n=>({dist:n.hops.length,item:{...n,architect:t,hops:[]},bid:t.anchorBid({cavern:e,plan:n})||0}))))),i=o.reduce(((e,t)=>t.bid>0?Math.max(t.dist,e):e),0),s=e.dice.mod(0).weightedChoice(o.filter((e=>{let{dist:t}=e;return t===i})));r[s.id]=s;const l={...Ke(e)};return delete l.hops,r[l.id]=l,{...e,context:n,plans:r}},prime:()=>Da,placeBuildings(e){let{cavern:t,plan:n,openCaveFlags:r}=e;return n.innerPearl.some((e=>e.some((e=>{var n;return!1===(null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall)&&(r.set(...e,!0),!0)})))),{}},placeCrystals(e){const t=e.cavern.dice.placeCrystals(e.plan.id),n=e.plan.innerPearl.length-3,r=e.plan.innerPearl.flatMap(((e,t)=>t<n?e:[])).filter((t=>{const n=e.tiles.get(...t);return n&&n.hardness<He.HARD})),a=[],o=[];r.forEach((t=>{var n;return(null!==(n=e.cavern.tiles.get(...t))&&void 0!==n&&n.isWall?a:o).push(t)}));const i=Math.round(Math.min(.15*a.length*4,e.plan.crystals/2));dt(e,{count:i,getRandomTile:()=>t.betaChoice(a,{a:4,b:.8}),seamBias:1});const s=Math.round(Math.min(1.3*o.length,(e.plan.crystals-i)/2));dt(e,{count:s,getRandomTile:()=>t.uniformChoice(o)}),dt(e,{count:e.plan.crystals-i-s,getRandomTile:()=>t.betaChoice(a,{a:.8,b:1.5}),seamBias:-1})},placeOre:()=>{},placeSlugHoles:()=>{},placeLandslides:()=>{},placeEntities(e){let{cavern:t,plan:n}=e;const[r,a]=n.innerPearl[0][0];return{cameraPosition:me({x:r,y:a,aimedAt:Ha(t),pitch:Math.PI/3})}},objectives:e=>{let{cavern:t}=e;return{crystals:5*Math.floor(.33*t.plans[t.anchor].crystals/5),sufficient:!1}},scriptGlobals(e){let{cavern:t,sb:n}=e;n.if("time:5","pan:".concat(Ot(t,Ha(t)),";"));const r=Xe(t.context.biome).id;n.declareInt(Ba.didSpawnSeam,0),t.tiles.forEach((function(e){var a;if(e.id!==ze.CRYSTAL_SEAM.id)return;for(var o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(null!==(a=t.pearlInnerDex.get(...i))&&void 0!==a&&a[t.anchor])return;const l=Ot(t,i);n.if("drill:".concat(l),"wait:random(1)(4);",t.context.globalHostilesCap>0&&"((".concat(mn.active,">=").concat(t.context.globalHostilesCap,"))return;"),"emerge:".concat(l,",A,").concat(r,",5;"),"".concat(Ba.didSpawnSeam,"+=1;"))})),n.if("".concat(Ba.didSpawnSeam,">=1"),"msg:".concat(n.declareString(Ba.msgDidSpawnSeam,{pg:Pa,die:u.pandora}),";")),n.when("".concat(r,".wake"),"".concat(Ba.onDisturbed,";")),n.when("".concat(r,".dead"),"((lastcreature.hp>0))return;","".concat(Ba.onDisturbed,";")),n.declareFloat(Ba.roll,0),n.event(Ba.onDisturbed,"((".concat(mn.active,">=").concat(t.context.globalHostilesCap,"))return;"),"".concat(Ba.roll,"=random(0)(100);"),"((".concat(Ba.roll,">75))return;"),"((".concat(Ba.roll,">10))[").concat(Ba.willSpawnRogue,"+=1][").concat(Ba.willSpawnHoard,"+=1];")),n.declareInt(Ba.willSpawnRogue,0);const a=Math.floor((t.right-t.left)/2),o=Math.floor((t.bottom-t.top)/2);n.when("".concat(Ba.willSpawnRogue,">=1"),"wait:random(1)(5);",t.context.globalHostilesCap>0&&"".concat(mn.active,"+=1;"),"emerge:".concat(o,",").concat(a,",A,").concat(r,",").concat(Math.max(a,o),";")),n.if("".concat(Ba.willSpawnRogue,">=1"),"wait:5;","msg:".concat(n.declareString(Ba.msgDidSpawnRogue,{pg:ja,die:u.pandora}),";")),n.declareInt(Ba.willSpawnHoard,0)},script(e){let{cavern:t,plan:n,sb:r}=e;const a=t.dice.script(n.id),o=Wa(n);r.declareInt(o.approachingHoard,0),n.outerPearl[2].filter((e=>t.tiles.get(...e))).map((e=>r.if("enter:".concat(Ot(t,e)),"".concat(o.approachingHoard,"=1;")))),r.if("".concat(o.approachingHoard,">0"),"msg:".concat(r.declareString(Ba.msgApproachingHoard,{pg:Na,rng:a}),";")),r.when("".concat(Ba.willSpawnHoard,">=1"),"".concat(o.spawnHoard,";")),r.if("".concat(Ba.willSpawnHoard,">=1"),"wait:2;","msg:".concat(r.declareString(Ba.msgDidSpawnHoard,{pg:Fa,die:u.pandora}),";"),"pan:".concat(Ot(t,n.path.baseplates[0].center),";"));const i=n.innerPearl.map(((e,r)=>{let a=0,o=0;const i=[],s=[];return r<n.innerPearl.length-3&&e.forEach((e=>{var n,r,l;null!==(n=t.tiles.get(...e))&&void 0!==n&&n.isWall?(i.push(e),a+=null!==(r=t.crystals.get(...e))&&void 0!==r?r:0):(s.push(e),o+=null!==(l=t.crystals.get(...e))&&void 0!==l?l:0)})),{wallCrystals:a,floorCrystals:o,walls:i,floors:s}})),s=Math.min(20,i.reduce(((e,t)=>{let{floorCrystals:n}=t;return e+n}),0));r.when("".concat(Xe(t.context.biome).id,".new"),"".concat(o.maybeCollapse,";"));let l=-1;i.some(((e,n)=>{let{walls:a,wallCrystals:i}=e;return i>0&&a.length>0?(r.event("".concat(o.doCollapse).concat(n),"wait:2;","shake:2;",...a.flatMap(((e,r)=>kt("drill:".concat(Ot(t,e),";"),r%5===4&&n<a.length-1&&"wait:0.4;"))),"wait:1;","".concat(o.lyDidCollapse,"=").concat(n,";")),!1):(l=n,r.declareInt(o.lyWillCollapse,n),r.declareInt(o.lyDidCollapse,n),!0)}))||(()=>{throw new Error("Failed to reach outer layer.")})(),r.event(o.maybeCollapse,"((Crystal_C>".concat(s,"))return;"),"((".concat(o.lyWillCollapse,">=").concat(o.lyDidCollapse,"))[").concat(o.lyWillCollapse,"-=1][return];"),...i.map(((e,t)=>t<l?"((".concat(o.lyWillCollapse,"==").concat(t,"))").concat(o.doCollapse).concat(t,";"):null)))},monsterSpawnScript:e=>vn(e,{tripEvent:Wa(e.plan).spawnHoard,spawnRate:40,tripPoints:e.plan.innerPearl[e.plan.innerPearl.length-3],force:!0}),slugSpawnScript:()=>{}};function Va(e,t){let{roughExtent:n,rough:r}=t;return{roughExtent:n,rough:t=>{r(t);const n=t.plan.intersects.reduce(((e,t,n)=>e>=0?e:n),-1);t.cavern.plans[n].innerPearl[0].forEach((n=>{var r,a;(null!==(r=t.cavern.pearlInnerDex.get(...n)[t.plan.id])&&void 0!==r?r:1/0)<=e&&!1!==(null===(a=t.tiles.get(...n))||void 0===a?void 0:a.isWall)&&t.tiles.set(...n,ze.FLOOR)}))}}}const Ua=e=>({...bt,crystalsToPlace:e=>{let{plan:t}=e;return t.crystalRichness*t.perimeter*2},placeEntities(t){const n=t.cavern.dice.placeEntities(t.plan.id);return{creatures:rt(t,{rng:n,count:3,to:e-1,force:!0})}},placeCrystals(t){const n=t.cavern.dice.placeCrystals(t.plan.id),r=t.plan.innerPearl[e].filter((e=>{var n;return null===(n=t.tiles.get(...e))||void 0===n?void 0:n.isWall}));dt(t,{getRandomTile:()=>n.uniformChoice(r),seamBias:1})}}),Ka=[...Sa,...zt,...wr,...jr,...Nr,...Br,...Yr,...Ra,...$r,...Aa,...[{name:"Pandora.Hoard",...za,...Nt({of:Ft.ALWAYS_DIRT,grow:1},{of:Ft.ALWAYS_FLOOR,width:2},{of:Ft.ALWAYS_HARD_ROCK},{of:Ft.AT_LEAST_HARD_ROCK}),anchorBid:e=>{let{cavern:t,plan:n}=e;return t.context.hasMonsters&&!n.fluid&&_t(t.plans,n,null)&&n.pearlRadius>5&&.1*t.context.anchorWhimsy}},{name:"Pandora.Minihoard",...Ua(2),...Va(4,Nt({of:Ft.ALWAYS_FLOOR,width:2},{of:Ft.ALWAYS_HARD_ROCK},{of:Ft.ALWAYS_SOLID_ROCK},{of:Ft.FLOOR,grow:1},{of:Ft.MIX_DIRT_LOOSE_ROCK,width:0,grow:.5},{of:Ft.MIX_FRINGE})),caveBid:e=>{var t;let{cavern:n,plan:r,plans:a}=e;return"pandora"===(null===(t=a[n.anchor].metadata)||void 0===t?void 0:t.tag)&&!r.fluid&&_t(n.plans,r,null)&&r.pearlRadius>4&&4*n.context.anchorWhimsy}},{name:"Pandora.Minihoard.DeadEnd",...Ua(2),...Nt({of:Ft.ALWAYS_FLOOR,width:2},{of:Ft.MIX_AT_MOST_DIRT_LOOSE_ROCK,width:0,grow:1},{of:Ft.AT_MOST_HARD_ROCK},{of:Ft.MIX_FRINGE}),caveBid:e=>{var t;let{cavern:n,plan:r,plans:a}=e;return"pandora"===(null===(t=a[n.anchor].metadata)||void 0===t?void 0:t.tag)&&!r.fluid&&Et(r)&&r.pearlRadius>2&&4*n.context.anchorWhimsy}},{name:"Pandora.Minihoard.Island",...Ua(2),...Va(4,Nt({of:Ft.ALWAYS_FLOOR,width:2},{of:Ft.ALWAYS_HARD_ROCK},{of:Ft.ALWAYS_SOLID_ROCK},{of:Ft.WATER,grow:1},{of:Ft.MIX_FRINGE})),caveBid:e=>{var t;let{cavern:n,plan:r,plans:a}=e;return"pandora"===(null===(t=a[n.anchor].metadata)||void 0===t?void 0:t.tag)&&r.fluid===ze.WATER&&r.pearlRadius>5&&4*n.context.anchorWhimsy}}],...Zr,...ea,...ra,...la,...da,...ya],Ya=t=>{let{update:n,initialContext:r,cavern:a}=t;function o(e,t){const a={...r.architects};if(void 0===t){if(e in a&&delete a[e],0===Object.keys(a).length)return void n({architects:void 0})}else a[e]!==t&&(a[e]=t);n({architects:a})}const i=(0,e.useMemo)((()=>{var e;const t={};return null===a||void 0===a||null===(e=a.plans)||void 0===e||e.forEach((e=>{var n;return e.architect&&(t[e.architect.name]=(null!==(n=t[e.architect.name])&&void 0!==n?n:0)+1)})),t}),[a]);return[...Ka].map((t=>{var n,s;const l=null===(n=r.architects)||void 0===n?void 0:n[t.name];return(0,D.jsxs)(e.Fragment,{children:[(0,D.jsx)("p",{children:t.name}),(0,D.jsxs)("div",{className:y.inputRow,children:[(0,D.jsx)("button",{className:"".concat(y.choice," ").concat("encourage"===l?y.override:y.inactive),onClick:()=>o(t.name,"encourage"===l?void 0:"encourage"),children:"Encourage"}),(0,D.jsx)("button",{className:"".concat(y.choice," ").concat("disable"===l?y.override:y.inactive),onClick:()=>o(t.name,"disable"===l?void 0:"disable"),children:"Disable"}),"encourage"===l&&!i[t.name]&&null!==a&&void 0!==a&&null!==(s=a.plans)&&void 0!==s&&s.some((e=>"architect"in e))?(0,D.jsx)("div",{className:"".concat(y.architectCount," ").concat(y.icon),children:"warning"}):(0,D.jsx)("div",{className:y.architectCount,children:i[t.name]})]})]},t.name)}))},Ga=Date.now()%s;function qa(){var e;return null!==(e=Qa(window.location.hash))&&void 0!==e?e:Ga}function Qa(e){const t=e.replace(/[^0-9a-fA-F]+/g,""),n=""===t?-1:parseInt(t,16);return n>=0&&n<s?n:void 0}function $a(e,t){const n=e.toString(16).padStart(8,"0").toUpperCase();return t?"".concat(n.substring(0,3)," ").concat(n.substring(3,6)," ").concat(n.substring(6)):n}const Xa=e=>e.caveCount+(e.caveCount-1)+(e.optimalAuxiliaryPathCount+e.randomAuxiliaryPathCount);function Za(e){var t;let{initialContext:n,cavern:r,setInitialContext:a}=e;return(0,D.jsx)(Ja,{initialContext:n,context:null!==(t=null===r||void 0===r?void 0:r.context)&&void 0!==t?t:v(n),cavern:r,setInitialContext:a})}function Ja(t){let{initialContext:n,context:r,cavern:a,setInitialContext:o}=t;const[i,l]=(0,e.useState)(!1),c=(0,e.useCallback)((()=>o((e=>({seed:e.seed})))),[o]),u=(0,e.useCallback)((e=>o((t=>{const n={...t,...e};for(const e of Object.keys(n))void 0===n[e]&&e in n&&delete n[e];return n}))),[o]);(0,e.useEffect)((()=>{const e=()=>{const e=Qa(window.location.hash);void 0!==e&&u({seed:e})};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}}),[u]),(0,e.useEffect)((()=>{window.location.hash=$a(n.seed,!1)}),[n.seed]);const d={update:u,initialContext:n,context:r};return(0,D.jsxs)("div",{className:y.contextInput,children:[(0,D.jsxs)("div",{className:y.inputRow,children:[(0,D.jsx)("input",{type:"text",className:y.seed,value:$a(n.seed,!0),onChange:e=>{const t=Qa(e.target.value);void 0!==t&&u({seed:t})},spellCheck:!1}),(0,D.jsx)("button",{className:y.icon,onClick:()=>u({seed:Math.floor(Math.random()*s)}),children:"ifl"})]}),(0,D.jsx)("div",{className:y.inputRow,children:(0,D.jsxs)("button",{className:"".concat(y.showAdvanced," ").concat(Object.keys(n).length>1&&!i?y.override:""),onClick:()=>l((e=>!e)),children:[(0,D.jsx)("span",{children:"Advanced"}),(0,D.jsx)("span",{className:y.icon,children:i?"expand_less":"expand_more"})]})}),i&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:y.section,children:(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("div",{className:y.inputRow,children:Object.keys(n).length>1?(0,D.jsx)("button",{className:y.override,onClick:c,children:"Clear All Overrides"}):(0,D.jsx)("div",{className:y.invisible})}),(0,D.jsx)(B,{of:"biome",choices:["rock","ice","lava"],...d}),(0,D.jsx)(B,{of:"hasMonsters",choices:[!0,!1],...d}),(0,D.jsx)(B,{of:"hasSlugs",choices:[!0,!1],...d}),(0,D.jsx)(B,{of:"hasAirLimit",choices:[!0,!1],...d})]})}),(0,D.jsxs)("div",{className:y.section,children:[(0,D.jsx)("h2",{children:"Outlines"}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Partition"}),(0,D.jsx)(H,{of:"targetSize",min:40,max:100,...d}),(0,D.jsx)(H,{of:"baseplateMaxOblongness",min:0,max:10,...d}),(0,D.jsx)(H,{of:"baseplateMaxRatioOfSize",min:0,max:1,percent:!0,...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Discriminate"}),(0,D.jsx)(H,{of:"caveCount",min:3,max:50,...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Weave"}),(0,D.jsx)(H,{of:"optimalAuxiliaryPathCount",min:0,max:r.caveCount,...d}),(0,D.jsx)(H,{of:"randomAuxiliaryPathCount",min:0,max:r.caveCount,...d}),(0,D.jsx)(H,{of:"auxiliaryPathMinAngle",min:0,max:Math.PI,angle:!0,...d})]})]}),(0,D.jsxs)("div",{className:y.section,children:[(0,D.jsx)("h2",{children:"Planning"}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Flood"}),(0,D.jsx)(H,{of:"waterPlans",min:0,max:Xa(r),...d}),(0,D.jsx)(H,{of:"lavaPlans",min:0,max:Xa(r),...d}),(0,D.jsx)(H,{of:"waterLakes",min:1,max:r.caveCount,...d}),(0,D.jsx)(H,{of:"lavaLakes",min:1,max:r.caveCount,...d}),(0,D.jsx)(H,{of:"erosionPlans",min:0,max:Xa(r),...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Anchor"}),(0,D.jsx)(z,{of:"anchorGravity",min:-7,max:7,step:.5,...d}),(0,D.jsx)(z,{of:"anchorWhimsy",min:-7,max:7,step:.5,...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Establish"}),(0,D.jsx)(z,{of:"planWhimsy",min:-7,max:7,step:.5,...d}),(0,D.jsx)(Ya,{...d,cavern:a}),["caveCrystalRichness","hallCrystalRichness","caveOreRichness","hallOreRichness","monsterSpawnRate"].map((e=>(0,D.jsx)(W,{of:e,min:-.5,max:1.5,step:.01,...d},e))),(0,D.jsx)(W,{of:"monsterWaveSize",min:-1,max:5,step:.25,...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Pearl"}),(0,D.jsx)(H,{of:"caveBaroqueness",min:0,max:.8,percent:!0,...d}),(0,D.jsx)(H,{of:"hallBaroqueness",min:0,max:.8,percent:!0,...d})]})]}),(0,D.jsxs)("div",{className:y.section,children:[(0,D.jsx)("h2",{children:"Masonry"}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Fine"}),["caveHasRechargeSeamChance","hallHasRechargeSeamChance","caveCrystalSeamBias","hallCrystalSeamBias","caveOreSeamBias","hallOreSeamBias","caveHasSlugHoleChance","hallHasSlugHoleChance"].map((e=>(0,D.jsx)(H,{of:e,min:0,max:1,percent:!0,update:u,initialContext:n,context:r},e)))]})]}),(0,D.jsxs)("div",{className:y.section,children:[(0,D.jsx)("h2",{children:"Plastic"}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Strataform"}),(0,D.jsx)(H,{of:"heightTargetRange",min:0,max:600,step:5,...d}),(0,D.jsx)(H,{of:"stratascosity",min:0,max:20,step:1,...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Strataflux"}),(0,D.jsx)(H,{of:"strataplanity",min:0,max:10,...d}),["caveMaxSlope","hallMaxSlope","voidMaxSlope","borderMaxSlope"].map((e=>(0,D.jsx)(H,{of:e,min:0,max:300,...d},e)))]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Populate"}),["caveHasLandslidesChance","hallHasLandslidesChance"].map((e=>(0,D.jsx)(H,{of:e,min:0,max:1,percent:!0,update:u,initialContext:n,context:r},e)))]})]}),(0,D.jsxs)("div",{className:y.section,children:[(0,D.jsx)("h2",{children:"Ephemera"}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Aerate"}),(0,D.jsx)(H,{of:"airSafetyFactor",min:1,max:5,step:.1,...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Adjure"}),(0,D.jsx)(H,{of:"crystalGoalRatio",min:0,max:.9,percent:!0,...d})]}),(0,D.jsxs)("div",{className:y.subsection,children:[(0,D.jsx)("h3",{children:"Enscribe"}),(0,D.jsx)(H,{of:"globalHostilesCooldown",min:0,max:20,...d}),(0,D.jsx)(H,{of:"globalHostilesCap",min:0,max:40,zeroLabel:"disabled",...d})]})]})]})]})}const eo={cavernPreview:"style_cavernPreview__xf6rH",mapWrapper:"style_mapWrapper__l0TEe",map:"style_map__o4nZU",void:"style_void__RvJKA",baseplate:"style_baseplate__p03X2",fg:"style_fg__nlyiJ",ambiguousKind:"style_ambiguousKind__Pm08h",bg:"style_bg__N5lpK",caveKind:"style_caveKind__x9Yy5",hallKind:"style_hallKind__H+yre",path:"style_path__HXk6H",spanningKind:"style_spanningKind__cv5st",auxiliaryKind:"style_auxiliaryKind__FSAib",plan:"style_plan__QISwv",hasScript:"style_hasScript__rmQOl",isAnchor:"style_isAnchor__9C8Dm",spanningPathKind:"style_spanningPathKind__dvMVJ",auxiliaryPathKind:"style_auxiliaryPathKind__rGxFg",fluid6:"style_fluid6__Oqtv2",fluid11:"style_fluid11__7ylOY",left:"style_left__Yyqc4",label:"style_label__vGz9Y",inline:"style_inline__9fTzz",pointer:"style_pointer__-G8l+",pearl:"style_pearl__std+C",innerPearl:"style_innerPearl__APwPv",outerPearl:"style_outerPearl__MxT-o",layer:"style_layer__Gfelc",layer0:"style_layer0__tooG-",layer1:"style_layer1__XpKZy",layer2:"style_layer2__2BD4B",layer3:"style_layer3__3Kn4w",tiles:"style_tiles__iaD7a",tile:"style_tile__mcUC8",resources:"style_resources__ZHgpN",ore:"style_ore__Kdhpt",ring:"style_ring__GXrU6",crystals:"style_crystals__3O+9O",height:"style_height__e764C",entity:"style_entity__p+Wtq",enemy:"style_enemy__z8gSd",marker:"style_marker__n7Zau",openCaveFlag:"style_openCaveFlag__kH4fE",objectives:"style_objectives__5Dnpp",origin:"style_origin__az-0O",objective:"style_objective__xPw6I",stats:"style_stats__bR5t1",error:"style_error__Oe9Pd"},to=6;function no(e){let{baseplate:t}=e;return(0,D.jsxs)("g",{className:"".concat(eo.baseplate," ").concat(eo["".concat(t.kind,"Kind")]),children:[(0,D.jsx)("rect",{className:eo.bg,x:t.left*to,y:t.top*to,width:t.width*to,height:t.height*to}),(0,D.jsx)("text",{className:eo.fg,x:t.left*to,y:t.top*to+8,children:t.id})]},"bp".concat(t.id))}const ro=6;function ao(e){let{path:t}=e;const n=t.baseplates.map(((e,t)=>{const[n,r]=e.center;return"".concat(0===t?"M":"L").concat(n*ro," ").concat(r*ro)})).join(" ");return(0,D.jsxs)("g",{className:"".concat(eo.path," ").concat(eo["".concat(t.kind,"Kind")]),children:[(0,D.jsx)("path",{id:"path".concat(t.id),d:n,fill:"none"}),(0,D.jsx)("text",{children:(0,D.jsx)("textPath",{href:"#path".concat(t.id),startOffset:"25%",children:t.id})})]},"path".concat(t.id))}const oo=6;function io(e){if(0===e.length)return"";const t=U(e,((e,t)=>{let[n,r]=e,[a,o]=t;const i=(s=[n,r],l=[a,o],Math.abs(s[0]-l[0])<=1&&Math.abs(s[1]-l[1])<=1?"L":"M");var s,l;return"".concat(i).concat((a+.5)*oo," ").concat((o+.5)*oo)})),[n,r]=e[0];return"M".concat((n+.5)*oo," ").concat((r+.5)*oo," ").concat(t.join(" "))}function so(e){let{plan:t,pearl:n}=e;const r="outerPearl"===n?t.innerPearl.length:0;return(0,D.jsx)("g",{className:"".concat(eo.pearl," ").concat(eo[n]," ").concat(eo["".concat(t.kind,"Kind")]),children:t[n].map(((e,t)=>(0,D.jsx)("path",{className:"".concat(eo.layer," ").concat(eo["layer".concat((t+r)%4)]),d:io(e),fill:"none"},t)))})}const lo=6,co=8,uo=600,fo=300;function ho(e){return"tile".concat(e.id)}const po={[ze.WATER.id]:"dwater",[ze.LAVA.id]:"dlava",[ze.SOLID_ROCK.id]:"dsolid"};function mo(e){var t;return null!==(t=po[e.id])&&void 0!==t?t:e.isWall?"dwall":"dfloor"}function go(e){return"scale".concat(Math.min(Math.floor(e),co-1))}function vo(e){let{cavern:t,mapOverlay:n}=e;return t.tiles&&n?(0,D.jsx)("g",{className:eo.tiles,style:{scale:"".concat(lo)},children:t.tiles.map(((e,r,a)=>{const o=function(e,t,n,r,a){switch(t){case"overview":for(let t=-1;t<=1;t++)for(let s=-1;s<=1;s++){var o,i;if(null!==(o=e.discoveryZones)&&void 0!==o&&null!==(i=o.get(r+t,a+s))&&void 0!==i&&i.openOnSpawn)return ho(n)}return null;case"entities":return n===ze.FOUNDATION||n===ze.POWER_PATH?ho(n):mo(n);case"tiles":return ho(n);case"crystals":{var s,l;if(n.crystalYield>0)return ho(n);const t=null!==(s=null===(l=e.crystals)||void 0===l?void 0:l.get(r,a))&&void 0!==s?s:0;return t>0?go(t-1):mo(n)}case"ore":{var c,u;if(n.oreYield>4)return ho(n);const t=(null!==(c=null===(u=e.ore)||void 0===u?void 0:u.get(r,a))&&void 0!==c?c:0)+n.oreYield;return t>0?go(t-1):mo(n)}case"discovery":{var d;const t=null===(d=e.discoveryZones)||void 0===d?void 0:d.get(r,a);return t?t.openOnSpawn?"disco0":"disco1":mo(n)}case"erosion":{var f;if(n===ze.WATER||n===ze.LAVA)return ho(n);const t=null===(f=e.erosion)||void 0===f?void 0:f.get(r,a);if(!t)return mo(n);if(!0===t)return go(co-1);const o=4*t.cooldown+t.initialDelay;return go((co-1)*Math.max(0,1-o/uo))}case"landslides":{var h;const t=null===(h=e.landslides)||void 0===h?void 0:h.get(r,a);if(!t)return mo(n);const o=t.cooldown;return go((co-1)*Math.max(0,1-o/fo))}case"oxygen":var p,m;return(null===(p=e.aerationLog)||void 0===p?void 0:p.get(r,a))?null!==(m=e.crystals)&&void 0!==m&&m.get(r,a)?"oxhc":n.isWall?ho(n):"oxex":mo(n);case"objectives":var g,v,y,b,w;return null!==(g=e.objectives)&&void 0!==g&&g.crystals&&(n.crystalYield>0||null!==(v=e.crystals)&&void 0!==v&&v.get(r,a))?ho(ze.CRYSTAL_SEAM):(null!==(y=e.objectives)&&void 0!==y&&y.ore||null!==(b=e.objectives)&&void 0!==b&&b.studs)&&(n.oreYield>0||null!==(w=e.ore)&&void 0!==w&&w.get(r,a))?ho(ze.ORE_SEAM):mo(n);case"script":return mo(n)}return null}(t,n,e,r,a);if(!o)return null;const i=function(e,t,n,r,a){var o;switch(t){case"crystals":{var i,s;const t=null!==(i=null===(s=e.crystals)||void 0===s?void 0:s.get(r,a))&&void 0!==i?i:0,o=n.crystalYield,l=o>0?"".concat(t," + ").concat(o," from ").concat(n.name):t;return t+o>0&&(n.isWall?"Yields ".concat(l):"".concat(l," on ground"))}case"ore":{var l,c;const t=null!==(l=null===(c=e.ore)||void 0===c?void 0:c.get(r,a))&&void 0!==l?l:0,o=n.oreYield,i=o>0?"".concat(t," + ").concat(o," from ").concat(n.name):t;return t+o>0&&(n.isWall?"Yields ".concat(i):"".concat(i," on ground"))}case"landslides":{var u;const t=null===(u=e.landslides)||void 0===u?void 0:u.get(r,a);return t&&"".concat(t.cooldown,"s")}case"erosion":{var d;const t=null===(d=e.erosion)||void 0===d?void 0:d.get(r,a);return!0===t?null:t&&"".concat(t.cooldown,"s cooldown + ").concat(t.initialDelay,"s delay")}case"discovery":const t=null===(o=e.discoveryZones)||void 0===o?void 0:o.get(r,a);return t&&"".concat(t.openOnSpawn?"Cavern":"Undiscovered cavern"," ").concat(t.id);case"overview":case"tiles":return n.name;default:return null}}(t,n,e,r,a),[s,l]=t.top?[r-t.left,a-t.top]:[r,a];return(0,D.jsx)("rect",{className:eo.tile,fill:"var(--pvw-".concat(o,")"),x:r,y:a,width:1,height:1,children:i&&(0,D.jsxs)("title",{children:[s,", ",l,": ",i]})},"".concat(r,",").concat(a))}))}):null}const yo=6;function bo(e){var t,n,r,a;return K([null===(t=e.template)||void 0===t?void 0:t.name,e.unique||e.loadout&&"Rock Raider",e.level&&"Lv".concat(e.level),(a=K([e.sleep&&"Sleeping",e.essential&&"VIP",...null!==(n=e.loadout)&&void 0!==n?n:[],...null!==(r=e.upgrades)&&void 0!==r?r:[]]).join(", "),a&&"(".concat(a,")"))]).join(" ")}function wo(t){var n,r;let{entity:a,cavern:o,mapOverlay:i}=t;const s=(0,e.useMemo)((()=>function(e){const t=!(null===e||void 0===e||!e.footprint),n=!(null===e||void 0===e||!e.frame),r=t||n,a=t?yo/3:yo/4,o=e===De?-a-yo:-a,i=e===Me?a+yo:a,s=n?yo/2:a,l=e===Fe?-s-yo:-s,c=e===je?s+yo:s;return K(["M".concat(l," ").concat(o),r&&"L".concat(c," ").concat(o),o!==-a&&"L".concat(c+yo/4,", ").concat(-yo),e!==Ne&&"L".concat(c+yo/4," 0"),r&&"L".concat(c," ").concat(a),i!==a&&"L".concat(c," ").concat(i),"L".concat(l," ").concat(i),!r&&"L".concat(-yo/4," 0"),(e===Le||e===Te)&&"L".concat(l-yo/4," 0"),"Z"]).join("")}(a.template)),[a.template]);var l,c;if("overview"===i){if(null===(l=o.discoveryZones)||void 0===l||null===(c=l.get(Math.floor(a.x),Math.floor(a.y)))||void 0===c||!c.openOnSpawn)return null}else if("entities"!==i)return null;return(0,D.jsxs)("g",{className:"".concat(eo.entity," ").concat("sleep"in a?eo.enemy:""),transform:"translate(".concat(a.x*yo," ").concat(a.y*yo,") rotate(").concat(P(a.yaw),")"),children:[(0,D.jsx)("path",{className:eo.marker,d:s,children:(0,D.jsx)("title",{children:bo(a)})}),(null===(n=a.template)||void 0===n?void 0:n.inspectAbbrev)&&(0,D.jsx)("text",{className:eo.label,x:0,y:.75,children:null===(r=a.template)||void 0===r?void 0:r.inspectAbbrev})]})}const xo=6;function So(e){let{x:t,y:n}=e;return(0,D.jsx)("path",{className:eo.openCaveFlag,d:"M0 0 L0 -9 L4 -7 L0 -5 Z",transform:"translate(".concat((t+.5)*xo," ").concat((n+.5)*xo,")")})}const _o=[[-1,-1],[0,-1],[-1,0],[0,0]],Eo=-600,Ro=600,Oo=6;function ko(e){const t=(e-Eo)/(Ro-Eo),n=100*t;return"hsl(".concat((50+200*(1-t)).toFixed()," 50% ").concat(n.toFixed(),"%)")}function Co(e){let{height:t}=e;return(0,D.jsx)("g",{className:eo.height,style:{scale:"".concat(Oo)},children:t.map(((e,t,n)=>(0,D.jsx)("rect",{fill:ko(e),x:t-.5,y:n-.5,width:1,height:1,children:(0,D.jsx)("title",{children:e.toFixed()})},"".concat(t,",").concat(n))))})}function Ao(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:",",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and";const n=r=>{let{chosen:a,index:o}=r;for(let t=o+1;t<a.length;t++)if(a[t]===n)return e;return t};return n}function Lo(e,t){let{pg:n,joiner:r}=e;const a=r||Ao();for(var o=arguments.length,i=new Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];return i.reduce(((e,t)=>n(e,t,e.then(a).then(t))),n(t))}function To(e){let{pg:t,state:n}=e;return Lo({pg:t},t(n("buildAndPowerGcOne").then("build the Geological Center"),n("buildAndPowerGcMultiple").then((e=>{let{format:{buildAndPowerGcCount:t}}=e;return"build ".concat(ae(t)," Geological Centers")}))),t(n("buildAndPowerSsOne").then("build the Support Station"),n("buildAndPowerSsMultiple").then((e=>{let{format:{buildAndPowerSsCount:t}}=e;return"build ".concat(ae(t)," Support Stations")}))),t(n("lostMinersOne").then("find the lost Rock Raider"),n("lostMinersTogether","lostMinersApart").then("find the lost Rock Raiders",(e=>{let{format:{lostMiners:t}}=e;return"find ".concat(oe(t,(e=>"all ".concat(e)))," lost Rock Raiders")}))),n("resourceObjective").then((e=>{let{format:{resourceGoal:t}}=e;return"collect all ".concat(t)}),(e=>{let{format:{resourceGoal:t}}=e;return"get the ".concat(t," we needed")})))}const Mo=["Well done!","Good work!","Outstanding!","I knew you could do it, Cadet!","You're very good at this, Cadet!","Your efforts have been outstanding!","We were right to count on you, Cadet!"],Io=te("Conclusion - Success",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;const s=(()=>{const e=n("commend").then("Wow!",...Mo),a=n("hasMonsters").then((e=>{let{format:{enemies:t}}=e;return"Those ".concat(t," were no match for you!")}),(e=>{let{format:{enemies:t}}=e;return"You had nothing to fear from those ".concat(t,"!")})),o=t("Despite the odds,","In the face of danger,","Even with the odds against you,");return a.then(o),r.then(i,e,a).then(i,n("hasMonsters","spawnHasErosion","anchorIsGasLeak").then(o))})(),l=t();s.then("you").then(t("managed to","were able to").then(To({pg:t,state:n})).then(".",n("hasMonsters").then((e=>{let{format:{enemies:t}}=e;return"despite that horde of ".concat(t,"!")}))),Lo({pg:t},n("findHq").then("found the base"),n("hqIsRuin").then("repaired the Rock Raider HQ","restored our mining operations"),n("buildAndPowerGcOne").then("constructed the Geological Center","built the Geological Center where we needed it"),n("buildAndPowerGcMultiple").then((e=>{let{format:{buildAndPowerGcCount:t}}=e;return"built ".concat(2===t?"both":ae(t)," Geological Centers")})),n("buildAndPowerSsOne").then("constructed the Support Station","built the Support Station where we needed it"),n("buildAndPowerSsMultiple").then((e=>{let{format:{buildAndPowerSsCount:t}}=e;return"built ".concat(2===t?"both":ae(t)," Support Stations")})),t(n("lostMinersOne").then("found the lost Rock Raider","located the lost Rock Raider"),n("lostMinersTogether","lostMinersApart").then("found the lost Rock Raiders","located the lost Rock Raiders",(e=>{let{format:{lostMiners:t}}=e;return"found ".concat(2===t?"both":"all ".concat(ae(t))," Rock Raiders")}))).then(i,t(", safe and sound.",n("resourceObjective").then((e=>{let{format:{resourceGoal:t}}=e;return". You even collected ".concat(t,"!")}),(e=>{let{format:{resourceGoal:t}}=e;return". Collecting ".concat(t," was no small feat either!")}))).then(l).then(o)),n("resourceObjective").then((e=>{let{format:{resourceGoal:t}}=e;return"collected ".concat(t)}),(e=>{let{format:{resourceGoal:t}}=e;return"collected all ".concat(t)}),(e=>{let{format:{resourceGoal:t}}=e;return"got all ".concat(t)}))).then(".").then(l)).then("\n\n").then(i,n("commend").then("Keep up the good work, Cadet!","You make this look rather easy, Cadet!",...Mo)).then("Mission Complete!").then(i,n("hasMonsters")).then(i,n("spawnHasErosion")).then(a),s.then(t(n("buildAndPowerGcOne").then("That Geological Center you built will be very useful to decide where we can mine next."),n("buildAndPowerGcMultiple").then("Those Geological Centers you built are already helping us far beyond the reaches of this cavern.")).then(i,"We already have a promising lead!",(e=>{let{format:{buildAndPowerGcCount:t}}=e;return"With ".concat(1===t?"this":"these"," built, we can safely make our way further into the planet.")}))).then(i,n("hasMonsters")).then(l)})),Po=te("Conclusion - Mission Failed",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then(i,"Oh, dear.","Bad luck!").then("You didn't","You couldn't","You were unable to","We were counting on you to").then(To({pg:t,state:n})).then(".").then(i,"You must succeed, Cadet!",t(i,"Chin up, Cadet!").then("You'll do better next time.")).then("\n\nMission Failed!").then(a)})),jo=te("Mission Name",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;function s(e){let{rock:t,ice:s,lava:l,mid:c,last:u}=e;r.then(t?n("rockBiome").then(...t):o,s?n("iceBiome").then(...s):o,l?n("lavaBiome").then(...l):o).then(i,...c||[]).then(...u).then(a)}s({rock:["Amethyst","Andesite","Anthracite","Argillite"],ice:["Arctic","Avalanche"],lava:["Asbestos","Ashen"],last:["Abyss","Action","Alley","Attack"]}),s({rock:["Basalt","Basanite","Bauxite","Boulder","Breccia","Bullion"],ice:["Blizzard"],last:["Balance","Blitz","Breach","Break","Bonanza","Burrow"]}),s({rock:["Chalk","Claystone","Core","Crystal"],ice:["Chilly","Cold"],lava:["Caldera","Cinder"],last:["Calamity","Caper","Cavern","Chaos","Conflict","Conundrum","Cruise"]}),s({rock:["Diamond","Diorite","Dolomite","Dunite"],ice:["Dichoric","Drift"],last:["Depths","Dash","Descent","Despair","Drive"]}),s({rock:["Emerald","Evaporite"],lava:["Ember"],last:["Enigma","Eruption","Excavation","Express"]}),s({rock:["Fault Line","Final","Fissure","Flint"],ice:["Frostbite","Frosty"],last:["Folly","Frenzy","Fury"]}),s({rock:["Garnet","Giga Granite","Gneiss","Granite","Gritstone","Gypsum"],ice:["Giga Glacier","Glacial","Glacier"],last:["Gauntlet","Getaway"]}),s({ice:["Iceberg","Icicle"],lava:["Igneous","Infernal"],last:["Impact","Incursion","Inset","Intrusion"]}),s({rock:["Lapis Lazuli","Laterite","Lignite","Limestone","Lithosphere"],lava:["Lava","Lava Lake","Lithic"],last:["Labyrinth","Lair","Lure"]}),s({rock:["Marble","Metamorphic","Mineral","Mudstone"],ice:["Mammoth"],lava:["Mafic","Magma","Mantle","Molten"],mid:["Mine","Moon"],last:["Mayhem","Maze","Meltdown","Menace","Mishap"]}),s({ice:["Ice Planet","Permafrost","Polar"],lava:["Pumice","Pyroclastic","Pyrolite"],last:["Passage","Peril","Pit","Plunge","Puzzle"]}),s({rock:["Sandstone","Schist","Sedimentary","Seismic","Shale","Silica","Silt","Slate","Stalactite"],ice:["Snowdrift","Sub-Zero"],mid:["Shaft"],last:["Scramble","Shock","Showdown","Slide"]}),s({rock:["Tuff","Turbidite","Twilight"],ice:["Taiga","Titanic","Tundra"],mid:["Tunnel"],last:["Tempest","Terror","Trouble"]})})),Fo=["2000","3000","Ablated","Actual Final Version 2","And Beyond","As Seen On PC","Boosted","Chief's Version","Chrome Edition","Denali","Diamond Version","Director's Cut","Emerald Version","Enhanced","Episode One","Episode Two","Extended","Extremely Fungible Edition","Forever","Founders Edition","Gold Version","Green Crystal Version","HD","HD 1.5 Remix","Inspired by True Events","Into Darkness","Limited Edition","Millenium Edition","New","Now With Flavor","Onyx Version","Original Level, Do Not Steal","Pioneers Edition","Planet U Remix","Platinum Version","Power Brick Edition","Premium","Rebirthed","Reborn","Recoded","Rectified","Recycled","Redux","Rehashed","Reimagined","Reloaded","Remixed","Resurrection","Retooled","Revenant","Revolutions","Ruby Version","Sapphire Version","Shadow Operation","Silver Version","Slug Armor Edition","Special Edition","The Beginning","Unhinged","Unglued","Ungrounded","Unleaded","Unleashed","Unlocked","Unobtaininum Version","Unplugged","Unsanctioned","Unstable","Unverified","Uranium Version","XP","Xtreme Edition","Y2K Compliant Edition","Y2K Edition"],No=te("Briefing - Orders",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;const s=t((e=>{let{format:{resourceGoal:t}}=e;return"collect ".concat(t,".")}),(e=>{let{format:{resourceGoal:t}}=e;return"continue our mining operation by collecting ".concat(t,".")})),l=t((e=>{let{format:{resourceGoal:t}}=e;return"we need ".concat(t,".")}),(e=>{let{format:{resourceGoal:t}}=e;return"you need to collect ".concat(t,".")})),c=t("Best of luck!","Good luck out there!","We're counting on you!").then(a),u=t(c,a),d=Ao();r.then(n("hasMonsters").then(i,n("hasSlugs")).then("defend the Rock Radier HQ","build up your defenses","arm your Rock Raiders").then(d),n("hasSlugs").then("defend the Rock Radier HQ","arm your Rock Raiders").then(d),t(i,n("nomadsOne","nomadsMany"),n("spawnIsHq").then(n("hqIsRuin","spawnHasErosion")).then("move to a safer cavern","find a more suitable location").then(d)).then("build the Rock Raider HQ","build up your base",n("spawnHasErosion").then("get your Rock Raiders to safety","make sure your Rock Raiders are safe"),n("spawnIsHq").then("send some Rock Raiders down to this base",t("resume our mining operations").then(d).then(s).then(o),n("hqIsRuin").then("clean up this mess","get the Rock Raider HQ back in operation"),n("hqIsFixedComplete").then(i,n("spawnHasErosion")).then("keep this base in good working order","maintain what you do have here")),n("findHq").then(i,n("spawnHasErosion")).then("reach the Rock Raider HQ","locate the base").then(i,n("hqIsRuin").then(d).then("salvage what's left","repair it","get it back in working order"))).then(i,t(d).then(n("hasMonsters").then(n("hasSlugs"),i),n("hasSlugs")).then("keep it safe","make sure it is heavily defended")).then(". Use it to",". When you're ready,",". You must",t(". Then,").then(l).then(o))).then(i,s.then(o),t(n("buildAndPowerGcOne").then("construct a Geological Center in the marked cavern, upgrade it to Level 5, and keep it powered on."),n("buildAndPowerGcMultiple").then((e=>{let{format:{buildAndPowerGcCount:t}}=e;return"build a Geological Center in ".concat(2===t?"both":"each"," of the marked caverns")})).then(", upgrade them to Level 5, and keep them powered on.","and upgrade them all to Level 5. They must all be powered at the same time for the scans to work properly."),n("buildAndPowerSsOne").then("construct a Support Station in the marked cavern and find someway to power it.","go to the island we've chosen and build a Support Station there. It will need power, so build a Power Station too."),n("buildAndPowerSsMultiple").then((e=>{let{format:{buildAndPowerSsCount:t}}=e;return"build a Support Station in ".concat(2===t?"both":"each"," of the marked caverns")})).then(", and keep them powered on. We think this will mitigate the gas.")).then(c,t("Finally,").then(s).then(o),t("Then,"))).then(t("find","locate","search the cavern for").then(n("lostMinersOne").then("the","that").then("lost Rock Raider","missing Rock Raider"),n("lostMinersTogether").then("the","that").then("cavern with the lost Rock Raiders","missing group of Rock Raiders"),n("lostMinersApart").then("the","those").then("lost Rock Raiders","missing Rock Raiders")).then(".",n("hasMonsters").then((e=>{let{format:{enemies:t}}=e;return"before the ".concat(t," do!")}))).then(u,t("Once you've found them,","With them safe,","When they are safe,").then(l,s))),t(l,s).then(n("resourceObjective")).then(u)})),Do=te("Briefing - Premise",(e=>{let{pg:t,state:n,start:r,end:a,cut:o,skip:i}=e;r.then("Our mining operations have been going smoothly, and we are ready to move on to the next cavern.","There is nothing out of the ordinary to report today.","Things have been quiet and I hope they should remain that way, Cadet!").then(a);const s=r.then(t("Are you ready for the next mission?","Welcome back, Cadet.","I hope you're prepared for this one, Cadet.","Up and at 'em, Cadet!","Cadet, are you up for some more action?",n("floodedWithWater").then("Are you ready to set sail?","I hope you packed your lifejacket, Cadet."),n("floodedWithLava").then("I hope you're not afraid of a little heat!","You'd better keep your cool with this one!")).then("\n\n"),i).then(t(),n("hasGiantCave")),l=Lo({pg:t},n("spawnHasErosion").then("we are concerned about nearby lava flows that could engulf this cavern","you will need to keep an eye on the volcanic activity in this cavern to avoid being buried in lava",t("we are dangerously close to a cavern full of lava. Left unchecked, this whole area could be consumed by molten rock!").then(a)),n("anchorIsBlackout").then("the unusual magnetic properties of the rock here might interfere with our equipment","there are unusual magnetic readings in this cavern and we're concerned about the effects that might have on our equipment"),n("anchorIsOreWaste").then("the rock in this cavern has very little ore"),t(n("hasMonsters").then(i,n("hasSlugs")),n("hasSlugs")).then("the tunnels here are full of large creatures that threaten our operations","we are picking up signs of large creatures in the area",(e=>{let{format:{enemies:t}}=e;return"this cavern is inhabited by nests of ".concat(t)}),(e=>{let{format:{enemies:t}}=e;return"we have reason to believe there are dozens of ".concat(t," just out of sight")})),n("anchorIsGasLeak").then("the atmosphere in this cavern contains a toxic gas that might explode when exposed to plasma").then(" - which means we cannot rely on Electric Fences.",". While our laser weapons should be fine, a single Electric Fence could blast us all into tiny bits of ABS.").then(a),n("hqIsFixedComplete").then("the teleporters are operating in a low-power mode, so").then("you will not be able to construct any more buildings.","you must make do with the buildings that are already constructed.").then(a)).then(".").then(a);s.then(n("findHq")).then(i,n("spawnHasErosion")).then(i,n("treasureCaveOne","treasureCaveMany")).then(i,n("nomadsOne","nomadsMany")).then(i,n("buildAndPowerGcOne","buildAndPowerGcMultiple")).then("A forward team has established Rock Raider HQ in the viscinity, but we haven't had the means to use it yet.","There should be a base near here primed and ready for our mining operations, but our teleporters are unable to get a lock on it for some reason.","We've had our eyes on this region and were all set to mine here. Unfortunately, the signed copy of Form 27b-6 went missing below a desk, we forgot about it, and now we aren't exactly sure where that base is.",n("hasMonsters").then(i,n("hasSlugs")).then((e=>{let{format:{enemies:t}}=e;return"We were all set to mine this cavern, but the team was scared off by readings of ".concat(t," in the area. They left in such a hurry that they forgot to record where exactly the Rock Raider HQ is.")}),(e=>{let{format:{enemies:t}}=e;return"There should be a base near here, but it's not showing up on our scanners. We hope it hasn't been destroyed by ".concat(t,", but to be safe, we're sending you to a nearby cavern instead.")})),n("hasSlugs").then("We were all set to mine this cavern, but the team was scared off by a Slimy Slug that suddenly appeared in the middle of our HQ. They even left without recording their location properly.",(e=>{let{format:{enemies:t}}=e;return"There should be a base near here, but it's not showing up on our scanners. Some interference from ".concat(t," must have shut off its location beacon! To be safe, we're sending you to a nearby cavern instead.")}))).then(a);const c=t("Also,","If that wasn't hard enough,","It gets worse:").then(l);s.then(t(n("buildAndPowerGcOne","buildAndPowerGcMultiple")).then(i,n("treasureCaveOne","treasureCaveMany")).then(i,"We're sending you to a cavern deep within the planet.").then(t("Our long-range scanners","The scanners up on the L.M.S. Explorer").then("are unable to penetrate the geology in this area and we need some way to amplify them. That's where you come in - we need a team to scan the area manually","have been unreliable at this depth and we'd like to understand the area better"),n("anchorIsBlackout").then("There seems to be some geomagnetic anomaly in this area and researching it could prove vital to our mining operations")),t(t("A recent scan","Our most recent geological survey").then("found","has discovered","has indicated"),t("We","The scanners","The scanners aboard the L.M.S. Explorer").then("have found","have located","have discovered")).then(n("treasureCaveOne").then("a large Energy Crystal signature near here","a nearby cave with an abundance of Energy Crystals"),n("treasureCaveMany").then("large deposits of Energy Crystals in this cavern","a cave system with an abundance of Energy Crystals"),n("hasGiantCave").then('a nearby cavern approximately the size of "yes"'),"another cavern where we can continue our mining operations"),n("anchorIsBlackout").then("We found a cavern with unusual geomagnetic properties. We believe it will have plenty of Energy Crystals","We're sending you to a cavern deep within the planet where we've been picking up unusual magnetic readings").then(i,n("treasureCaveOne","treasureCaveMany"))).then(t(".").then(a),t(". \n\nHowever,",". \n\nUnfortunately,",". \n\nUnfortunately for us,",". \n\nThe bad news?",". Use caution!",", but proceed with caution!\n\n",", but this is no walk in the park.").then(l,n("findHq").then("we already sent another team down here before, and they failed miserably. You should be able to find their Rock Raider HQ nearby","you aren't the first to attempt this mission. You'll find an existing base somewhere in the viscinity").then(".",n("hqIsRuin").then(" - or what's left of it at least.")).then(c)),n("spawnIsHq").then(", and we have established our Rock Raider HQ.",", and our HQ is ready to go!").then(t("\n\nHowever,","\n\nUnfortunately,","\n\nUnfortunately for us,","\n\nThe bad news?","Don't be fooled, though.","I do ask that you be careful down there!").then(l),a),t(n("nomadsOne").then(". Your mission is to find a suitable location for our Rock Raider HQ."),n("nomadsMany").then(". We haven't yet chosen where to establish our base, so I'm leaving that decision to you.",", and I've picked this team to decide where to build our HQ.")).then(i,t(n("hasMonsters").then(i,n("hasSlugs")),n("hasSlugs")).then((e=>{let{format:{enemies:t}}=e;return"\n\nBe on the lookout for ".concat(t,", especially once you start construction.")}),(e=>{let{format:{enemies:t}}=e;return"Use caution! There may be ".concat(t," afoot and I don't want you taking any unnecessary risk.")}))).then(i,n("spawnHasErosion")).then(a)),s.then(n("anchorIsMobFarm")).then("We discovered this incredible cave with the abundance of Energy Crystals you now see before you.","As you can see, we have located a cave with an absurd number of Energy Crystals.").then("We meant to teleport you onto that island, but something is interfering with the signal.","That many Energy Crystals in one place seems to be interfering with our teleporters.").then("We are extremely limited in what vehicles we can send down to you, so you'll have to get the crystals some other way.").then(i,n("hasMonsters")).then(i,n("hasSlugs")).then(i,n("spawnHasErosion")).then(i,n("treasureCaveOne","treasureCaveMany")).then(i,t("\n\nThere's one more thing - ").then(i,"you aren't the first to arrive here.").then(n("lostMinersApart").then("Some of our Rock Raiders were scattered a bit further away from the island. By our readings, they seem to be in separate caverns nearby"),n("lostMinersTogether").then("We already sent a team down here, but they failed to check in").then(i,". We believe they are stranded in a nearby cavern"),n("lostMinersOne").then("One of our Rock Raiders was teleported to another cavern somewhere near here","One of our Rock Raiders didn't come down with the group. They should be somewhere nearby")).then("and we're counting on you to rescue them!",". I know I can count on you to reach them.",".")).then(a),s.then(n("anchorIsPandora")).then("We've located an unusual cavern with a massive cache of Energy Crystals. Of course, it couldn't be that easy - the cavern has more monsters than we've ever seen before!",(e=>{let{format:{monsters:t}}=e;return"The bounty before your eyes is one of the largest loose crystal deposits I've ever seen, and it is, unfortunately, guarded by an "+"army of ".concat(t,".")})).then("Our scouts report they seem a bit shy and probably won't bother us unless we disturb the Energy Crystals here.",(e=>{let{format:{monsters:t}}=e;return"Early scouting of this area suggests the ".concat(t," are fairly ")+"docile and won't attack as long as we aren't disturbing their food source."})).then(i,n("hasSlugs").then("The Slimy Slugs here might be a problem, though.")).then(i,t(n("lostMinersOne").then("\n\nOne of the scouts"),n("lostMinersTogether","lostMinersApart").then("\n\nThe team")).then("hasn't reported back yet, so we're sending you to find them.")).then(i,n("treasureCaveOne"),n("treasureCaveMany")).then(i,n("spawnHasErosion")).then(i,n("hasGiantCave")).then(i,n("hasMonsters")).then(a);const u=t(s,r.then("Things have been going smoothly... until now!","Bad news, Cadet!","We need your help, Cadet.","Oh, dear.").then("\n\n")),d=t("we're counting on you to find them!","we don't know how long they'll last out there.",n("hasMonsters").then((e=>{let{format:{enemies:t}}=e;return"we need to find them before the ".concat(t," do.")}),(e=>{let{format:{enemies:t}}=e;return"I hope they don't meet any of the ".concat(t," roaming this cavern.")}))),f=t("we're counting on you to find the others!",n("hasMonsters").then((e=>{let{format:{enemies:t}}=e;return"you need to find the others before the ".concat(t," do.")})));t(d,f).then(n("spawnHasErosion"),i).then(n("hasSlugs"),i).then(i,n("anchorIsGasLeak").then("Our geologists have warned me that the air in this cavern contains a gas that reacts explosively with plasma, so we can'trely on Electric Fences."),n("anchorIsOreWaste").then("This cavern has very little ore, so build only what you really need").then("!",n("anchorIsGasLeak").then(" - and no Electric Fences either. The atmosphere here would likely react with plasma... explosively."))).then(i,n("anchorIsBlackout").then("\n\nOne more thing to look out for: We're picking up some unusal magnetic disturbances").then(", so be prepared for anything.",", so be careful down there!",n("buildAndPowerGcOne","buildAndPowerGcMultiple").then(". Perhaps while you're down there, you can extend the range of our scanners.")),n("buildAndPowerGcOne","buildAndPowerGcMultiple").then("\n\nWhile you're down there, we need you to extend the range of our scanners.")).then(a),u.then(n("treasureCaveOne","treasureCaveMany"),i).then(i,n("spawnIsHq","findHq").then("We established our Rock Raider HQ, but","We constructed our base and were ready to begin mining. Unfortunately,")).then(n("nomadsOne").then("a teleporter malfunction sent this Rock Raider to an uncharted cavern.","the teleporter on the L.M.S. Explorer has been acting up again and one of our Rock Raiders is trapped in an uncharted cavern.","one of our Rock Raiders was accidentally sent to the wrong cavern!"),n("nomadsMany").then("a teleporter malfunction sent a group of our Rock Raiders to an uncharted cavern.","the teleporter on the L.M.S. Explorer has been acting up again and a group of our Rock Raiders ended up in an uncharted cavern."),t(n("lostMinersOne").then("a teleporter malfunction sent one of our Rock Raiders to a cavern near here.","the teleporter on the L.M.S. Explorer has been acting up again and one of our Rock Raiders is trapped in an uncharted cavern.","one of our Rock Raiders was accidentally sent to the wrong cavern!"),n("lostMinersTogether").then("a teleporter malfunction sent a group of our Rock Raiders to a cavern near here.","the teleporter on the L.M.S. Explorer has been acting up again and a group of our Rock Raiders ended up in an uncharted cavern."),n("lostMinersApart").then((e=>{let{format:{lostMiners:t}}=e;return"a teleporter malfunction scattered ".concat(ae(t)," of our Rock Raiders throughout this cavern.")}),(e=>{let{format:{lostMinerCaves:t}}=e;return"the teleporters have failed again and ".concat(ae(t)," groups of Rock Raiders are lost somewhere in this cavern.")}))).then(i,d.then(o)),n("nomadsOne","nomadsMany").then(n("lostMinersOne","lostMinersTogether","lostMinersApart")).then("a teleporter malfunction left our Rock Raiders scattered throughout this cavern.").then(i,f.then(o))).then(n("hqIsFixedComplete").then("While the teleporters have been repaired, they are operating in a low-power mode and cannot send down any buildings.","We cannot risk running the teleporters at full power, so you will have to make do with the buildings that are already there.").then(c),t("Our engineers have assured us the teleporters have been repaired, but","While the teleporters are back in working order,").then(l),c),u.then(n("hqIsRuin")).then(n("treasureCaveOne","treasureCaveMany"),i).then(n("buildAndPowerGcOne","buildAndPowerGcMultiple"),i).then(n("hasSlugs"),i).then("Recent seismic activity has damaged our Rock Raider HQ","An earthquake in this area has caused several cave-ins and destroyed part of our Rock Raider HQ",n("hasMonsters").then((e=>{let{format:{enemies:t}}=e;return"A horde of ".concat(t," attacked our Rock Raider HQ")}))).then(t(", and").then(i,n("spawnIsHq","findHq")).then(t(n("lostMinersOne").then("one of our Rock Raiders is missing."),n("lostMinersTogether").then("a group of Rock Raidiers are missing.","a group of Rock Raidiers are trapped somewhere in the cavern."),n("lostMinersApart").then("some of our Rock Raidiers are missing.","our Rock Raiders are trapped throughout the cavern.")).then(i,d.then(o)),n("nomadsOne","nomadsMany").then(n("lostMinersOne","lostMinersTogether","lostMinersApart")).then("our Rock Raiders have been scattered throughout this cavern.").then(i,f.then(o))).then(c,l),t(". We were able to evacuate in time",". All of our Rock Raiders made it out",". We evacuated the cavern",". Everyone evacuated safely").then(n("findHq").then(", but this is as close as we can get for now.",", but without the homing beacon we don't want to risk teleporting anyone directly inside.",n("nomadsOne").then(", but we can't get you any closer than this.",", but we cannot risk teleporting you in any closer than this.",", and we want you to return to the base and salvage what's left of it."),n("nomadsMany").then(", and you'll be leading the salvage team.",", and this is the team that will restore our operations.")),n("spawnIsHq").then(", but this is all that's left.","and now we need to pick up the pieces and try again.")).then(l,a)),r.then(n("hasGiantCave")).then(i,n("floodedWithWater","floodedWithLava")).then('We\'ve got news for you, Rock Raider! Our geological scanners have discovered a nearby cave approximately the size of "yes".').then(i,n("hasMonsters")).then(i,n("hasSlugs")).then(i,n("spawnHasErosion")).then(i,n("spawnIsHq","findHq")).then(i,n("treasureCaveOne","treasureCaveMany")).then(i,n("nomadsOne","nomadsMany","anchorIsBlackout")).then(i,n("buildAndPowerGcOne","buildAndPowerGcMultiple")).then(a),r.then(n("floodedWithWater")).then(n("lostMinersOne")).then(n("spawnIsHq")).then("A man has fallen into the river under Planet U!\n\nBuild the Docks! Build the Rapid Rider and off to the rescue. Follow the shoreline! Find the missing Rock Raider!").then(i,n("hasMonsters")).then(i,n("hasSlugs")).then(i,n("spawnHasErosion")).then(i,n("treasureCaveOne","treasureCaveMany")).then(a)}));function Bo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and";return 0===e.length?"":1===e.length?e[0]:"".concat(e.slice(0,-1).join(", ")," ").concat(t," ").concat(e[e.length-1])}function Wo(e){const t=[{count:e.crystals,name:"Energy Crystals"},{count:e.ore,name:"Ore"},{count:e.studs,name:"Building Studs"}].filter((e=>{let{count:t}=e;return t>0}));return{resourceGoal:Bo(t.map((e=>{let{count:t,name:n}=e;return"".concat(ae(t)," ").concat(n)}))),resourceGoalNumbers:Bo(t.map((e=>{let{count:t,name:n}=e;return"".concat(t," ").concat(n)}))),resourceGoalNamesOnly:Bo(t.map((e=>{let{name:t}=e;return t})))}}class Ho{constructor(e){var t,n,r,a;this.state=void 0,this.format=void 0;const o=function(e){let t=0,n=0;for(const r of e.plans)r.fluid===ze.LAVA?t++:r.fluid===ze.WATER&&n++;return t/e.plans.length>.4?ze.LAVA:n/e.plans.length>.4?ze.WATER:null}(e),{lostMiners:i,lostMinerCaves:s}=Hr(e),l=Ke(e),c=e.plans.find((e=>!e.hops.length)),u=e.objectives.crystals+e.objectives.ore+e.objectives.studs>0,d=e.plans.find((e=>{var t;return"hq"===(null===(t=e.metadata)||void 0===t?void 0:t.tag)})),f=Object.is(l,d),h=Object.is(c,d),p="fixedComplete"===(null===d||void 0===d?void 0:d.metadata.special),m=!!d&&!h,g=!(null===d||void 0===d||!d.metadata.ruin),v=e.plans.reduce(((e,t)=>{var n;return"buildAndPower"===(null===(n=t.metadata)||void 0===n?void 0:n.tag)&&t.metadata.template===je?e+1:e}),0),y=e.plans.reduce(((e,t)=>{var n;return"buildAndPower"===(null===(n=t.metadata)||void 0===n?void 0:n.tag)&&t.metadata.template===Ie?e+1:e}),0),b=e.plans.reduce(((e,t)=>{var n;return"nomads"===(null===(n=c.metadata)||void 0===n?void 0:n.tag)?e+c.metadata.minersCount:e}),0),w=e.plans.reduce(((e,t)=>{var n;return"treasure"===(null===(n=t.metadata)||void 0===n?void 0:n.tag)?e+1:e}),0),x=e.plans.some((t=>t.pearlRadius>20&&4*t.pearlRadius>e.context.targetSize)),S=e.context.hasMonsters;this.state={anchorIsBlackout:"blackout"===(null===(t=l.metadata)||void 0===t?void 0:t.tag),anchorIsGasLeak:f&&"gasLeak"===d.metadata.special,anchorIsMobFarm:"mobFarm"===(null===(n=l.metadata)||void 0===n?void 0:n.tag),anchorIsOreWaste:"oreWaste"===(null===(r=l.metadata)||void 0===r?void 0:r.tag),anchorIsPandora:"pandora"===(null===(a=l.metadata)||void 0===a?void 0:a.tag),buildAndPowerGcMultiple:v>1,buildAndPowerGcOne:1===v,buildAndPowerSsMultiple:y>1,buildAndPowerSsOne:1===y,findHq:m,floodedWithLava:o===ze.LAVA,floodedWithWater:o===ze.WATER,hasAirLimit:!!e.oxygen,hasGiantCave:x,hasMonsters:S,hasSlugs:e.context.hasSlugs,hqIsFixedComplete:p,hqIsRuin:g,iceBiome:"ice"===e.context.biome,lavaBiome:"lava"===e.context.biome,lostMinersApart:s>1,lostMinersOne:1===i,lostMinersTogether:i>1&&1===s,nomadsMany:b>1,nomadsOne:1===b,resourceObjective:u,rockBiome:"rock"===e.context.biome,spawnHasErosion:c.hasErosion,spawnIsHq:h,treasureCaveMany:w>1,treasureCaveOne:1===w};const _={rock:"Rock Monsters",ice:"Ice Monsters",lava:"Lava Monsters"}[e.context.biome],E=K([S&&_,e.context.hasSlugs&&"Slimy Slugs"]).join(" and ");this.format={buildAndPowerGcCount:v,buildAndPowerSsCount:y,enemies:E,lostMinerCaves:s,lostMiners:i,monsters:_,...Wo(e.objectives)}}briefings(e){return{name:jo.generate(e.lore(u.name),this.state,this.format),premise:Do.generate(e.lore(u.premise),this.state,this.format),orders:No.generate(e.lore(u.orders),this.state,this.format),success:Io.generate(e.lore(u.success),{...this.state,commend:!0},this.format),failure:Po.generate(e.lore(u.failure),this.state,this.format)}}}function zo(e){let{entities:t}=e;const n={};return null===t||void 0===t||t.forEach((e=>{var t;const r=e.template.inspectAbbrev;n[r]=(null!==(t=n[r])&&void 0!==t?t:0)+1})),(0,D.jsxs)(D.Fragment,{children:[!Object.entries(n).length&&"n/a",Object.entries(n).map((e=>{let[t,n]=e;return"".concat(t).concat(n>1?"x".concat(n):"")})).join(" ")]})}function Vo(e){let{cavern:t,mapOverlay:n}=e;const r=((e,r,a,o,i,s,l,c,u,d)=>{switch(n){case"overview":return(0,D.jsxs)(D.Fragment,{children:[t.levelName&&(0,D.jsx)("h1",{children:t.levelName}),(0,D.jsx)("p",{children:null!==(e=t.fileName)&&void 0!==e?e:t.initialContext.seed.toString(16)}),(0,D.jsx)("p",{children:null!==(r=null===(a=t.briefing)||void 0===a?void 0:a.intro)&&void 0!==r?r:"No briefing yet..."})]});case"tiles":return(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["Playable area: ",null!==(o=null===(i=t.tiles)||void 0===i?void 0:i.size)&&void 0!==o?o:0]}),(0,D.jsxs)("li",{children:["Walls: ",null===(s=t.tiles)||void 0===s?void 0:s.reduce(((e,t)=>t.isWall?e+1:e),0)]})]});case"entities":var f,h;return(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["Miners: ",null!==(f=null===(h=t.miners)||void 0===h?void 0:h.length)&&void 0!==f?f:0]}),(0,D.jsxs)("li",{children:["Buildings: ",(0,D.jsx)(zo,{entities:t.buildings})]}),(0,D.jsxs)("li",{children:["Vehicles: ",(0,D.jsx)(zo,{entities:t.vehicles})]}),(0,D.jsxs)("li",{children:["Creatures: ",(0,D.jsx)(zo,{entities:t.creatures})]})]});case"crystals":return(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["Total EC: ",vt(t)]}),null!==(l=t.objectives)&&void 0!==l&&l.crystals?(0,D.jsxs)("li",{children:["Goal: ",null===(c=t.objectives)||void 0===c?void 0:c.crystals]}):null]});case"ore":return(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["Total Ore: ",yt(t)]}),null!==(u=t.objectives)&&void 0!==u&&u.ore?(0,D.jsxs)("li",{children:["Goal: ",null===(d=t.objectives)||void 0===d?void 0:d.ore]}):null]});case"landslides":{var p;if(null===(p=t.landslides)||void 0===p||!p.size)return null;const e=t.landslides.size,n=t.landslides.reduce(((e,t)=>e+t.cooldown),0)/e;return(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["Landslides: ",e]}),n&&(0,D.jsxs)("li",{children:["Avg Cooldown: ",n.toFixed(2)," seconds"]})]})}case"erosion":{var m,g,v,y;const e=null!==(m=null===(g=t.erosion)||void 0===g?void 0:g.size)&&void 0!==m?m:0,n=t.erosion?t.erosion.reduce(((e,t)=>e+(!0===t?-1:t.cooldown)),0)/e:null;return(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["Water:"," ",null===(v=t.tiles)||void 0===v?void 0:v.reduce(((e,t)=>t===ze.WATER?e+1:e),0)]}),(0,D.jsxs)("li",{children:["Lava:"," ",null===(y=t.tiles)||void 0===y?void 0:y.reduce(((e,t)=>t===ze.LAVA?e+1:e),0)]}),(0,D.jsxs)("li",{children:["Erosion: ",e]}),n&&n>0&&(0,D.jsxs)("li",{children:["Avg Cooldown: ",n.toFixed(2)," seconds"]})]})}case"height":return t.height?(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["min:"," ",t.height.reduce(((e,t)=>t<e?t:e),0).toFixed()]}),(0,D.jsxs)("li",{children:["mean:"," ",(()=>{let e=0,n=0;return t.height.forEach((t=>{e+=t,n+=1})),(e/n).toFixed(1)})()]}),(0,D.jsxs)("li",{children:["max:"," ",t.height.reduce(((e,t)=>t>e?t:e),0).toFixed()]})]}):null;case"oxygen":var b,w;return(0,D.jsxs)("p",{children:["Oxygen: ",null!==(b=null===(w=t.oxygen)||void 0===w?void 0:w.join("/"))&&void 0!==b?b:"Infinity"]});case"objectives":{if(!t.objectives)return(0,D.jsx)("p",{children:"No objectives yet..."});const e=Wo(t.objectives).resourceGoalNumbers;return(0,D.jsxs)("ul",{children:[t.objectives.variables.map((e=>{let{description:t}=e;return(0,D.jsx)("li",{children:t})})),e&&(0,D.jsxs)("li",{children:["Collect ",e,"."]})]})}default:return null}})();return r&&(0,D.jsx)("div",{className:eo.stats,children:r})}const Uo=6;function Ko(e){return e+1}function Yo(e){const[t,n]=e.path.baseplates[0].center;return(0,D.jsx)("circle",{className:eo.bg,cx:t*Uo,cy:n*Uo,r:Ko(e.pearlRadius)*Uo})}function Go(e,t){e.radius<t.radius&&([e,t]=[t,e]);const[n,r]=[t.x-e.x,t.y-e.y],a=Math.hypot(n,r),o=Math.atan2(r,n),i=e.radius-t.radius,s=Math.acos(i/a),l=Math.cos(o-s),c=Math.sin(o-s),u=Math.cos(o+s),d=Math.sin(o+s),f=[e.x+e.radius*l,e.y+e.radius*c],h=[e.x+e.radius*u,e.y+e.radius*d],p=[t.x+t.radius*l,t.y+t.radius*c],m=[t.x+t.radius*u,t.y+t.radius*d];return["M ".concat(h.join(",")),"A ".concat(e.radius,",").concat(e.radius," 0 1 1 ").concat(f.join(",")),"L ".concat(p.join(",")),"A ".concat(t.radius,",").concat(t.radius," 0 0 1 ").concat(m.join(",")," Z")].join("")}function qo(e){const[t,n]=e.path.baseplates.map((e=>{const[t,n]=e.center;return{x:t*Uo,y:n*Uo,radius:Ko(e.pearlRadius)*Uo}}));return(0,D.jsx)("path",{className:eo.bg,d:Go(t,n)})}function Qo(e){const t=e.path.baseplates.map(((e,t)=>{const[n,r]=e.center;return"".concat(0===t?"M":"L").concat(n*Uo," ").concat(r*Uo)})).join(" ");return(0,D.jsx)("path",{className:eo.bg,d:t,fill:"none",strokeWidth:2*Ko(e.pearlRadius)*Uo})}function $o(e){let{cavern:t,mapOverlay:n}=e;if(!t.plans)return null;function r(e){var n,r,a;return K([eo.plan,e.kind&&eo["".concat(e.kind,"Kind")],(null===(n=e.path)||void 0===n?void 0:n.kind)&&eo["".concat(e.path.kind,"PathKind")],e.fluid&&eo["fluid".concat(e.fluid.id)],e.hasErosion&&eo.hasErosion,((null===(r=e.architect)||void 0===r?void 0:r.script)||(null===(a=e.architect)||void 0===a?void 0:a.scriptGlobals))&&eo.hasScript,e.id===t.anchor&&eo.isAnchor]).join(" ")}const a=[];t.plans.forEach((e=>{const t=e.path.baseplates,n=Math.floor((t.length-1)/2),r=Math.floor(t.length/2);if(n===r)a[e.id]=t[n].center;else{const[o,i]=t[n].center,[s,l]=t[r].center;a[e.id]=[(o+s)/2,(i+l)/2]}}));const o=[...t.plans];o.sort(((e,t)=>a[t.id][0]-a[e.id][0]));const i=o.splice(Math.floor(o.length/2));function s(e,o,i){var s,l;if("script"===n)return null;if("overview"===n)return e.map((e=>{var t;const n=e.path.baseplates;if(n.length<=1){var a;const[t,o]=n[0].center;return(0,D.jsx)("g",{className:"".concat(eo.inline," ").concat(r(e)),children:(0,D.jsxs)("text",{className:eo.label,x:t*Uo,y:o*Uo,children:["architect"in e&&(null===(a=e.architect)||void 0===a?void 0:a.name)," ",e.id]})},e.id)}const o=n.map(((e,t)=>{const[n,r]=e.center;return"".concat(0===t?"M":"L").concat(n*Uo," ").concat(r*Uo)})).join(" ");return(0,D.jsxs)("g",{className:"".concat(eo.inline," ").concat(r(e)),children:[(0,D.jsx)("path",{id:"planLabel".concat(e.id),d:o,fill:"none"}),(0,D.jsx)("text",{className:eo.label,children:(0,D.jsxs)("textPath",{href:"#planLabel".concat(e.id),startOffset:"50%",children:["architect"in e&&(null===(t=e.architect)||void 0===t?void 0:t.name)," ",e.id]})})]},e.id)}));let c=-1/0;const u=null!==(s=null===(l=t.context)||void 0===l?void 0:l.targetSize)&&void 0!==s?s:0;return e.map(((t,n)=>{var s,l;const d=Uo*a[t.id][0];c=Math.max(Uo*a[t.id][1],c+4);const f=(Uo*u/2+50)*o,h=Uo*u*((n+1)/e.length-.5),p=f-.56*Math.abs(c-h)*o,m=K(["M ".concat(f+25*o," ").concat(h),"L ".concat(f," ").concat(h),p*o>d*o&&"L ".concat(p," ").concat(c),"L ".concat(d," ").concat(c)]).join("");return(0,D.jsxs)("g",{className:"".concat(i," ").concat(r(t)),children:[(0,D.jsx)("path",{className:eo.pointer,d:m}),(0,D.jsx)("text",{className:eo.label,x:f+25*o,y:h,children:"architect"in t&&null!==(s=t.architect)&&void 0!==s&&s.name?(0,D.jsxs)(D.Fragment,{children:[t.architect.name,!(null!==(l=t.hops)&&void 0!==l&&l.length)&&"*"," ",t.id]}):(0,D.jsx)(D.Fragment,{children:t.id})})]},t.id)}))}return o.sort(((e,t)=>a[e.id][1]-a[t.id][1])),i.sort(((e,t)=>a[e.id][1]-a[t.id][1]||a[e.id][0]-a[t.id][0])),(0,D.jsxs)(D.Fragment,{children:[t.plans.map((e=>{var t;return"pearlRadius"in e?(0,D.jsx)("g",{className:r(e),children:"cave"===e.kind?2===e.path.baseplates.length?qo(e):Yo(e):Qo(e)},e.id):null!==(t=e.path.baseplates.length)&&void 0!==t&&t?(0,D.jsx)(ao,{path:e.path},e.id):null})),s(i,-1,eo.left),s(o,1,eo.right)]})}const Xo={script:"styles_script__wlFev",src:"styles_src__D5r4o",line:"styles_line__DUONY",hovered:"styles_hovered__IuDHx",scriptOverlay:"styles_scriptOverlay__itjxQ",tile:"styles_tile__+On+N",arrow:"styles_arrow__BwPCK",misc:"styles_misc__Oi8T3",arrowhead:"styles_arrowhead__VEozU",h3:"styles_h3__EDfli",h4:"styles_h4__4XasX",condition:"styles_condition__-r6Ai",event:"styles_event__jROkn"},Zo=6,Jo=/^# (P\d+|Globals):/;function ei(e){const t=e.script;return t?t.split("\n").map((t=>{if(t.startsWith("#>"))return{kind:"h3",code:t};if(t.startsWith("#"))return Jo.test(t)?{kind:"h4",code:t}:{kind:"misc",code:t};if(!t)return{kind:"misc",code:"\xa0"};let n=t.match(/(?<prefix>(^|\())[a-z]+:(?<y>\d+),(?<x>\d+)/);if(n){return{kind:"("===n.groups.prefix?"condition":"event",code:t,pos:[parseInt(n.groups.x,10),parseInt(n.groups.y)]}}if(n=t.match(/\bp(?<id>\d+)/),n){var r;const a=null===(r=e.plans)||void 0===r?void 0:r[parseInt(n.groups.id,10)].path.baseplates;if(a)return{kind:"misc",code:t,pos:M(a[Math.floor(a.length/2)].center,[-e.left,-e.top])}}return{kind:"misc",code:t}})):[]}function ti(e){const t=[],n=Array.from(e.getElementsByClassName(Xo.line));let r=0;for(;r<n.length&&!(n[r].offsetTop+n[r].clientHeight>=e.scrollTop);r++);for(;r<n.length&&!(n[r].offsetTop>=e.scrollTop+e.clientHeight);r++)t[r]=n[r].offsetTop+n[r].clientHeight/2-e.clientHeight/2-e.scrollTop;return t}function ni(t){var n;let{cavern:r,setScriptLineOffsets:a,scriptLineHovered:o,setScriptLineHovered:i}=t;const s=(0,e.createRef)();(0,e.useLayoutEffect)((()=>{const e=s.current;e&&a(ti(e))}),[s,a]);const l=(0,e.useMemo)((()=>null!==r&&void 0!==r&&r.script?ei(r):void 0),[r]);return(0,D.jsxs)("div",{className:Xo.script,ref:s,onScroll:()=>a(ti(s.current)),children:[(0,D.jsx)("h2",{children:"Script"}),(0,D.jsxs)("p",{children:[null!==(n=null===l||void 0===l?void 0:l.length)&&void 0!==n?n:0," lines"]}),(0,D.jsx)("div",{className:Xo.src,children:null===l||void 0===l?void 0:l.map(((e,t)=>{let{code:n,kind:r}=e;const a=K([Xo.line,o===t&&Xo.hovered,Xo[r]]).join(" ");return(0,D.jsx)("div",{className:a,onMouseOver:()=>i(t),onMouseLeave:()=>o===t&&i(-1),children:n})}))})]})}function ri(t){let{cavern:n,scriptLineOffsets:r,scriptLineHovered:a,scale:o}=t;const i=(0,e.useMemo)((()=>null!==n&&void 0!==n&&n.script?ei(n):void 0),[n]);if(null===n||void 0===n||!n.script)return null;const s=n.left,l=n.top;return(0,D.jsxs)("g",{className:Xo.scriptOverlay,children:[i.map(((e,t)=>{let{kind:n,pos:o}=e;if(!o||void 0===r[t]||"misc"===n)return null;const i=K([Xo.tile,a===t&&Xo.hovered,Xo[n]]).join(" ");return(0,D.jsx)("rect",{className:i,x:(o[0]+s)*Zo,y:(o[1]+l)*Zo,width:Zo,height:Zo},t)})),ei(n).map(((t,n)=>{let{kind:i,pos:c}=t;if(!c||a!==n||void 0===r[n])return null;const u=r[n]/o,d=(c[0]+s+.5)*Zo,f=(c[1]+l+.5)*Zo,h=d-.3*Math.abs(f-u),p="M ".concat(d," ").concat(f," L ").concat(h," ").concat(u," L ").concat(-9999," ").concat(u);return(0,D.jsxs)(e.Fragment,{children:[(0,D.jsx)("path",{className:"".concat(Xo.arrow," ").concat(Xo[i]),d:p}),"misc"!==i&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("circle",{className:"".concat(Xo.arrowhead," ").concat(Xo[i]),cx:d,cy:f,r:10}),(0,D.jsx)("rect",{className:"".concat(Xo.tile," ").concat(Xo[i]),x:d-4,y:f-4,width:8,height:8})]})]},n)}))]})}const ai=6;function oi(e){var t;let{cavern:n}=e;return(0,D.jsxs)("g",{className:eo.objectives,children:[n.anchor&&(()=>{const[e,t]=n.plans[n.anchor].path.baseplates[0].center;return(0,D.jsx)("circle",{r:10,cx:e*ai,cy:t*ai,className:eo.origin})})(),null===(t=n.plans)||void 0===t?void 0:t.map((e=>{var t;if(null!==(t=e.architect)&&void 0!==t&&t.objectives){const[t,n]=e.path.baseplates[0].center;return(0,D.jsx)("g",{transform:"translate(".concat(t*ai," ").concat(n*ai,")"),className:eo.objective,children:(0,D.jsx)("path",{d:"M -10 -10 L 10 10 M -10 10 L 10 -10",strokeWidth:5})},e.id)}return null}))]})}const ii=6;function si(e){let{ore:t,crystals:n,discoveryZones:r}=e;function a(e,t,n,a){var o;return null!==r&&void 0!==r&&null!==(o=r.get(n,a))&&void 0!==o&&o.openOnSpawn?new Array(t).fill(0).map(((t,r)=>(0,D.jsx)("circle",{className:eo.ring,cx:(n+(e+.2+.53*(a+r*r))%1)*ii,cy:(a+(e+.7+.35*(n+r*r))%1)*ii,r:.5}))):null}return(0,D.jsxs)("g",{className:eo.resources,children:[t&&(0,D.jsx)("g",{className:eo.ore,children:t.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(.5,...t)}))}),n&&(0,D.jsx)("g",{className:eo.crystals,children:n.map((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a(0,...t)}))})]})}function li(e,t,n){if("overview"!==t||!e.cameraPosition)return{"--pvw-scale":n};const{x:r,y:a,yaw:o,pitch:i}=e.cameraPosition;return{"--pvw-scale":6,"--pvw-pitch":"".concat(i,"rad"),"--pvw-yaw":"".concat(Math.PI-(o+1.5*Math.PI)%(2*Math.PI),"rad"),"--pvw-tr-x":6*-r,"--pvw-tr-y":6*-a}}function ci(t){var n,r,a,o,i,s,l,c,u,d;let{cavern:f,mapOverlay:h,showOutlines:p,showPearls:m}=t;const[g,v]=(0,e.useState)(-1),[y,b]=(0,e.useReducer)(((e,t)=>{if(e.length!==t.length)return t;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return t;return e}),[]),w=(0,e.createRef)(),[x,S]=(0,e.useState)(1);switch((0,e.useLayoutEffect)((()=>{const e=()=>S(function(e,t,n,r){var a,o,i,s;if(!r||void 0===e.left)return 1;const l=Math.max(-1*(null!==(a=e.left)&&void 0!==a?a:0),1+(null!==(o=e.right)&&void 0!==o?o:0))+1,c=Math.max(-1*(null!==(i=e.top)&&void 0!==i?i:0),1+(null!==(s=e.bottom)&&void 0!==s?s:0))+1,u=12*l+(e.plans&&n&&"script"!==t?400:0),d=12*c;return Math.max(Math.floor(2*Math.min(r.clientWidth/u,r.clientHeight/d))/2,.5)}(f,h,p,w.current));return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[f,h,p,w]),h){case"about":case"lore":return null}const _=null===(n=f.context)||void 0===n?void 0:n.targetSize;if(!_)return null;const E=2*_*6,R=Math.max(E,6*_+600);return(0,D.jsxs)("div",{className:eo.cavernPreview,style:li(f,h,x),children:["script"===h&&(0,D.jsx)(ni,{cavern:f,setScriptLineOffsets:b,scriptLineHovered:g,setScriptLineHovered:v}),(0,D.jsx)("div",{className:eo.mapWrapper,ref:w,children:(0,D.jsxs)("svg",{className:"".concat(eo.map," ").concat(f.baseplates||f.plans?"":eo.void),style:{top:"calc(50% - ".concat(E/2,"px)"),left:"calc(50% - ".concat(R/2,"px)"),width:R,height:E},viewBox:"".concat(R/-2," ").concat(E/-2," ").concat(R," ").concat(E),xmlns:"http://www.w3.org/2000/svg",children:[(0,D.jsx)(vo,{cavern:f,mapOverlay:h}),"overview"===h&&(0,D.jsx)(si,{...f}),"height"===h&&f.height&&(0,D.jsx)(Co,{height:f.height}),p&&(null===(r=f.baseplates)||void 0===r?void 0:r.map((e=>(0,D.jsx)(no,{baseplate:e},e.id)))),p&&(null===(a=f.paths)||void 0===a?void 0:a.map((e=>(0,D.jsx)(ao,{path:e},e.id)))),null===(o=f.buildings)||void 0===o?void 0:o.map(((e,t)=>(0,D.jsx)(wo,{entity:e,mapOverlay:h,cavern:f},t))),null===(i=f.creatures)||void 0===i?void 0:i.map((e=>(0,D.jsx)(wo,{entity:e,mapOverlay:h,cavern:f},e.id))),null===(s=f.miners)||void 0===s?void 0:s.map((e=>(0,D.jsx)(wo,{entity:e,mapOverlay:h,cavern:f},e.id))),null===(l=f.vehicles)||void 0===l?void 0:l.map((e=>(0,D.jsx)(wo,{entity:e,mapOverlay:h,cavern:f},e.id))),"discovery"===h&&(null===(c=f.openCaveFlags)||void 0===c?void 0:c.map(((e,t,n)=>(0,D.jsx)(So,{x:t,y:n},"".concat(t,",").concat(n))))),"objectives"===h&&(0,D.jsx)(oi,{cavern:f}),"script"===h&&(0,D.jsx)(ri,{cavern:f,scriptLineOffsets:y,scriptLineHovered:g,scale:x}),p&&f.plans&&(0,D.jsx)($o,{cavern:f,mapOverlay:h}),m&&(null===(u=f.plans)||void 0===u?void 0:u.filter((e=>"outerPearl"in e)).map((e=>(0,D.jsx)(so,{plan:e,pearl:"outerPearl"},e.id)))),m&&(null===(d=f.plans)||void 0===d?void 0:d.filter((e=>"innerPearl"in e)).map((e=>(0,D.jsx)(so,{plan:e,pearl:"innerPearl"},e.id))))]})}),(0,D.jsx)(Vo,{cavern:f,mapOverlay:h})]})}class ui{constructor(e){this.steps=void 0,this.steps=e}mkResult(e,t){const n=t<this.steps.length?()=>this.mkResult(this.steps[t].fn(e),t+1):null;return{result:e,next:n,completedSteps:t,totalSteps:this.steps.length,lastStepName:t>0?this.steps[t-1].name:"init",nextStepName:t<this.steps.length?this.steps[t].name:"done"}}start(e){return this.mkResult(e,0)}first(e){return this.start(e).next()}chain(e){return new ui([...this.steps,...e.steps])}then(e,t){var n;return null!==(n=t)&&void 0!==n||(t=e.name),new ui([...this.steps,{fn:e,name:t}])}}function di(e,t){var n;return null!==(n=t)&&void 0!==n||(t=e.name),new ui([{fn:e,name:t}])}class fi{constructor(e,t,n,r,a,o){this.id=void 0,this.left=void 0,this.top=void 0,this.right=void 0,this.bottom=void 0,this.kind=void 0,this.id=e,this.left=t,this.top=n,this.right=r,this.bottom=a,this.kind=o}get width(){return this.right-this.left}get height(){return this.bottom-this.top}get area(){return this.width*this.height}get center(){return[this.left+this.width/2,this.top+this.height/2]}withKind(e){return new fi(this.id,this.left,this.top,this.right,this.bottom,e)}get pearlRadius(){return Math.min(this.width,this.height)>>1}}class hi{constructor(e){let{context:t,dice:n}=e;this.context=void 0,this.baseplateMaxSize=void 0,this.rng=void 0,this.queue=void 0,this.outbox=void 0,this.nextId=0,this.context=t,this.rng=n.partition,this.baseplateMaxSize=Math.max(Math.round(t.targetSize*t.baseplateMaxRatioOfSize),3);const r=t.targetSize>>1;this.queue=[new fi(this.id(),-r,-r,r,r,"stock")],this.outbox=[]}id(){return this.nextId++}clone(e,t,n){var r,a,o,i;const s=new fi(t,null!==(r=n.left)&&void 0!==r?r:e.left,null!==(a=n.top)&&void 0!==a?a:e.top,null!==(o=n.right)&&void 0!==o?o:e.right,null!==(i=n.bottom)&&void 0!==i?i:e.bottom,"stock");Math.min(s.width,s.height)>=3&&this.queue.push(s)}get baseplates(){return[...this.queue,...this.outbox]}get done(){return 0===this.queue.length}step(){const e=[...this.queue];this.queue.length=0;for(const t of e)this.split(t)}split(e){if(e.width>2*e.height){const t=this.rng.betaInt({a:5,b:5,min:e.left+1,max:e.right});this.clone(e,e.id,{right:t}),this.clone(e,this.id(),{left:t})}else if(e.height>2*e.width){const t=this.rng.betaInt({a:5,b:5,min:e.top+1,max:e.bottom});this.clone(e,e.id,{bottom:t}),this.clone(e,this.id(),{top:t})}else{let t=this.rng.betaInt({a:5,b:2.5,min:3,max:Math.min(this.baseplateMaxSize,e.width)}),n=this.rng.betaInt({a:5,b:2.5,min:3,max:Math.min(this.baseplateMaxSize,e.height)});t=Math.min(t,n+this.context.baseplateMaxOblongness),n=Math.min(n,t+this.context.baseplateMaxOblongness);const r=this.rng.uniformInt({min:e.left,max:e.right-t}),a=this.rng.uniformInt({min:e.top,max:e.bottom-n}),o=r+t,i=a+n;Math.min(t,n)>=3&&(Math.max(t,n)<=this.baseplateMaxSize?this.outbox.push(new fi(e.id,r,a,o,i,"ambiguous")):this.queue.push(new fi(e.id,r,a,o,i,"stock"))),this.rng.chance(.5)?(this.clone(e,this.id(),{right:r,bottom:i}),this.clone(e,this.id(),{left:r,bottom:a}),this.clone(e,this.id(),{left:o,top:a}),this.clone(e,this.id(),{right:o,top:i})):(this.clone(e,this.id(),{right:o,bottom:a}),this.clone(e,this.id(),{left:o,bottom:i}),this.clone(e,this.id(),{left:r,top:i}),this.clone(e,this.id(),{right:r,top:a}))}}}function pi(e,t){const[n,r]=e.center,[a,o]=t.center,i=n-a,s=r-o;return Math.hypot(i,s)}class mi{constructor(e,t,n){this.id=void 0,this.kind=void 0,this.baseplates=void 0,this.id=e,this.kind=t,this.baseplates=n}get origin(){return this.baseplates[0]}get destination(){return this.baseplates[this.baseplates.length-1]}get batDistance(){return pi(this.origin,this.destination)}get snakeDistance(){return U(this.baseplates,pi).reduce(((e,t)=>e+t),0)}get exclusiveSnakeDistance(){return Math.max(this.snakeDistance-this.origin.pearlRadius-this.destination.pearlRadius,0)}}const gi=di((function(e){const t=new hi(e);for(;!t.done;)t.step();return{...e,baseplates:t.baseplates}}),"Partitioning target space").then((function(e){const t=[...e.baseplates],n=e.baseplates.map(((e,t)=>[e.area,t])).sort(((e,t)=>{let[n]=e,[r]=t;return r-n})),r=Math.min(e.context.caveCount,t.length-1);for(let a=0;a<r;a++){const e=n[a][1];t[e]=t[e].withKind("cave")}return{...e,baseplates:t}}),"Discriminating baseplates").then((function(e){const t=e.baseplates.filter((e=>"cave"===e.kind)),n=t.flatMap((e=>e.center)),r=new an(n),a=[];for(let o=0;o<r.triangles.length;o++)if(o>r.halfedges[o]){const e=a.length,n=t[r.triangles[o]],i=t[r.triangles[o+(o%3===2?-2:1)]];a[e]=new mi(e,"ambiguous",[n,i])}return{...e,paths:a}}),"Triangulating paths").then((function(e){const t=[];let n=1;const r=[];for(const a of[...e.paths].sort(((e,t)=>e.batDistance-t.batDistance))){const e=a.origin.id,o=a.destination.id,i=t[e],s=t[o];if(i&&s){if(i===s){r[a.id]=a;continue}t.forEach(((e,n)=>{e===s&&(t[n]=i)}))}else i?t[o]=i:s?t[e]=s:(t[e]=n,t[o]=n,n++);r[a.id]=new mi(a.id,"spanning",a.baseplates)}return{...e,paths:r.filter((e=>e))}}),"Spanning path graph").then((function(e){const t=e.context.targetSize/2,n=t*t,r=e.paths.filter((e=>"spanning"===e.kind||!e.baseplates.some((e=>{const[t,r]=e.center;return t*t+r*r>n}))));return{...e,paths:r}}),"Clipping boring paths").then((function(e){const t={};for(const r of e.baseplates)for(let e=r.left;e<r.right;e++)for(let n=r.top;n<r.bottom;n++)t["".concat(e,",").concat(n)]=r;const n=e.paths.map((e=>new mi(e.id,e.kind,Array.from(function*(e){let n=e.origin;const r=new Set([n]);for(yield n;;)for(const[a,o]of I(n.center,e.destination.center)){const i=t["".concat(a,",").concat(o)];if(i===e.destination)return void(yield i);if(i&&!r.has(i)&&(r.add(i),"cave"!==i.kind)){n=i,yield n;break}}}(e)))));return{...e,paths:n}}),"Boring interesting paths").then((function(e){const t=e.dice.weave,n=function(e){const t=[],n=(e,n,r,a)=>{var o;const[i,s]=n.center,[l,c]=r.center,u=Math.atan2(c-s,l-i),d=e.snakeDistance;(t[o=n.id]||(t[o]={src:n,edges:[]})).edges[e.id]={theta:u,distance:d,dest:a}};return e.forEach((e=>{const t=e.baseplates;n(e,t[0],t[1],t[t.length-1]),n(e,t[t.length-1],t[t.length-2],t[0])})),t}(e.paths),r=[],a=[];function o(e,t){const n=t.edges[e.id].theta;return t.edges.reduce(((e,t,a)=>{var o;let{theta:i}=t;const s=null===(o=r[a])||void 0===o?void 0:o.kind;return"spanning"===s||"auxiliary"===s?Math.min(function(e,t){const n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n}(n,i),e):e}),1/0)}function i(){let t=!1;return r.filter((e=>"ambiguous"===e.kind)).forEach((a=>{Math.min(o(a,n[a.origin.id]),o(a,n[a.destination.id]))<e.context.auxiliaryPathMinAngle?delete r[a.id]:t=!0})),t}function s(){const e=n.map((e=>{let{src:t}=e;return function(e,t,n){const r=[],a=[],o=[];for(r[n.id]=0,a.push(n);a.length;){const i=a.shift();o.unshift({src:n,dest:i,distance:r[i.id]}),e[i.id].edges.forEach(((e,n)=>{var o;let{distance:s,dest:l}=e;const c=null===(o=t[n])||void 0===o?void 0:o.kind;if("spanning"===c||"auxiliary"===c){const e=r[i.id]+s;void 0===r[l.id]?(a.push(l),r[l.id]=e):e<r[l.id]&&(r[l.id]=e)}})),a.sort(((e,t)=>r[e.id]-r[t.id]))}return o}(n,r,t)}));for(;;){const{src:t,dest:n}=e.reduce(((e,t)=>e[0].distance>t[0].distance?e:t)).shift(),o=r[a[t.id][n.id]];if("ambiguous"===(null===o||void 0===o?void 0:o.kind)){r[o.id]=new mi(o.id,"auxiliary",o.baseplates);break}}}function l(){const e=t.betaChoice(r.filter((e=>"ambiguous"===e.kind)).map((e=>({path:e,oa:o(e,n[e.origin.id]),da:o(e,n[e.destination.id])}))).sort(((e,t)=>e.oa+e.da-t.oa-t.da)),{a:1,b:5}).path;r[e.id]=new mi(e.id,"auxiliary",e.baseplates)}e.paths.forEach((e=>{var t,n;r[e.id]=e,(a[t=e.origin.id]||(a[t]=[]))[e.destination.id]=e.id,(a[n=e.destination.id]||(a[n]=[]))[e.origin.id]=e.id}));for(let c=0;c<e.context.optimalAuxiliaryPathCount;c++)i()&&s();for(let c=0;c<e.context.randomAuxiliaryPathCount;c++)i()&&l();return{...e,paths:r.filter((e=>e))}}),"Weaving best paths");function vi(e,t){for(const[n,r,a,o,i,s]of[[e.right,t.left,e.top,e.bottom,t.top,t.bottom],[e.bottom,t.top,e.left,e.right,t.left,t.right]])if(n===r&&Math.min(o,s)-Math.max(a,i)>Math.max(o-a,s-i)/2)return!0;return!1}class yi extends Ve{atLayer(e){const t=[];return this.forEach(((n,r,a)=>{n===e&&t.push([r,a])})),t}set(e,t,n){const r=this.get(e,t);(void 0===r||n<r)&&super.set(e,t,n)}}function bi(e,t){V(t.path.baseplates,((t,n)=>{for(const[r,a]of I(t.center,n.center))e.set(r,a,0)}))}function wi(e,t){t.path.baseplates.forEach((n=>{const r=t.pearlRadius-n.pearlRadius,a=Math.min(n.pearlRadius,n.width-1>>1),o=Math.min(n.pearlRadius,n.height-1>>1);for(let t=n.left+a;t<n.right-a;t++)for(let a=n.top+o;a<n.bottom-o;a++)e.set(t,a,r)})),V(t.path.baseplates,((n,r)=>{const a=t.pearlRadius-Math.min(n.pearlRadius,r.pearlRadius);for(const[t,o]of I(n.center,r.center))e.set(t,o,a)}))}function xi(e,t,n,r){return e.atLayer(r-1).flatMap((a=>{let[o,i]=a;return C.flatMap((a=>{var s;let[l,c]=a;return(null!==(s=e.get(o+l,i+c))&&void 0!==s?s:-1)>=0?[]:function(e,t,n,r,a){const o=[];for(;a;){const{x:i,y:s,vx:l,vy:c}=a;e.set(i,s,r),o.push([i,s]);const u=[{ox:0,oy:0,vx:-c,vy:l},{ox:-c,oy:l,vx:l,vy:c},{ox:0,oy:0,vx:l,vy:c},{ox:c,oy:-l,vx:l,vy:c},{ox:0,oy:0,vx:c,vy:-l}].map((e=>({...e,x:i+e.ox+e.vx,y:s+e.oy+e.vy}))),d=u.some((t=>{var n;let{x:a,y:i}=t;if((null!==(n=e.get(a,i))&&void 0!==n?n:-1)<r)return!1;for(let e=o.length-2;e>Math.max(o.length-4,0);e--){const[t,n]=o[e];if(t===a&&n===i)return!1}return!0}));if(d)break;a=u.find((r=>{var a;let{x:o,y:i}=r;return!((null!==(a=e.get(o,i))&&void 0!==a?a:-1)>=0)&&!(n>0&&t.chance(n))}))}return o}(e,t,n,r,{x:o+l,y:i+c,vx:-c,vy:l})}))}))}const Si=di((function(e){const t=[],n=[[],[],[]];[...e.paths.filter((e=>"spanning"===e.kind)),...e.paths.filter((e=>"auxiliary"===e.kind))].forEach((e=>{if(2===e.baseplates.length){const[r,a]=e.baseplates;if(!t[r.id]&&!t[a.id]&&(vi(r,a)||vi(a,r)))return t[r.id]=!0,t[a.id]=!0,void n[2].push({path:e,kind:"cave"})}n[0].push({path:e,kind:"hall"})})),n[1]=e.baseplates.filter((e=>"cave"===e.kind&&!t[e.id])).map((e=>({path:new mi(-1,"single",[e]),kind:"cave"})));const r=n.flatMap((e=>e)).map(((e,t)=>({...e,id:t})));return{initialContext:e.initialContext,context:e.context,dice:e.dice,plans:r}}),"Negotiating plans").then((function(e){const t=[];e.plans.forEach((e=>{e.path.baseplates.forEach((n=>{var r;return(t[r=n.id]||(t[r]=[])).push(e.id)}))}));const n=e.plans.map((e=>{const n=[];e.path.baseplates.flatMap((e=>t[e.id])).filter((t=>t!==e.id)).forEach((e=>n[e]=!0));const r=("cave"===e.kind?Math.max:Math.min)(...e.path.baseplates.map((e=>e.pearlRadius))),a=Math.round("cave"===e.kind?Math.PI*(Math.min(r,e.path.origin.pearlRadius)+Math.min(r,e.path.destination.pearlRadius))+2*e.path.snakeDistance:2*e.path.exclusiveSnakeDistance);return{...e,intersects:n,pearlRadius:r,perimeter:a}}));return{...e,plans:n}}),"Measuring plans").then((function(e){const t=e.dice.flood,n=function(e,t){const n=t.shuffle(e.plans.filter((e=>"cave"===e.kind))),r=(e,r,a,o)=>r<1?[]:U([0,...t.shuffle(new Array(r-1).fill(0).map(((e,t)=>t+1))).filter(((e,t)=>t<a-1)).sort(),r],((t,r)=>({fluid:e,remaining:r-t,skipChance:o,stack:[n.pop()]})));return[...r(ze.WATER,e.context.waterPlans,e.context.waterLakes,.2),...r(ze.LAVA,e.context.lavaPlans,e.context.lavaLakes,.2)]}(e,t),r=[],a=[];for(const u of n)a[u.stack[0].id]=u;let o=!0;for(;o;){o=!1;for(const i of n){if(i.remaining<=0||0===i.stack.length)continue;const n=i.stack.pop();a[n.id]===i&&(o=!0,i.stack.length>0&&t.chance(i.skipChance)?i.stack.unshift(n):(i.remaining--,r[n.id]=i.fluid,n.intersects.map(((t,n)=>e.plans[n])).filter((e=>e.kind!==n.kind)).forEach((e=>{a[e.id]?a[e.id]!==i&&(a[e.id]="none"):(a[e.id]=i,i.stack.push(e))}))))}}const i=[],s=[...n.flatMap((e=>e.fluid===ze.LAVA?e.stack:[])),...r.flatMap(((t,n)=>t===ze.LAVA?[e.plans[n]]:[]))];for(let u=e.context.erosionPlans;u>=0&&s.length>0;u--){const[n]=s.splice(t.uniformInt({min:0,max:s.length}),1);i[n.id]=!0,n.intersects.map(((t,n)=>e.plans[n])).filter((e=>e.kind!==n.kind)).forEach((e=>{a[e.id]||(a[e.id]="erosion",s.push(e))}))}const l=function(e,t){const n=[];for(let r=0;r<e.plans.length;r++){if(n[r])continue;const a=[r],o=[];for(;a.length;){const i=a.shift();n[i]||(n[i]=1/0,o.push(i),a.push(...e.plans[i].intersects.map(((e,t)=>t)).filter((e=>t[e]===t[r]))))}o.forEach((e=>n[e]=o.length))}return n}(e,r),c=e.plans.map((e=>{var t;return{...e,fluid:null!==(t=r[e.id])&&void 0!==t?t:null,lakeSize:l[e.id],hasErosion:!!i[e.id]}}));return{...e,plans:c}}),"Flooding cavern").then((function(e){const t=La(Ka,e),n=e.dice.pickSpawn.weightedChoice(t.flatMap((t=>t.anchorBid?e.plans.filter((e=>"cave"===e.kind)).map((n=>({item:{...n,architect:t,hops:[]},bid:t.anchorBid({cavern:e,plan:n})||0}))):[]))),r=[...e.plans];return r[n.id]=n,{...e,anchor:n.id,plans:r}}),"Choosing anchor").then((function(e){const t=Ke(e).architect;return t.mod?t.mod(e):e}),"Applying mods").then((function(e){const t=La(Ka,e),n=Ta(e.plans),r=[];n.forEach((e=>r[e.id]=e));let a=0;const o=n.length-1,i=n[n.length-1].hops.length;return n.forEach(((n,s)=>function(t){const n={cavern:e,plan:t,totalCrystals:a},o=t.architect.baroqueness(n),i=Math.round(t.architect.crystalsToPlace(n)+t.architect.crystalsFromMetadata(t.metadata));a+=i;const s=Math.round(t.architect.ore(n)),l={...t,baroqueness:o,crystals:i,ore:s};r[t.id]=l}(function(n,s){const l={hops:n.hops.length/i,order:s/o},c=n.architect||e.dice.pickArchitect(n.id).weightedChoice(t.map((t=>{const o="cave"===n.kind?t.caveBid:t.hallBid;return{item:t,bid:(null===o||void 0===o?void 0:o({cavern:e,plan:n,plans:r,hops:n.hops,totalCrystals:a}))||0}}))),u=c.prime({cavern:e,plan:n}),d=Ma("cave"===n.kind?e.context.caveCrystalRichness:e.context.hallCrystalRichness,l),f=Ma("cave"===n.kind?e.context.caveOreRichness:e.context.hallOreRichness,l),h=Ma(e.context.monsterSpawnRate,l),p=Ma(e.context.monsterWaveSize,l);return{...n,architect:c,metadata:u,crystalRichness:d,oreRichness:f,monsterSpawnRate:h,monsterWaveSize:p}}(n,s)))),{...e,plans:r}}),"Establishing plans").then((function(e){const t=e.plans.map((t=>{const n=e.dice.pearl(t.id),r=new yi;("cave"===t.kind?wi:bi)(r,t);const a=[r.map(((e,t,n)=>[t,n]))],o=[],i=t.architect.roughExtent(t);for(let e=1;e<i+4;e++)(e<=i?a:o).push(xi(r,n,e<i?t.baroqueness:0,e));return{...t,innerPearl:a,outerPearl:o}}));return{...e,plans:t}}),"Drawing pearls");function _i(e){const t=new Ve,n=e.map(((e,t,n)=>({x:t,y:n,zone:null})));let r=0;for(;n.length>0;){var a;let{x:o,y:i,zone:s}=n.shift();if(void 0===t.get(o,i)&&!1===(null===(a=e.get(o,i))||void 0===a?void 0:a.isWall)){s||(s={id:r++,openOnSpawn:!1,triggerPoint:[o,i]}),t.set(o,i,s);const e=A.map((e=>{let[t,n]=e;return{x:o+t,y:i+n,zone:s}}));n.unshift(...e)}}return t}const Ei=[[...w,2],[...x,1],[...S,2],[..._,1],[...E,2],[...R,1],[...O,2],[...k,1]];function Ri(e){if(2===e.length){const[t,n]=e;return t[0]===n[0]||t[1]===n[1]}return e.length<2}const Oi=di((function(e){const t=new Ve,n=new Ve;return e.plans.forEach((e=>{e.innerPearl.forEach(((n,r)=>n.forEach((n=>{let[a,o]=n;const i=t.get(a,o)||[];i[e.id]=r,t.set(a,o,i)})))),e.outerPearl.forEach(((t,r)=>t.forEach((t=>{let[a,o]=t;const i=n.get(a,o)||[];i[e.id]=r,n.set(a,o,i)}))))})),{...e,pearlInnerDex:t,pearlOuterDex:n}}),"Computing foundations").then((function(e){const t=new Ve;return e.plans.forEach((n=>{n.architect.rough({cavern:e,plan:n,tiles:t})})),{...e,tiles:t}}),"Rough pass over tiles").then((function(e){const t=e.dice.brace,n=e.tiles.copy(),r=_i(n),a=new Ve;return t.shuffle(n.flatMap(((e,t,n)=>[[0,0],...C].map((e=>{let[r,a]=e;return[t+r,n+a]}))))).forEach((function(e){var o;if(a.get(...e))return;if(null===(o=n.get(...e))||void 0===o||!o.isWall)return;const i=t.shuffle(C).map((t=>{let[r,a]=t;const o=M(e,[r,a]),i=M(e,[a,-r]),s=M(e,[-r,-a]),l=M(e,[-a,r]),c=M(e,[r-a,a+r]),u=M(e,[-r+a,-a-r]),d=[o,c,l].reduce(((e,t)=>{var r;return!1===(null===(r=n.get(...t))||void 0===r?void 0:r.isWall)?e+1:e}),0);return{pw:o,pa:i,ps:s,pd:l,pe:c,pz:u,floors:d}}));i.sort(((e,t)=>e.floors-t.floors));for(const{pw:t,pa:s,ps:l,pd:c,pe:u,pz:d,floors:f}of i){if(0===f)return void[e,t,u,c].forEach((e=>a.set(...e,!0)));const o=[];if([t,u,c,l,d,s].forEach((e=>{var t;if(!1===(null===(t=n.get(...e))||void 0===t?void 0:t.isWall)){const t=r.get(...e);o[t.id]=t}})),o.reduce((e=>e+1),0)>1){const[t,n]=o.filter((()=>!0));if(!t.openOnSpawn||!n.openOnSpawn)return void a.set(...e,!0)}return[t,u,c].forEach((e=>{var t;!1===(null===(t=n.get(...e))||void 0===t?void 0:t.isWall)&&n.set(...e,ze.DIRT),a.set(...e,!0)})),void a.set(...e,!0)}})),{...e,tiles:n}}),"Bracing walls").then((function(e){const t=e.tiles.copy();return e.tiles.forEach(((e,n,r)=>{e.hardness<He.SOLID&&!C.some((e=>{let[a,o]=e;const i=t.get(n+a,r+o);return i&&i.hardness<He.HARD}))?t.set(n,r,ze.HARD_ROCK):!e.isWall&&function(e,t,n){let r=0;for(let o=0;o<Ei.length;o++){var a;const[i,s,l]=Ei[o];if(!1===(null===(a=e.get(t+i,n+s))||void 0===a?void 0:a.isWall)&&(r+=l),r>=2)return!1}return!0}(t,n,r)?t.set(n,r,ze.DIRT):e.isFluid&&!C.some((e=>{var a;let[o,i]=e;return null===(a=t.get(n+o,r+i))||void 0===a?void 0:a.isFluid}))&&t.set(n,r,ze.FLOOR)})),{...e,tiles:t}}),"Grouting voids").then((function(e){const t=e.tiles.copy();return e.tiles.forEach(((e,n,r)=>{e!==ze.HARD_ROCK||C.some((e=>{let[a,o]=e;const i=t.get(n+a,r+o);return!i||i.hardness>=He.HARD}))||t.set(n,r,ze.LOOSE_ROCK)})),{...e,tiles:t}}),"Sanding hard edges").then((function(e){let t;const n={cavern:e,tiles:e.tiles.copy(),crystals:new Ve,ore:new Ve,openCaveFlags:new Ve},r=[],a=[...e.plans];return e.plans.forEach((e=>{const o=e.architect;o.placeRechargeSeam({...n,plan:e});const i=o.placeBuildings({...n,plan:e});if(i.buildings&&r.push(...i.buildings),i.cameraPosition){if(t)throw new Error("Attempted to set a camera position twice.");t=i.cameraPosition}i.metadata&&(e={...e,metadata:i.metadata},a[e.id]=e),o.placeCrystals({...n,plan:e}),o.placeOre({...n,plan:e}),o.placeSlugHoles({...n,plan:e})})),{...e,...n,plans:a,buildings:r,cameraPosition:t}}),"Fine pass over tiles").then((function(e){const t=e.tiles.copy(),n=e.tiles.flatMap(((e,t,n)=>C.map((e=>{let[r,a]=e;return[t+r,n+a]}))));for(;n.length;){const[e,r]=n.shift();if(t.get(e,r))continue;const a=C.map((t=>{let[n,a]=t;return[e+n,r+a]})).filter((e=>!t.get(...e)));Ri(a)&&(t.set(e,r,ze.SOLID_ROCK),n.push(...a))}return{...e,tiles:t}}),"Annexing playable area").then((function(e){const t=Ke(e);if(t.architect.closer){var n,r;const a=e.tiles.copy();return null===(n=(r=t.architect).closer)||void 0===n||n.call(r,{cavern:e,plan:t,tiles:a}),{...e,tiles:a}}return e}),"Closing touches on tiles");class ki{constructor(){this.id=0}create(e){return{essential:!1,level:1,loadout:["Drill"],unique:null,...e,id:this.id++}}}const Ci={z:52.15};const Ai=[[-1,-1],[-1,0],[0,-1],[0,0]];function Li(e,t){const n=new Ve;for(let r=e.left+1;r<e.right;r++)for(let a=e.top+1;a<e.bottom;a++){const e=t.get(r,a);if(e)n.set(r,a,e);else{let e=0,o=0;C.forEach((n=>{let[i,s]=n;const l=t.get(r+i,a+s);void 0!==l&&(e+=l,o++)})),o&&n.set(r,a,e/o)}}return n}class Ti{constructor(){this.data=new Map}get(e,t,n,r){if(e<n||e===n&&t<=r){const a=this.data.get("".concat(e,",").concat(t,",").concat(n,",").concat(r));return a&&{ascent:a.forward,descent:a.backward}}const a=this.data.get("".concat(n,",").concat(r,",").concat(e,",").concat(t));return a&&{ascent:a.backward,descent:a.forward}}set(e,t,n,r,a,o){if(e!==n||t!==r)if(e<n||e===n&&t<r){const i=this.data.get("".concat(e,",").concat(t,",").concat(n,",").concat(r));i?(i.forward=Math.min(i.forward,a),i.backward=Math.min(i.backward,o)):this.data.set("".concat(e,",").concat(t,",").concat(n,",").concat(r),{x1:e,y1:t,x2:n,y2:r,forward:a,backward:o})}else{const i=this.data.get("".concat(n,",").concat(r,",").concat(e,",").concat(t));i?(i.forward=Math.min(i.forward,o),i.backward=Math.min(i.backward,a)):this.data.set("".concat(n,",").concat(r,",").concat(e,",").concat(t),{x1:n,y1:r,x2:e,y2:t,forward:o,backward:a})}}edges(){const e=new Ve;function t(t,n){let r=e.get(t,n);return r||(r=[],e.set(t,n,r)),r}return this.data.forEach((e=>{let{x1:n,y1:r,x2:a,y2:o,forward:i,backward:s}=e;t(n,r).push({to:[a,o],ascent:i,descent:s}),t(a,o).push({to:[n,r],ascent:s,descent:i})})),e}}function Mi(e){const t=new Ti;return function(e){const t=new Ve,n=Math.max(e.context.caveMaxSlope,e.context.hallMaxSlope),r=e.plans.map((t=>{var n;return Math.min(null!==(n=t.architect.maxSlope)&&void 0!==n?n:1/0,"cave"===t.kind?e.context.caveMaxSlope:e.context.hallMaxSlope)}));for(let s=e.left;s<e.right;s++)for(let l=e.top;l<e.bottom;l++){var a,o;let c=1/0;const u=e.tiles.get(s,l);var i;c=u?Math.min(c,null!==(i=u.maxSlope)&&void 0!==i?i:1/0):s<e.left||s>=e.right||l<e.top||l>=e.bottom?Math.min(c,e.context.borderMaxSlope):Math.min(c,e.context.voidMaxSlope),c=Math.min(c,null!==(a=null===(o=e.pearlInnerDex.get(s,l))||void 0===o?void 0:o.reduce(((e,t,n)=>Math.min(null!==e&&void 0!==e?e:1/0,r[n])),void 0))&&void 0!==a?a:n),t.set(s,l,c)}return t}(e).forEach(((e,n,r)=>{const a=n+1,o=r+1;t.set(n,r,a,r,e,e),t.set(n,r,n,o,e,e),t.set(a,r,a,o,e,e),t.set(n,o,a,o,e,e)})),t}function Ii(e,t,n){const r=e.height.get(t,n),a=t===e.left||t===e.right||n===e.top||n===e.bottom;return{target:r,neighbors:[],corners:[[t,n]],collapseQueued:a,min:a?0:Eo,max:a?0:Ro,range:a?0:Ro-Eo}}function Pi(e){const t=function(e){const t=new Ve;return e.tiles.forEach(((n,r,a)=>{let o;if(n===ze.WATER||n===ze.LAVA)o=2;else{if(!e.erosion.get(r,a))return;o=0}_o.forEach((e=>{var n;let[i,s]=e;t.set(r+i,a+s,Math.max(o,null!==(n=t.get(r+i,a+s))&&void 0!==n?n:0))}))})),t}(e),n=function(e,t){const n=new Ve,r=t.map(((e,t,n)=>({x:t,y:n,node:null})));for(;r.length>0;){let{x:a,y:o,node:i}=r.shift();if(!n.get(a,o)){i||(i=Ii(e,a,o)),n.set(a,o,i);const s=C.map((e=>{let[t,n]=e;return{x:a+t,y:o+n,node:i}})).filter((e=>{let{x:n,y:r}=e;return t.get(n,r)}));r.unshift(...s)}}return n}(e,t);for(let a=e.left;a<=e.right;a++)for(let t=e.top;t<=e.bottom;t++){const r=n.get(a,t);r?r.corners.push([a,t]):n.set(a,t,Ii(e,a,t))}const r=Mi(e);return t.forEach(((e,t,n)=>{const a=e+1;for(let o=-a;o<=a;o++)for(let e=-a;e<=a;e++)r.set(t,n,t+o,n+e,1/0,0)})),r.edges().forEach(((e,t,r)=>{const a=n.get(t,r);if(a){const t=e.map((e=>{let{to:t,ascent:r,descent:a}=e;return{node:n.get(...t),ascent:r,descent:a}})).filter((e=>{let{node:t}=e;return t&&t!==a}));a.neighbors.push(...t)}})),n}function ji(e){const t=new Ve;for(let n=e.left;n<=e.right;n++)for(let r=e.top;r<=e.bottom;r++)t.set(n,r,0);return t}const Fi=di((function(e){let{left:t,top:n,right:r,bottom:a}=e.tiles.bounds;const o=r-t,i=a-n,s=Math.max(o,i);return t=t-Math.floor((s-o)/2)-1,n=n-Math.floor((s-i)/2)-1,r=t+s+2,a=n+s+2,{...e,left:t,top:n,right:r,bottom:a}}),"Fencing final level bounds").then((function(e){const t=_i(e.tiles);return e.openCaveFlags.forEach(((e,n,r)=>t.get(n,r).openOnSpawn=!0)),{...e,discoveryZones:t}}),"Discovering caverns").then((function(e){const t=new Ve;return e.plans.forEach((n=>{if(n.hasErosion)return n.architect.preErode({cavern:e,plan:n,erosion:t})})),{...e,erosion:t}}),"Spreading magma").then((function(e){if(e.context.heightTargetRange<=0)return{...e,height:new Ve};let t=function(e){const t=function(e){const t={min:-e.context.heightTargetRange,max:e.context.heightTargetRange},n=[],r=[],a=e.dice.height,o=e.plans.filter((e=>!e.hops.length));for(o.forEach((e=>n[e.id]=!0));o.length;){var i;const s=o.shift(),l=null!==(i=r[s.id])&&void 0!==i?i:"cave"===s.kind?a.uniformInt(t):null;r[s.id]=l,s.intersects.forEach(((t,a)=>{const i=e.plans[a];n[a]||i.kind===s.kind||((s.fluid||i.fluid)&&(r[a]=l),n[a]=!0,o.push(i))}))}return r}(e),n=e.context.heightTargetRange/-5,r=new Ve;for(let i=e.left;i<e.right;i++)for(let s=e.top;s<e.bottom;s++){var a,o;let l=0,c=0,u=!!(null!==(a=e.tiles.get(i,s))&&void 0!==a&&a.isFluid||e.erosion.get(i,s));null===(o=e.pearlInnerDex.get(i,s))||void 0===o||o.forEach(((e,n)=>{const r=t[n];null!=r&&(l+=r,c++)})),c&&r.set(i,s,Math.round(l/c)+(u?n:0))}return r}(e);t=function(e,t){const n=new Ve;for(let r=e.left;r<=e.right;r++)for(let a=e.top;a<=e.bottom;a++){let e=0,o=0;Ai.forEach((n=>{let[i,s]=n;const l=t.get(r+i,a+s);void 0!==l&&(e+=l,o++)})),o&&n.set(r,a,e/o)}return n}(e,t);for(let n=0;n<e.context.stratascosity;n++)t=Li(e,t);return{...e,height:t}}),"Rough pass over heightmap").then((function(e){if(e.context.heightTargetRange<=0)return{...e,height:ji(e)};const t=Pi(e),n=new Ve,r=e.dice.height,a=t.map((e=>e)).filter((e=>e.collapseQueued)),o=e.context.strataplanity,i=()=>{const e=(()=>{let e=0;for(let t=1;t<a.length;t++)a[t].range<=a[e].range&&(e=t);return a.splice(e,1)[0]})(),t=function(e,t,n){if(e.min===e.max)return e.min;const r=void 0===e.target?.5:e.target<=e.min?0:e.target>=e.max?1:(e.target-e.min)/(e.max-e.min);return t.betaInt({a:1+n*r,b:1+n*(1-r),min:e.min,max:e.max+1})}(e,r,o);for(let r=0;r<e.corners.length;r++)n.set(...e.corners[r],t);return e.min=t,e.max=t,e.range=0,e};for(;a.length;){const e=[i()];for(;e.length;){const t=e.shift();for(let n=0;n<t.neighbors.length;n++){const r=t.neighbors[n];if(!r.node.range)continue;r.node.min=Math.max(r.node.min,t.min-r.descent),r.node.max=Math.min(r.node.max,t.max+r.ascent);const o=r.node.max-r.node.min;o<r.node.range&&(r.node.range=o,e.push(r.node),r.node.collapseQueued||(r.node.collapseQueued=!0,a.push(r.node)))}}}return{...e,height:n}}),"Final pass over heightmap").then((function(e){let t=e.cameraPosition;const n={cavern:e,landslides:new Ve,erosion:new Ve,creatureFactory:new Ze,minerFactory:new ki,vehicleFactory:new or},r=[],a=[],o=[],i=[...e.plans];if(e.plans.forEach((e=>{var s,l,c;const u=e.architect,d=u.placeEntities({...n,plan:e});if(r.push(...null!==(s=d.creatures)&&void 0!==s?s:[]),a.push(...null!==(l=d.miners)&&void 0!==l?l:[]),o.push(...null!==(c=d.vehicles)&&void 0!==c?c:[]),d.cameraPosition){if(t)throw new Error("Attempted to set a camera position twice.");t=d.cameraPosition}d.metadata&&(e={...e,metadata:d.metadata},i[e.id]=e),u.placeLandslides({...n,plan:e}),u.placeErosion({...n,plan:e})})),!t)throw new Error("No architect set a camera position! The anchor cave was expected to do this during either the populate or fine step.");return{...e,...n,creatures:r,miners:a,vehicles:o,cameraPosition:t}}),"Populating cavern with entities");const Ni=250,Di=1,Bi=1.6,Wi=4,Hi=8,zi=25,Vi=10,Ui=6,Ki=20,Yi=15,Gi=125,qi=210,Qi=215;const $i={flood:(e,t,n)=>"place:".concat(Ot(e,[t,n]),",").concat(ze.WATER.id,";"),waste:(e,t,n)=>"place:".concat(Ot(e,[t,n]),",").concat(ze.WASTE_RUBBLE_2.id,";")};var Xi=n(5995),Zi=n.n(Xi);function Ji(e,t,n){let[r,a]=t;return e.map((e=>{let[t,o]=e;const i=(t+r).toFixed(),s=(o+a).toFixed();return"xy"===n?"".concat(i,",").concat(s,"/"):"".concat(s,",").concat(i,"/")})).join("")}function es(e,t,n){const r=[];for(let a=e.top;a<e.bottom+t;a++){const o=[];for(let r=e.left;r<e.right+t;r++)o.push("".concat(n(r,a),","));r.push(o.join(""))}return r.join("\n")}function ts(e,t){const n=new Map;return e.forEach(((e,t,r)=>{const a=e.key;n.has(a)?n.get(a).push([t,r]):n.set(a,[[t,r]])})),Array.from(n.entries()).sort(((e,t)=>{let[n]=e,[r]=t;return parseInt(r)-parseInt(n)})).map((e=>{let[n,r]=e;return"".concat(n,":").concat(Ji(r,t,"xy"))})).join("\n")}class ns extends Error{}const rs=["[object Object]","undefined","NaN","FAIL!!"];const as=di((function(e){if(void 0!==e.oxygen)return{...e,oxygen:e.oxygen,aerationLog:null};if(!e.context.hasAirLimit)return{...e,oxygen:null,aerationLog:null};const t=t=>{var n;return null===(n=e.discoveryZones.get(Math.floor(t.x),Math.floor(t.y)))||void 0===n?void 0:n.openOnSpawn},n=e.buildings.filter(t),r=e.vehicles.filter(t);let a=!1,o=!1,i=!1,s=0,l=0,c=0;const u=new Ve;n.forEach((e=>{a||(a=e.template===Ae),o||(o=e.template===Me),i||(i=e.template===Ie),c+=e.template.crystals})),r.forEach((e=>{c+=e.template.crystals})),s+=2*Yi,l-=4,c-=Me.crystals+Ie.crystals+1,a||(s+=Gi,l-=5+Ae.ore),o||(s+=qi,l-=5+Me.ore),i||(s+=Qi,l-=5+Ie.ore),c=Math.min(c,-1);const d=function(e){const t=[...e.buildings.filter((e=>e.template===Ce)),...e.buildings,...e.miners,...e.vehicles];for(const r of t){var n;const t=[Math.floor(r.x),Math.floor(r.y)];if(null!==(n=e.discoveryZones.get(...t))&&void 0!==n&&n.openOnSpawn)return t}throw new Error("No discovered entities. Is this level even playable?")}(e);function f(e){switch(e.hardness){case He.DIRT:return Wi;case He.LOOSE:return Hi;case He.SEAM:return zi;default:return}}{const v=new Ve;v.set(...d,0);const y=[d],b=[],w=[];function x(t,n,r){if(void 0===v.get(t,n)){v.set(t,n,r);const a=e.tiles.get(t,n);a&&!a.isFluid&&(a.isWall?f(a)?b.push([t,n]):a.hardness===He.HARD&&w.push([t,n]):y.push([t,n]))}}for(;l<0||c<0;)if(y.length){const[S,_]=y.shift();u.set(S,_,!0);const E=v.get(S,_);C.forEach((e=>{let[t,n]=e;return x(S+t,_+n,E+1)}))}else{if(!b.length&&!w.length)return console.log("Unable to playtest this level for air consumption."),{...e,oxygen:[8e3,8e3],aerationLog:u};{const R=!b.length,[O,k]=(R?w:b).shift();u.set(O,k,!0);const A=v.get(O,k),L=e.tiles.get(O,k);if(s+=R?A*(Di+Bi)+Ui:f(L),l<0){var h;const T=L.oreYield+(null!==(h=e.ore.get(O,k))&&void 0!==h?h:0);l+=T,s+=T*A*(Di+Bi)+Vi}if(c<0){var p;const M=L.crystalYield+(null!==(p=e.crystals.get(O,k))&&void 0!==p?p:0);c+=M,s+=M*A*(Di+Bi)}y.push([O,k])}}}const m=e.plans.find((e=>!e.hops.length));e.context.hasMonsters&&(s+=Ki*m.monsterSpawnRate/60*(s/5)),s*=e.context.airSafetyFactor,s=Math.max(1e3,Math.ceil(s/Ni)*Ni);const g=Math.max(s,3e3,Math.ceil(80*e.context.targetSize/Ni)*Ni);return{...e,oxygen:[s,g],aerationLog:u}}),"Aerating cavern").then((function(e){const t=e.plans.reduce(((e,t)=>{const n=t.architect.objectives;return n&&!e.some((e=>Object.is(n,e)))&&e.push(n),e}),[]).map((t=>t({cavern:e}))).reduce(((e,t)=>{var n,r,a,o,i,s,l;return{crystals:Math.max(null!==(n=e.crystals)&&void 0!==n?n:0,null!==(r=null===t||void 0===t?void 0:t.crystals)&&void 0!==r?r:0),ore:Math.max(null!==(a=e.ore)&&void 0!==a?a:0,null!==(o=null===t||void 0===t?void 0:t.ore)&&void 0!==o?o:0),studs:Math.max(null!==(i=e.studs)&&void 0!==i?i:0,null!==(s=null===t||void 0===t?void 0:t.studs)&&void 0!==s?s:0),variables:[...e.variables,...null!==(l=null===t||void 0===t?void 0:t.variables)&&void 0!==l?l:[]],sufficient:!!(e.sufficient||null!==t&&void 0!==t&&t.sufficient)}}),{crystals:0,ore:0,studs:0,variables:[],sufficient:!1});return t.sufficient||(t.crystals=Math.max(t.crystals,5*Math.floor(vt(e)*e.context.crystalGoalRatio/5))),{...e,objectives:t}}),"Adjuring objectives").then((function(e){const t=new Ho(e),{name:n,premise:r,orders:a,success:o,failure:i}=t.briefings(e.dice),s=Object.keys(e.initialContext).length>1,c=s?function(e){const t={...e};delete t.seed;const n=Object.keys(t).sort().map((e=>"".concat(e,":").concat(JSON.stringify(t[e])))).join(",");let r=0;for(let a=0;a<n.length;a++)r=(r<<5)-r+n.charCodeAt(a),r|=0;return new l((8589934591&r)>>>1).uniformChoice(Fo)}(e.initialContext):null,u=(()=>{const t=e.context.seed.toString(16).padStart(8,"0");return K(["gh",t.substring(0,3),t.substring(3,6),[t.substring(6),{rock:"k",ice:"e",lava:"a"}[e.context.biome],s?"x":""].join(""),n.replace(/[^A-Z0-9]+/g,"").toLowerCase(),null===c||void 0===c?void 0:c.replace(/[^A-Z0-9]+/g,"").toLowerCase()]).join("-")})(),d=s?"".concat(n," (").concat(c,")"):n,f={intro:"".concat(r,"\n\n").concat(a),success:o,failure:i};return{...e,fileName:u,lore:t,levelName:d,briefing:f}}),"Enscribing briefing").then((function(e){var t,n;const r=[];e.plans.forEach((t=>{t.architect.claimEventOnDiscover({cavern:e,plan:t}).forEach((n=>{var a,o,i;let{pos:s,dz:l,priority:c}=n;l=null!==(a=l)&&void 0!==a?a:s&&e.discoveryZones.get(...s),l&&!l.openOnSpawn&&c<(null!==(o=null===(i=r[l.id])||void 0===i?void 0:i.priority)&&void 0!==o?o:1/0)&&(r[l.id]={priority:c,planId:t.id})}))}));const a=[];r.forEach(((e,t)=>{let{planId:n}=e;return a[t]=n}));const o=Ke(e),i=!(null===(t=(n=o.architect).holdCreatures)||void 0===t||!t.call(n,{cavern:e,plan:o}));return{...e,ownsScriptOnDiscover:a,anchorHoldCreatures:i}}),"Preparing to write scripts").then((function(e){const t=Array.from(e.plans.reduce(((e,t)=>{const n=t.architect.scriptGlobals;return n&&!e.some((e=>Object.is(n,e)))&&e.push(n),e}),[])),n=function(e){let t=0;const n=[],r={byCondition:{},withCalls:{},inOrder:[]},a=[];function o(e,t,n){const a=kt(...n);if(!a)return;if(r.byCondition[t])return void r.byCondition[t]["".concat(e,"s")].push(a);const o="if"===e?{condition:t,ifs:[a],whens:[]}:{condition:t,ifs:[],whens:[a]};r.inOrder.push(o),r.byCondition[t]=o}function i(e){let{condition:n,ifs:r,whens:a}=e;if(r.length&&a.length){const e="tf".concat(t++);return["int ".concat(e,"=0"),s("if","".concat(e,">0"),r),s("when",n,["".concat(e,"=1;"),...a])].join("\n")}return r.length?s("if",n,r):a.length?s("when",n,a):""}function s(e,n,a){const o=[],i=[];if(a.forEach((e=>{if(e.includes("\n")){const n="t".concat(t++);o.push("".concat(n,";")),i.push(Ct(n,e))}else o.push(e)})),o.length>1){const e=kt(...o);if(e in r.withCalls)o.length=1,o[0]="".concat(r.withCalls[e],";");else{const n="tw".concat(t++);i.unshift(Ct(n,e)),r.withCalls[e]=n,o.length=1,o[0]="".concat(n,";")}}return["".concat(e,"(").concat(n,")[").concat(o[0].substring(0,o[0].length-1),"]"),...i].join("\n")}return{build(){if(t>0)throw new Error("Already used");return[...n,...r.inOrder.map(i),...a].join("\n")},declareInt:(e,t)=>(n.push("int ".concat(e,"=").concat(t.toFixed())),e),declareFloat:(e,t)=>(n.push("float ".concat(e,"=").concat(t)),e),declareString(t,r){let a="";if("string"===typeof r)a=r;else{const t="rng"in r?r.rng:e.dice.lore(r.die),n={...e.lore.state,..."state"in r?r.state:{}},o={...e.lore.format,..."format"in r?r.format:{}};a=r.pg.generate(t,n,o)}return n.push("string ".concat(t,'="').concat(a.replace(/[\\"]+/g,"").replace(/\s*\n[\s\n]*/g," "),'"')),t},declareArrow:e=>(n.push("arrow ".concat(e)),e),declareBuilding:e=>(n.push("building ".concat(e)),e),declareCreature:(e,t)=>(n.push("creature ".concat(e).concat(t?"=".concat(t.id):"")),e),if:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o("if",e,n)},when:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];o("when",e,n)},event(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.push(Ct(e,...n))},onInit(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o("if","time:0",t)}}}(e);!function(e){let{cavern:{objectives:t},sb:n}=e;const r=["crystals","ore","studs"].filter((e=>t[e]>0)),a=(r.length?1:0)+t.variables.length;n.declareInt(Lt.met,0),n.declareInt(Lt.won,0),r.length&&(1===r.length?n.if("".concat(r[0],">=").concat(t[r[0]]),"".concat(Lt.met,"+=1;")):(n.declareInt(Lt.res,0),r.forEach((e=>n.when("".concat(e,">=").concat(t[e]),...r.map((n=>n!==e&&"((".concat(n,"<").concat(t[n],"))return;"))),"".concat(Lt.res,"=1;")))),n.if("".concat(Lt.res,">0"),"".concat(Lt.met,"+=1;")))),n.if("".concat(Lt.met,">=").concat(a),"".concat(Lt.won,"=1;"))}({cavern:e,sb:n}),function(e){let{cavern:t,sb:n}=e;(t.context.hasMonsters||t.context.hasSlugs)&&(t.context.globalHostilesCooldown>0&&(n.declareInt(mn.globalCooldown,0),n.when("".concat(mn.globalCooldown,"==1"),"wait:".concat(t.context.globalHostilesCooldown,";"),"".concat(mn.globalCooldown,"=0;"))),t.oxygen&&(n.declareInt(mn.airMiners,0),n.when("".concat(Ie.id,".poweron"),"".concat(mn.airMiners,"+=10;")),n.when("".concat(Ie.id,".poweroff"),"".concat(mn.airMiners,"-=10;"))),t.anchorHoldCreatures&&n.declareInt(mn.anchorHold,1),t.context.globalHostilesCap>0&&(n.declareInt(mn.active,0),t.creatures.forEach((e=>{if(e.sleep){const t="".concat(mn.mob).concat(e.id);n.declareCreature(t,e),n.if("".concat(t,".wake"),"".concat(mn.active,"+=1;"))}})),[Ge,qe,Qe,$e].forEach((e=>{n.when("".concat(e.id,".dead"),"((".concat(mn.active,">0))").concat(mn.active,"-=1;"))}))))}({cavern:e,sb:n}),function(e){let{cavern:t,sb:n}=e;t.tiles.forEach(((e,r,a)=>{e.trigger&&n.if("drill:".concat(Ot(t,[r,a])),$i[e.trigger](t,r,a))}))}({cavern:e,sb:n}),t.forEach((t=>t({cavern:e,sb:n}))),e.plans.forEach((t=>{var r,a;return null===(r=(a=t.architect).script)||void 0===r?void 0:r.call(a,{cavern:e,plan:t,sb:n})})),e.plans.forEach((t=>{var r,a;return null===(r=(a=t.architect).monsterSpawnScript)||void 0===r?void 0:r.call(a,{cavern:e,plan:t,sb:n})})),e.plans.forEach((t=>{var r,a;return null===(r=(a=t.architect).slugSpawnScript)||void 0===r?void 0:r.call(a,{cavern:e,plan:t,sb:n})}));const r=n.build();return{...e,script:r}}),"Writing scripts").then((function(e){const t=[-e.left,-e.top],n="comments{\n".concat((r=function(e){const t="0.10.12",n={groundhogVersion:t,initialContext:e.initialContext},r=Zi()("Provenance: ".concat(btoa(JSON.stringify(n))),{width:116,indent:"",cut:!0});return"Made with groundHog v".concat(t,"\nhttps://github.com/charredUtensil/groundhog\n\n").concat(r)}(e),a="  ",r.split(/\r?\n/).map((e=>"".concat(a).concat(e))).join("\n")),"\n}\ninfo{\nrowcount:").concat((e.right-e.left).toFixed(),"\ncolcount:").concat((e.bottom-e.top).toFixed(),"\ncamerapos:").concat(we({position:e.cameraPosition,tileOffset:t,heightMap:e.height}),"\nbiome:").concat(e.context.biome,"\ncreator:groundHog\nlevelname:").concat(e.levelName,"\nopencaves:").concat(Ji(e.openCaveFlags.map(((e,t,n)=>[t,n])),t,"yx"),"\n").concat(e.oxygen?"oxygen:".concat(e.oxygen.join("/")):"","\nspiderrate:10\nspidermin:2\nspidermax:4\n").concat("version:2023-08-14-1","\n}\ntiles{\n").concat(es(e,0,((t,n)=>{var r,a;const o=null!==(r=e.tiles.get(t,n))&&void 0!==r?r:ze.SOLID_ROCK,i=o.isWall||null!==(a=e.discoveryZones.get(t,n))&&void 0!==a&&a.openOnSpawn?0:100;return(o.id+i).toFixed()})),"\n}\nheight{\n").concat(es(e,1,((t,n)=>e.height.get(t,n).toFixed())),"\n}\nresources{\ncrystals:\n").concat(es(e,0,((t,n)=>{var r;return(null!==(r=e.crystals.get(t,n))&&void 0!==r?r:0).toFixed()})),"\nore:\n").concat(es(e,0,((t,n)=>{var r;return(null!==(r=e.ore.get(t,n))&&void 0!==r?r:0).toFixed()})),"\n}\nobjectives{\n").concat(function(e){let{crystals:t,ore:n,studs:r,variables:a}=e;const o=a.map((e=>{let{condition:t,description:n}=e;return"variable:".concat(t,"/").concat(n)}));return(t||n||r)&&o.push("resources: ".concat(t.toFixed(),",").concat(n.toFixed(),",").concat(r.toFixed())),o.join("\n")}(e.objectives),"\n}\nbuildings{\n").concat(e.buildings.map((n=>function(e,t,n){return[e.template.id,we({position:e,tileOffset:t,heightMap:n,entityOffset:We,floorMethod:"building"}),e.level>1&&"Level=".concat(e.level.toFixed()),e.isEssential&&"Essential=True",e.teleportAtStart&&"Teleport=True"].filter((e=>e)).join(",")}(n,t,e.height))).join("\n"),"\n}\nlandslidefrequency{\n").concat(ts(e.landslides,t),"\n}\nlavaspread{\n").concat(ts(e.erosion,t),"\n}\ncreatures{\n").concat(e.creatures.map((n=>function(e,t,n){return"".concat(e.template.id,"\n").concat(we({position:e,tileOffset:t,heightMap:n,entityOffset:{z:e.template.zOffset}}),"\nID=").concat(e.id.toFixed()).concat(e.sleep?",Sleep=true":"")}(n,t,e.height))).join("\n"),"\n}\nminers{\n").concat(e.miners.map((n=>function(e,t,n){return["ID=".concat(e.id.toFixed()).concat(e.unique?"/".concat(e.unique):""),we({position:e,tileOffset:t,heightMap:n,entityOffset:Ci}),[...e.loadout,...new Array(e.level-1).fill("Level")].map((e=>"".concat(e,"/"))).join(""),e.essential&&"Essential=true"].filter((e=>e)).join(",")}(n,t,e.height))).join("\n"),"\n}\nvehicles{\n").concat(e.vehicles.map((n=>function(e,t,n){return[e.template.id,we({position:e,tileOffset:t,heightMap:n,entityOffset:{z:e.template.zOffset}}),e.upgrades.length&&"upgrades=".concat(e.upgrades.map((e=>"".concat(e,"/"))).join("")),null!==e.driverId&&"driver=".concat(e.driverId.toFixed()),e.essential&&"Essential=true","ID=".concat(e.id.toFixed())].filter((e=>e)).join(",")}(n,t,e.height))).join("\n"),"\n}\nbriefing{\n").concat(e.briefing.intro,"\n}\nbriefingsuccess{\n").concat(e.briefing.success,"\n}\nbriefingfailure{\n").concat(e.briefing.failure,"\n}\nblocks{\n}\nscript{\n").concat(e.script,"\n\n}");var r,a;return function(e){e.split("\n").forEach(((e,t)=>{if(rs.forEach((n=>{if(e.includes(n))throw new ns("Unexpected ".concat(JSON.stringify(n)," on line ").concat(t,":\n").concat(e))})),e.includes("{")&&!/^\w+\{$/.test(e))throw new ns("Unexpected '{' on line ".concat(t,":\n").concat(e));if(e.includes("}")&&"}"!==e)throw new ns("Unexpected '}' on line ".concat(t,":\n").concat(e))}))}(n),{...e,serialized:n}}),"Writing file contents");const os=di((function(e){const t=v(e.initialContext),n=new f(t.seed);return{...e,context:t,dice:n}})).chain(gi).chain(Si).chain(Oi).chain(Fi).chain(as),is={popoverWrapper:"styles_popoverWrapper__re-vG",subhead:"styles_subhead__tl6JE",about:"styles_about__Ud3AY",lore:"styles_lore__aBk0G",error:"styles_error__o6NAs",message:"styles_message__dHlbe",stack:"styles_stack__6jNum",context:"styles_context__tmsQi"};function ss(t){let{fileName:n,levelName:r,briefing:a,script:o}=t;const i=null===o||void 0===o?void 0:o.split("\n").map((e=>e.match(/^string\s+(?<name>[a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*"(?<value>.*)"$/)));return a||o?(0,D.jsx)("div",{className:is.popoverWrapper,children:(0,D.jsxs)("div",{className:is.lore,children:[(0,D.jsx)("h1",{children:r}),(0,D.jsx)("h2",{children:"Briefing"}),(0,D.jsx)("h3",{children:"Introduction"}),(0,D.jsx)("p",{children:null===a||void 0===a?void 0:a.intro}),(0,D.jsx)("h3",{children:"Success"}),(0,D.jsx)("p",{children:null===a||void 0===a?void 0:a.success}),(0,D.jsx)("h3",{children:"Failure"}),(0,D.jsx)("p",{children:null===a||void 0===a?void 0:a.failure}),i&&(0,D.jsx)("h2",{children:"Scripted Events"}),null===i||void 0===i?void 0:i.map((t=>{if(!t)return null;const{name:n,value:r}=t.groups;return(0,D.jsxs)(e.Fragment,{children:[(0,D.jsx)("h3",{children:n}),(0,D.jsx)("p",{children:r})]},n)}))]})}):null}const ls=()=>(0,D.jsx)("div",{className:is.popoverWrapper,children:(0,D.jsxs)("div",{className:is.about,children:[(0,D.jsxs)("h2",{children:["groundHog v","0.10.12"]}),(0,D.jsx)("p",{children:"By Christopher Dollard (aka charredUtensil)"}),(0,D.jsxs)("p",{children:["See"," ",(0,D.jsx)("a",{href:"https://github.com/charredUtensil/groundhog",target:"_blank",rel:"noreferrer",children:"documentation"})," ","and"," ",(0,D.jsx)("a",{href:"https://github.com/charredUtensil/groundhog/issues",target:"_blank",rel:"noreferrer",children:"report issues"})," ","on GitHub."]}),(0,D.jsx)("p",{children:"LEGO\xae is a trademark of the LEGO Group of companies which does not sponsor, authorize or endorse this site."}),(0,D.jsx)("h2",{children:"Special Thanks"}),(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:[(0,D.jsx)("em",{children:"AAdonaac"})," for writing up their"," ",(0,D.jsx)("a",{href:"https://www.gamedeveloper.com/programming/procedural-dungeon-generation-algorithm",children:"dungeon generation algorithm"})]}),(0,D.jsxs)("li",{children:[(0,D.jsx)("em",{children:(0,D.jsx)("a",{href:"https://baraklava.itch.io",children:"Klavvy (Baraklava)"})})," ","for making Manic Miners"]}),(0,D.jsxs)("li",{children:[(0,D.jsx)("em",{children:"ICsleep (Script Maniac)"}),", ",(0,D.jsx)("em",{children:"Ruinae Retroque Rursus"}),", and"," ",(0,D.jsx)("em",{children:(0,D.jsx)("a",{href:"https://github.com/tyabnet",children:"Tyab"})})," ","for help with scripting and level design"]}),(0,D.jsxs)("li",{children:[(0,D.jsx)("em",{children:(0,D.jsx)("a",{href:"https://github.com/vyldr",children:"Vyldr"})})," ","for making the original"," ",(0,D.jsx)("a",{href:"https://vyldr.github.io/",children:"Manic Miners Random Map Generator"})]}),(0,D.jsx)("li",{children:"Everyone else on the Manic Miners Discord server"})]})]})}),cs={App:"App_App__HX9JK",iceBiome:"App_iceBiome__TxzIK",lavaBiome:"App_lavaBiome__Je2vq",settingsPanel:"App_settingsPanel__5OsgF",mainPanel:"App_mainPanel__vxyPC",grid:"App_grid__p-lsE","scan-scrim":"App_scan-scrim__73gMX",loading:"App_loading__XtoTg",hasError:"App_hasError__ajbuN",stepName:"App_stepName__nVlPC",controls:"App_controls__arkPS",button:"App_button__nYXNW",disabled:"App_disabled__fR4wn",vizOptsPanel:"App_vizOptsPanel__EvGsa",active:"App_active__57U0p"},us="https://github.com/charredUtensil/groundhog/issues/new";function ds(t){let{error:n,initialContext:r,context:a}=t;const[o,i]=(0,e.useState)(!0),[s,l]=(0,e.useState)(!1);if(!o)return null;const c=["error: ".concat(n.message),"groundHog version: ".concat("0.10.12"),"initial context: ".concat(JSON.stringify(r)),"context: ".concat(JSON.stringify(a)),"stack: ".concat(n.stack)].join("\n"),u="".concat(us,"?body=").concat(encodeURIComponent("Add any relevant info here:\n\n\n".concat(c)));return(0,D.jsx)("div",{className:is.popoverWrapper,children:(0,D.jsxs)("div",{className:is.error,children:[(0,D.jsx)("h2",{children:"Cavern generation failed"}),(0,D.jsx)("p",{className:is.message,children:n.message}),(0,D.jsxs)("p",{children:["This isn't supposed to happen. Please consider"," ",(0,D.jsx)("a",{href:u,target:"_blank",rel:"noreferrer",children:"filing a bug"}),"."]}),(0,D.jsxs)("ul",{children:[(0,D.jsxs)("li",{children:["groundHog version: ","0.10.12"]}),(0,D.jsxs)("li",{children:["seed: ",null===a||void 0===a?void 0:a.seed.toString(16).padStart(8,"0").toUpperCase()]}),(0,D.jsx)("li",{children:(0,D.jsx)("a",{href:u,target:"_blank",rel:"noreferrer",children:"Report issue on GitHub (Requires GitHub account)"})}),(0,D.jsx)("li",{children:(0,D.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(c).then((()=>l(!0))),children:["Copy Bug Report",s&&" [ Copied! ]"]})}),(0,D.jsx)("li",{children:(0,D.jsx)("button",{onClick:()=>i(!1),children:"Hide this window"})})]}),n.stack&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h3",{children:"Stack"}),(0,D.jsx)("p",{className:is.stack,children:n.stack})]}),(0,D.jsx)("h3",{children:"Initial Context"}),(0,D.jsx)("p",{className:is.context,children:JSON.stringify(r)}),a&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("h3",{children:"Context"}),(0,D.jsx)("p",{className:is.context,children:JSON.stringify(a)})]})]})})}const fs={progressBar:"style_progressBar__sPeEv",completed:"style_completed__EyVYk",filled:"style_filled__1GTBz",empty:"style_empty__NrJMZ"};function hs(e){let{autoGenerate:t,completedSteps:n,totalSteps:r,lastStepName:a,nextStepName:o}=e;const i="".concat((n/r*100).toFixed(),"%"),s=n>=r,l=s?"100% \u2022 Done!":t?"".concat(i.padStart(4)," \u2022 ").concat(o,"..."):"Finished ".concat(a," \u2022 Next: ").concat(o);return(0,D.jsxs)("div",{className:"".concat(fs.progressBar," ").concat(s?fs.completed:""),style:{"--progress":i},children:[(0,D.jsx)("div",{className:fs.empty,children:l}),(0,D.jsx)("div",{className:fs.filled,children:l})]})}const ps=[{of:"overview",label:"Overview",enabled:e=>!0},{of:"tiles",label:"Tiles",enabled:e=>!(null===e||void 0===e||!e.tiles)},{of:"crystals",label:"Crystals",enabled:e=>!(null===e||void 0===e||!e.crystals)},{of:"ore",label:"Ore",enabled:e=>!(null===e||void 0===e||!e.ore)},{of:"entities",label:"Entities",enabled:e=>!(null===e||void 0===e||!e.buildings)},{of:"discovery",label:"Discovery",enabled:e=>!(null===e||void 0===e||!e.discoveryZones)},{of:"erosion",label:"Erosion",enabled:e=>!(null===e||void 0===e||!e.erosion)},{of:"height",label:"Height",enabled:e=>!(null===e||void 0===e||!e.height)},{of:"landslides",label:"Landslides",enabled:e=>!(null===e||void 0===e||!e.landslides)},{of:"oxygen",label:"Oxygen",enabled:e=>void 0!==(null===e||void 0===e?void 0:e.oxygen)},{of:"objectives",label:"Objectives",enabled:e=>!(null===e||void 0===e||!e.objectives)},{of:"lore",label:"Lore",enabled:e=>!(null===e||void 0===e||!e.lore)},{of:"script",label:"Script",enabled:e=>!(null===e||void 0===e||!e.script)},{of:"about",label:"About",enabled:e=>!0}];function ms(e){return os.start({initialContext:e})}const gs=function(){var t,n,r,a;const[o,i]=(0,e.useState)((()=>ms({seed:qa()}))),s=(0,e.useCallback)((e=>{i((t=>ms("function"===typeof e?e(t.result.initialContext):e)))}),[]),[l,c]=(0,e.useState)(!0),[u,d]=(0,e.useState)("overview"),[f,h]=(0,e.useState)(!1),[p,m]=(0,e.useState)(!1),g=null===(t=o.result.context)||void 0===t?void 0:t.biome,v=(0,e.useCallback)((()=>{try{i(o.next())}catch(e){console.error(e);const t=e instanceof Error?e:new Error("unknown error");i({...o,next:null,error:t})}}),[o]);(0,e.useEffect)((()=>{o.next&&l&&v()}),[l,o,v]),(0,e.useEffect)((()=>{window.cavern=o.result}),[o]);const y=l&&!o.result.serialized||"about"===u;return(0,D.jsxs)("div",{className:"".concat(cs.App," ").concat(cs["".concat(g,"Biome")]),children:[(0,D.jsx)("div",{className:cs.settingsPanel,children:(0,D.jsx)(Za,{initialContext:o.result.initialContext,cavern:o.result,setInitialContext:s})}),(0,D.jsxs)("div",{className:cs.mainPanel,children:[(0,D.jsx)("div",{className:K([cs.grid,y&&cs.loading,o.error&&cs.hasError]).join(" ")}),o.result&&(0,D.jsx)(ci,{cavern:o.result,mapOverlay:u,showOutlines:f,showPearls:p}),"about"===u&&(0,D.jsx)(ls,{}),"lore"===u&&(0,D.jsx)(ss,{...o.result}),o.error&&(0,D.jsx)(ds,{error:o.error,initialContext:o.result.initialContext,context:null===(n=o.result)||void 0===n?void 0:n.context}),(0,D.jsx)(hs,{autoGenerate:l,...o}),(0,D.jsxs)("div",{className:cs.controls,children:[o.next?(0,D.jsxs)(D.Fragment,{children:[!l&&(0,D.jsx)("button",{onClick:v,children:"step"}),(0,D.jsx)("button",{onClick:()=>c((e=>!e)),children:l?"pause":"play_arrow"})]}):(0,D.jsx)("button",{onClick:()=>{c(!1),i((e=>ms(e.result.initialContext)))},children:"restart_alt"}),o.result.serialized?(0,D.jsx)("a",{className:cs.button,href:(b=o.result.serialized,"data:text/plain;charset=utf-8,".concat(encodeURIComponent(b))),download:"".concat(null!==(r=null!==(a=o.result.fileName)&&void 0!==a?a:o.result.levelName)&&void 0!==r?r:"groundhog",".dat"),children:"download"}):(0,D.jsx)("div",{className:"".concat(cs.button," ").concat(cs.disabled),children:"download"})]})]}),(0,D.jsxs)("div",{className:cs.vizOptsPanel,children:[(0,D.jsx)("h1",{children:"Show"}),(0,D.jsx)("button",{className:f?cs.active:cs.inactive,onClick:()=>h((e=>!e)),children:"Outlines"}),(0,D.jsx)("button",{className:p?cs.active:cs.inactive,onClick:()=>m((e=>!e)),children:"Pearls"}),ps.map((e=>{let{of:t,label:n,enabled:r}=e;return(0,D.jsx)("button",{className:u===t?cs.active:r(o.result)?cs.inactive:cs.disabled,onClick:()=>d((e=>e===t?"overview":t)),children:n},t)}))]})]});var b};t.createRoot(document.getElementById("root")).render((0,D.jsx)(e.StrictMode,{children:(0,D.jsx)(gs,{})}))})()})();
//# sourceMappingURL=main.1ce6340c.js.map